function touchHandler(a){var h=a.changedTouches,e=h[0],d="";switch(a.type){case "touchstart":d="mousedown";break;case "touchmove":d="mousemove";break;case "touchend":d="mouseup";break;default:return}var g=document.createEvent("MouseEvent");g.initMouseEvent(d,true,true,window,1,e.screenX,e.screenY,e.clientX,e.clientY,false,false,false,false,0,null);if(h.length<2){e.target.dispatchEvent(g);a.preventDefault()}};(function(a){function h(e){if(typeof e.data==="string"){var d=e.handler,g=e.data.toLowerCase().split(" ");e.handler=function(l){if(!(this!==l.target&&(/textarea|select/i.test(l.target.nodeName)||l.target.type==="text"))){var f=l.type!=="keypress"&&a.hotkeys.specialKeys[l.which],b=String.fromCharCode(l.which).toLowerCase(),c="",k={};if(l.altKey&&f!=="alt")c+="alt+";if(l.ctrlKey&&f!=="ctrl")c+="ctrl+";if(l.metaKey&&!l.ctrlKey&&f!=="meta")c+="meta+";if(l.shiftKey&&f!=="shift")c+="shift+";if(f)k[c+f]=
true;else{k[c+b]=true;k[c+a.hotkeys.shiftNums[b]]=true;if(c==="shift+")k[a.hotkeys.shiftNums[b]]=true}f=0;for(b=g.length;f<b;f++)if(k[g[f]])return d.apply(this,arguments)}}}}a.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",
106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta",219:"[",221:"]"},shiftNums:{"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:h}})})(jQuery);(function(a,h){function e(ca){return typeof ca==="string"}function d(ca){var V=c.call(arguments,1);return function(){return ca.apply(this,V.concat(c.call(arguments)))}}function g(ca,V,Y,oa,pa){var ma;if(oa!==b){V=Y.match(ca?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/);Y=V[3]||"";if(pa===2&&e(oa))oa=oa.replace(ca?ba:U,"");else{ma=n(V[2]);oa=e(oa)?n[ca?aa:N](oa):oa;oa=pa===2?oa:pa===1?a.extend({},oa,ma):a.extend({},ma,oa);oa=m(oa);if(ca)oa=oa.replace(ua,k)}ca=V[1]+(ca?"#":oa||!V[1]?"?":"")+oa+Y}else ca=
V(Y!==b?Y:h[ga][T]);return ca}function l(ca,V,Y){if(V===b||typeof V==="boolean"){Y=V;V=m[ca?aa:N]()}else V=e(V)?V.replace(ca?ba:U,""):V;return n(V,Y)}function f(ca,V,Y,oa){if(!e(Y)&&typeof Y!=="object"){oa=Y;Y=V;V=b}return this.each(function(){var pa=a(this),ma=V||Q()[(this.nodeName||"").toLowerCase()]||"",ka=ma&&pa.attr(ma)||"";pa.attr(ma,m[ca](ka,Y,oa))})}var b,c=Array.prototype.slice,k=decodeURIComponent,m=a.param,s,n,B,D=a.bbq=a.bbq||{},E,I,Q,O=a.event.special,N="querystring",aa="fragment",ga=
"location",T="href",U=/^.*\?|#.*$/g,ba=/^.*\#/,ua,ia={};m[N]=d(g,0,function(ca){return ca.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")});m[aa]=s=d(g,1,function(ca){return ca.replace(/^[^#]*#?(.*)$/,"$1")});s.noEscape=function(ca){ca=ca||"";ca=a.map(ca.split(""),encodeURIComponent);ua=RegExp(ca.join("|"),"g")};s.noEscape(",/");a.deparam=n=function(ca,V){var Y={},oa={"true":true,"false":false,"null":null};a.each(ca.replace(/\+/g," ").split("&"),function(pa,ma){var ka=ma.split("="),Ba=k(ka[0]),ra=Y,Ca=
0,ya=Ba.split("]["),qa=ya.length-1;if(/\[/.test(ya[0])&&/\]$/.test(ya[qa])){ya[qa]=ya[qa].replace(/\]$/,"");ya=ya.shift().split("[").concat(ya);qa=ya.length-1}else qa=0;if(ka.length===2){ka=k(ka[1]);if(V)ka=ka&&!isNaN(ka)?+ka:ka==="undefined"?b:oa[ka]!==b?oa[ka]:ka;if(qa)for(;Ca<=qa;Ca++){Ba=ya[Ca]===""?ra.length:ya[Ca];ra=ra[Ba]=Ca<qa?ra[Ba]||(ya[Ca+1]&&isNaN(ya[Ca+1])?{}:[]):ka}else if(a.isArray(Y[Ba]))Y[Ba].push(ka);else Y[Ba]=Y[Ba]!==b?[Y[Ba],ka]:ka}else if(Ba)Y[Ba]=V?b:""});return Y};n[N]=d(l,
0);n[aa]=B=d(l,1);a.elemUrlAttr||(a.elemUrlAttr=function(ca){return a.extend(ia,ca)})({a:T,base:T,iframe:"src",img:"src",input:"src",form:"action",link:T,script:"src"});Q=a.elemUrlAttr;a.fn[N]=d(f,N);a.fn[aa]=d(f,aa);D.pushState=E=function(ca,V){if(e(ca)&&/^#/.test(ca)&&V===b)V=2;var Y=ca!==b;Y=s(h[ga][T],Y?ca:{},Y?V:2);h[ga][T]=Y+(/#/.test(Y)?"":"#")};D.getState=I=function(ca,V){return ca===b||typeof ca==="boolean"?B(ca):B(V)[ca]};D.removeState=function(ca){var V={};if(ca!==b){V=I();a.each(a.isArray(ca)?
ca:arguments,function(Y,oa){delete V[oa]})}E(V,2)};O.hashchange=a.extend(O.hashchange,{add:function(ca){function V(oa){var pa=oa[aa]=s();oa.getState=function(ma,ka){return ma===b||typeof ma==="boolean"?n(pa,ma):n(pa,ka)[ma]};Y.apply(this,arguments)}var Y;if(a.isFunction(ca)){Y=ca;return V}else{Y=ca.handler;ca.handler=V}}})})(jQuery,this);
(function(a,h,e){function d(s){s=s||h[f][b];return s.replace(/^[^#]*#?(.*)$/,"$1")}var g,l=a.event.special,f="location",b="href",c=document.documentMode,k=a.browser.msie&&(c===e||c<8),m="onhashchange"in h&&!k;a.hashchangeDelay=100;l.hashchange=a.extend(l.hashchange,{setup:function(){if(m)return false;a(g.start)},teardown:function(){if(m)return false;a(g.stop)}});g=function(){function s(){E=I=function(Q){return Q};if(k){D=a('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow;
I=function(){return d(D.document[f][b])};E=function(Q,O){if(Q!==O){var N=D.document;N.open().close();N[f].hash="#"+Q}};E(d())}}var n={},B,D,E,I;n.start=function(){if(!B){var Q=d();E||s();(function O(){var N=d(),aa=I(Q);if(N!==Q){E(Q=N,aa);a(h).trigger("hashchange")}else if(aa!==Q)h[f][b]=h[f][b].replace(/#.*/,"")+"#"+aa;B=setTimeout(O,a.hashchangeDelay)})()}};n.stop=function(){if(!D){B&&clearTimeout(B);B=0}};return n}()})(jQuery,this);(function(a){var h={},e;a.svgIcons=function(d,g){function l(ca,V){if(ca!=="ajax"){if(Q)return;var Y=(D=T[0].contentDocument)&&D.getElementById("svg_eof");if(!Y&&!(V&&Y)){O++;if(O<50)setTimeout(l,20);else{b();Q=true}return}Q=true}B=a(D.firstChild).children();if(g.no_img)setTimeout(function(){I||f()},500);else{Y=ga+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNzUiIGhlaWdodD0iMjc1Ij48L3N2Zz4%3D";E=a(new Image).attr({src:Y,width:0,height:0}).appendTo("body").load(function(){f(true)}).error(function(){f()})}}
function f(ca,V){if(!I){if(g.no_img)ca=false;if(ca){var Y=a(document.createElement("div"));Y.hide().appendTo("body")}if(V){var oa=g.fallback_path?g.fallback_path:"";a.each(V,function(qa,Ka){a("#"+qa);var Da=a(new Image).attr({"class":"svg_icon",src:oa+Ka,width:s,height:n,alt:"icon"});ia(Da,qa)})}else for(var pa=B.length,ma=0;ma<pa;ma++){var ka=B[ma],Ba=ka.id;if(Ba==="svg_eof")break;a("#"+Ba);ka=ka.getElementsByTagNameNS(k,"svg")[0];var ra=document.createElementNS(k,"svg");ra.setAttributeNS(k,"viewBox",
[0,0,s,n].join(" "));var Ca=ka.getAttribute("width"),ya=ka.getAttribute("height");ka.removeAttribute("width");ka.removeAttribute("height");ka.getAttribute("viewBox")||ka.setAttribute("viewBox",[0,0,Ca,ya].join(" "));ra.setAttribute("xmlns",k);ra.setAttribute("width",s);ra.setAttribute("height",n);ra.setAttribute("xmlns:xlink",m);ra.setAttribute("class","svg_icon");aa||(ka=ka.cloneNode(true));ra.appendChild(ka);if(ca){aa||ra.cloneNode(true);Y.empty().append(ra);ka=ga+c(Y.html());ka=a(new Image).attr({"class":"svg_icon",
src:ka})}else ka=e(a(ra),ma);ia(ka,Ba)}g.placement&&a.each(g.placement,function(qa,Ka){h[Ka]&&a(qa).each(function(Da){var xa=h[Ka].clone();if(Da>0&&!ca)xa=e(xa,Da,true);ua(a(this),xa,Ka)})});if(!V){ca&&Y.remove();T&&T.remove();E&&E.remove()}g.resize&&a.resizeSvgIcons(g.resize);I=true;g.callback&&g.callback(h)}}function b(){if(d.indexOf(".svgz")!=-1){var ca=d.replace(".svgz",".svg");window.console&&console.log(".svgz failed, trying with .svg");a.svgIcons(ca,g)}else g.fallback&&f(false,g.fallback)}
function c(ca){if(window.btoa)return window.btoa(ca);var V=Array(Math.floor((ca.length+2)/3)*4),Y,oa,pa,ma,ka,Ba,ra=0,Ca=0;do{Y=ca.charCodeAt(ra++);oa=ca.charCodeAt(ra++);pa=ca.charCodeAt(ra++);ma=Y>>2;Y=(Y&3)<<4|oa>>4;ka=(oa&15)<<2|pa>>6;Ba=pa&63;if(isNaN(oa))ka=Ba=64;else if(isNaN(pa))Ba=64;V[Ca++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(ma);V[Ca++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(Y);V[Ca++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(ka);
V[Ca++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(Ba)}while(ra<ca.length);return V.join("")}var k="http://www.w3.org/2000/svg",m="http://www.w3.org/1999/xlink",s=g.w?g.w:24,n=g.h?g.h:24,B,D,E,I=false,Q=false,O=0,N=navigator.userAgent,aa=!!window.opera;N.indexOf("Safari/")>-1&&N.indexOf("Chrome/");var ga="data:image/svg+xml;charset=utf-8;base64,";if(g.svgz){var T=a('<object data="'+d+'" type=image/svg+xml>').appendTo("body").hide();try{D=T[0].contentDocument;T.load(l);
l(0,true)}catch(U){b()}}else{var ba=new DOMParser;a.ajax({url:d,dataType:"string",success:function(ca){if(ca){D=ba.parseFromString(ca,"text/xml");a(function(){l("ajax")})}else a(b)},error:function(ca){if(window.opera)a(function(){b()});else if(ca.responseText){D=ba.parseFromString(ca.responseText,"text/xml");D.childNodes.length||a(b);a(function(){l("ajax")})}else a(b)}})}var ua=function(ca,V,Y,oa){aa&&V.css("visibility","hidden");if(g.replace){oa&&V.attr("id",Y);(Y=ca.attr("class"))&&V.attr("class",
"svg_icon "+Y);ca.replaceWith(V)}else ca.append(V);aa&&setTimeout(function(){V.removeAttr("style")},1)},ia=function(ca,V){if(g.id_match===undefined||g.id_match!==false)ua(holder,ca,V,true);h[V]=ca};e=function(ca,V){var Y=ca.find("defs");if(!Y.length)return ca;Y=aa?Y.find("*").filter(function(){return!!this.id}):Y.find("[id]");var oa=ca[0].getElementsByTagName("*"),pa=oa.length;Y.each(function(ma){var ka=this.id;a(D).find("#"+ka);this.id=ma="x"+ka+V+ma;ka="url(#"+ka+")";var Ba="url(#"+ma+")";for(ma=
0;ma<pa;ma++){var ra=oa[ma];ra.getAttribute("fill")===ka&&ra.setAttribute("fill",Ba);ra.getAttribute("stroke")===ka&&ra.setAttribute("stroke",Ba);ra.getAttribute("filter")===ka&&ra.setAttribute("filter",Ba)}});return ca}};a.getSvgIcon=function(d,g){var l=h[d];if(g&&l)l=e(l,0,true).clone(true);return l};a.resizeSvgIcons=function(d){var g=!a(".svg_icon:first").length;a.each(d,function(l,f){var b=a.isArray(f),c=b?f[0]:f,k=b?f[1]:f;if(g)l=l.replace(/\.svg_icon/g,"svg");a(l).each(function(){this.setAttribute("width",
c);this.setAttribute("height",k);if(window.opera&&window.widget){this.parentNode.style.width=c+"px";this.parentNode.style.height=k+"px"}})})}})(jQuery);(function(){function a(d,g,l){d=document.createElementNS(h.svg,d);if(e)for(var f in g)d.setAttribute(f,g[f]);else for(f in g){var b=g[f],c=d[f];if(c&&c.constructor==="SVGLength")c.baseVal.value=b;else d.setAttribute(f,b)}l&&l.appendChild(d);return d}var h={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};if(!window.console)window.console=new function(){this.log=function(){};this.dir=function(){}};$.jGraduate={Paint:function(d){d=d||{};this.alpha=isNaN(d.alpha)?100:d.alpha;if(d.copy){this.type=
d.copy.type;this.alpha=d.copy.alpha;this.radialGradient=this.linearGradient=this.solidColor=null;switch(this.type){case "solidColor":this.solidColor=d.copy.solidColor;break;case "linearGradient":this.linearGradient=d.copy.linearGradient.cloneNode(true);break;case "radialGradient":this.radialGradient=d.copy.radialGradient.cloneNode(true)}}else if(d.linearGradient){this.type="linearGradient";this.radialGradient=this.solidColor=null;this.linearGradient=d.linearGradient.cloneNode(true)}else if(d.radialGradient){this.type=
"radialGradient";this.linearGradient=this.solidColor=null;this.radialGradient=d.radialGradient.cloneNode(true)}else if(d.solidColor){this.type="solidColor";this.solidColor=d.solidColor}else{this.type="none";this.radialGradient=this.linearGradient=this.solidColor=null}}};jQuery.fn.jGraduateDefaults={paint:new $.jGraduate.Paint,window:{pickerTitle:"Drag markers to pick a paint"},images:{clientPath:"images/"},newstop:"inverse"};var e=navigator.userAgent.indexOf("Gecko/")>=0;jQuery.fn.jGraduate=function(d){var g=
arguments;return this.each(function(){function l(la,da,na,P,S){var fa=S||a("stop",{"stop-color":da,"stop-opacity":na,offset:la},ba);if(S){da=S.getAttribute("stop-color");na=S.getAttribute("stop-opacity");la=S.getAttribute("offset")}else ba.appendChild(fa);if(na===null)na=1;S=a("path",{d:"M-6.2,0.9c3.6-4,6.7-4.3,6.7-12.4c-0.2,7.9,3.1,8.8,6.5,12.4c3.5,3.8,2.9,9.6,0,12.3c-3.1,2.8-10.4,2.7-13.2,0C-9.6,9.9-9.4,4.4-6.2,0.9z",fill:"url(#jGraduate_trans)",transform:"translate("+(10+la*aa)+", 26)"},kb);var Ha=
a("path",{d:"M-6.2,0.9c3.6-4,6.7-4.3,6.7-12.4c-0.2,7.9,3.1,8.8,6.5,12.4c3.5,3.8,2.9,9.6,0,12.3c-3.1,2.8-10.4,2.7-13.2,0C-9.6,9.9-9.4,4.4-6.2,0.9z",fill:da,"fill-opacity":na,transform:"translate("+(10+la*aa)+", 26)",stroke:"#000","stroke-width":1.5},kb);$(Ha).mousedown(function(Oa){f(this);Va=cb;Q.mousemove(k).mouseup(b);za=vb.offset();Oa.preventDefault();return false}).data("stop",fa).data("bg",S).dblclick(function(){$("div.jGraduate_LightBox").show();for(var Oa=this,Wa=+fa.getAttribute("stop-opacity")||
1,Za=fa.getAttribute("stop-color")||1,nb=(parseFloat(Wa)*255).toString(16);nb.length<2;)nb="0"+nb;da=Za.substr(1)+nb;$("#"+n+"_jGraduate_stopPicker").css({left:100,bottom:15}).jPicker({window:{title:"Pick the start color and opacity for the gradient"},images:{clientPath:s.images.clientPath},color:{active:da,alphaSupport:true}},function(Ra){Za=Ra.val("hex")?"#"+Ra.val("hex"):"none";Wa=Ra.val("a")!==null?Ra.val("a")/256:1;Oa.setAttribute("fill",Za);Oa.setAttribute("fill-opacity",Wa);fa.setAttribute("stop-color",
Za);fa.setAttribute("stop-opacity",Wa);$("div.jGraduate_LightBox").hide();$("#"+n+"_jGraduate_stopPicker").hide()},null,function(){$("div.jGraduate_LightBox").hide();$("#"+n+"_jGraduate_stopPicker").hide()})});$(ba).find("stop").each(function(){var Oa=$(this);if(+this.getAttribute("offset")>la){if(!da){var Wa=this.getAttribute("stop-color"),Za=this.getAttribute("stop-opacity");fa.setAttribute("stop-color",Wa);Ha.setAttribute("fill",Wa);fa.setAttribute("stop-opacity",Za===null?1:Za);Ha.setAttribute("fill-opacity",
Za===null?1:Za)}Oa.before(fa);return false}});P&&f(Ha);return fa}function f(la){cb&&cb.setAttribute("stroke","#000");la.setAttribute("stroke","blue");cb=la;cb.parentNode.appendChild(cb)}function b(){Q.unbind("mousemove",k);if(Ia.getAttribute("display")!=="none"){Ia.setAttribute("display","none");var la=$(cb),da=la.data("stop");la=la.data("bg");$([cb,da,la]).remove()}Va=null}function c(){var la=Sa?"rotate("+Sa+","+Ja+","+db+") ":"";$a===1&&La===1?ba.removeAttribute("gradientTransform"):ba.setAttribute("gradientTransform",
la+"translate("+-Ja*($a-1)+","+-db*(La-1)+") scale("+$a+","+La+")")}function k(la){var da=la.pageX-za.left;la=la.pageY-za.top;da=da<10?10:da>aa+10?aa+10:da;var na="translate("+da+", 26)";if(la<-60||la>130){Ia.setAttribute("display","block");Ia.setAttribute("transform",na)}else Ia.setAttribute("display","none");Va.setAttribute("transform",na);$.data(Va,"bg").setAttribute("transform",na);$.data(Va,"stop").setAttribute("offset",(da-10)/aa);var P=0;$(ba).find("stop").each(function(){var S=this.getAttribute("offset"),
fa=$(this);if(S<P){fa.prev().before(fa);va=$(ba).find("stop")}P=S})}var m=$(this),s=$.extend(true,{},jQuery.fn.jGraduateDefaults,d),n=m.attr("id"),B="#"+m.attr("id")+" ";if(B){var D=function(){switch(m.paint.type){case "radialGradient":m.paint.linearGradient=null;break;case "linearGradient":m.paint.radialGradient=null;break;case "solidColor":m.paint.radialGradient=m.paint.linearGradient=null}$.isFunction(m.okCallback)&&m.okCallback(m.paint);m.hide()},E=function(){$.isFunction(m.cancelCallback)&&m.cancelCallback();
m.hide()};$.extend(true,m,{paint:new $.jGraduate.Paint({copy:s.paint}),okCallback:$.isFunction(g[1])&&g[1]||null,cancelCallback:$.isFunction(g[2])&&g[2]||null});m.position();var I=null,Q=$(window);if(m.paint.type=="none")m.paint=$.jGraduate.Paint({solidColor:"ffffff"});m.addClass("jGraduate_Picker");m.html('<ul class="jGraduate_tabs"><li class="jGraduate_tab_color jGraduate_tab_current" data-type="col">Solid Color</li><li class="jGraduate_tab_lingrad" data-type="lg">Linear Gradient</li><li class="jGraduate_tab_radgrad" data-type="rg">Radial Gradient</li></ul><div class="jGraduate_colPick"></div><div class="jGraduate_gradPick"></div><div class="jGraduate_LightBox"></div><div id="'+
n+'_jGraduate_stopPicker" class="jGraduate_stopPicker"></div>');var O=$(B+"> .jGraduate_colPick"),N=$(B+"> .jGraduate_gradPick");N.html('<div id="'+n+'_jGraduate_Swatch" class="jGraduate_Swatch"><h2 class="jGraduate_Title">'+s.window.pickerTitle+'</h2><div id="'+n+'_jGraduate_GradContainer" class="jGraduate_GradContainer"></div><div id="'+n+'_jGraduate_StopSlider" class="jGraduate_StopSlider"></div></div><div class="jGraduate_Form jGraduate_Points jGraduate_lg_field"><div class="jGraduate_StopSection"><label class="jGraduate_Form_Heading">Begin Point</label><div class="jGraduate_Form_Section"><label>x:</label><input type="text" id="'+
n+'_jGraduate_x1" size="3" title="Enter starting x value between 0.0 and 1.0"/><label> y:</label><input type="text" id="'+n+'_jGraduate_y1" size="3" title="Enter starting y value between 0.0 and 1.0"/></div></div><div class="jGraduate_StopSection"><label class="jGraduate_Form_Heading">End Point</label><div class="jGraduate_Form_Section"><label>x:</label><input type="text" id="'+n+'_jGraduate_x2" size="3" title="Enter ending x value between 0.0 and 1.0"/><label> y:</label><input type="text" id="'+
n+'_jGraduate_y2" size="3" title="Enter ending y value between 0.0 and 1.0"/></div></div></div><div class="jGraduate_Form jGraduate_Points jGraduate_rg_field"><div class="jGraduate_StopSection"><label class="jGraduate_Form_Heading">Center Point</label><div class="jGraduate_Form_Section"><label>x:</label><input type="text" id="'+n+'_jGraduate_cx" size="3" title="Enter x value between 0.0 and 1.0"/><label> y:</label><input type="text" id="'+n+'_jGraduate_cy" size="3" title="Enter y value between 0.0 and 1.0"/></div></div><div class="jGraduate_StopSection"><label class="jGraduate_Form_Heading">Focal Point</label><div class="jGraduate_Form_Section"><label>Match center: <input type="checkbox" checked="checked" id="'+
n+'_jGraduate_match_ctr"/></label><br/><label>x:</label><input type="text" id="'+n+'_jGraduate_fx" size="3" title="Enter x value between 0.0 and 1.0"/><label> y:</label><input type="text" id="'+n+'_jGraduate_fy" size="3" title="Enter y value between 0.0 and 1.0"/></div></div></div><div class="jGraduate_StopSection jGraduate_SpreadMethod"><label class="jGraduate_Form_Heading">Spread method</label><div class="jGraduate_Form_Section"><select class="jGraduate_spreadMethod"><option value=pad selected>Pad</option><option value=reflect>Reflect</option><option value=repeat>Repeat</option></select></div></div><div class="jGraduate_Form"><div class="jGraduate_Slider jGraduate_RadiusField jGraduate_rg_field"><label class="prelabel">Radius:</label><div id="'+
n+'_jGraduate_Radius" class="jGraduate_SliderBar jGraduate_Radius" title="Click to set radius"><img id="'+n+'_jGraduate_RadiusArrows" class="jGraduate_RadiusArrows" src="'+s.images.clientPath+'rangearrows2.gif"></div><label><input type="text" id="'+n+'_jGraduate_RadiusInput" size="3" value="100"/>%</label></div><div class="jGraduate_Slider jGraduate_EllipField jGraduate_rg_field"><label class="prelabel">Ellip:</label><div id="'+n+'_jGraduate_Ellip" class="jGraduate_SliderBar jGraduate_Ellip" title="Click to set Ellip"><img id="'+
n+'_jGraduate_EllipArrows" class="jGraduate_EllipArrows" src="'+s.images.clientPath+'rangearrows2.gif"></div><label><input type="text" id="'+n+'_jGraduate_EllipInput" size="3" value="0"/>%</label></div><div class="jGraduate_Slider jGraduate_AngleField jGraduate_rg_field"><label class="prelabel">Angle:</label><div id="'+n+'_jGraduate_Angle" class="jGraduate_SliderBar jGraduate_Angle" title="Click to set Angle"><img id="'+n+'_jGraduate_AngleArrows" class="jGraduate_AngleArrows" src="'+s.images.clientPath+
'rangearrows2.gif"></div><label><input type="text" id="'+n+'_jGraduate_AngleInput" size="3" value="0"/>\u00ba&nbsp;</label></div><div class="jGraduate_Slider jGraduate_OpacField"><label class="prelabel">Opac:</label><div id="'+n+'_jGraduate_Opac" class="jGraduate_SliderBar jGraduate_Opac" title="Click to set Opac"><img id="'+n+'_jGraduate_OpacArrows" class="jGraduate_OpacArrows" src="'+s.images.clientPath+'rangearrows2.gif"></div><label><input type="text" id="'+n+'_jGraduate_OpacInput" size="3" value="100"/>%</label></div></div><div class="jGraduate_OkCancel"><input type="button" id="'+
n+'_jGraduate_Ok" class="jGraduate_Ok" value="OK"/><input type="button" id="'+n+'_jGraduate_Cancel" class="jGraduate_Cancel" value="Cancel"/></div>');var aa=256,ga=aa-0,T=aa-0,U,ba,ua,ia={};$(".jGraduate_SliderBar").width(145);var ca=$("#"+n+"_jGraduate_GradContainer")[0],V=a("svg",{id:n+"_jgraduate_svg",width:aa,height:aa,xmlns:h.svg},ca);U=U||m.paint.type;var Y=ba=m.paint[U],oa=m.paint.alpha,pa=U==="solidColor";switch(U){case "solidColor":case "linearGradient":if(!pa){ba.id=n+"_lg_jgraduate_grad";
Y=ba=V.appendChild(ba)}a("radialGradient",{id:n+"_rg_jgraduate_grad"},V);if(U==="linearGradient")break;case "radialGradient":if(!pa){ba.id=n+"_rg_jgraduate_grad";Y=ba=V.appendChild(ba)}a("linearGradient",{id:n+"_lg_jgraduate_grad"},V)}if(pa){Y=ba=$("#"+n+"_lg_jgraduate_grad")[0];I=m.paint[U];l(0,"#"+I,1);var ma=typeof s.newstop;if(ma==="string")switch(s.newstop){case "same":l(1,"#"+I,1);break;case "inverse":ma="";for(var ka=0;ka<6;ka+=2){I.substr(ka,2);var Ba=(255-parseInt(I.substr(ka,2),16)).toString(16);
if(Ba.length<2)Ba=0+Ba;ma+=Ba}l(1,"#"+ma,1);break;case "white":l(1,"#ffffff",1);break;case "black":l(1,"#000000",1)}else if(ma==="object")l(1,s.newstop.color||"#"+I,"opac"in s.newstop?s.newstop.opac:1)}I=parseFloat(Y.getAttribute("x1")||0);ma=parseFloat(Y.getAttribute("y1")||0);ka=parseFloat(Y.getAttribute("x2")||1);Ba=parseFloat(Y.getAttribute("y2")||0);var ra=parseFloat(Y.getAttribute("cx")||0.5),Ca=parseFloat(Y.getAttribute("cy")||0.5),ya=parseFloat(Y.getAttribute("fx")||ra),qa=parseFloat(Y.getAttribute("fy")||
Ca);ua=a("rect",{id:n+"_jgraduate_rect",x:0,y:0,width:ga,height:T,fill:"url(#"+n+"_jgraduate_grad)","fill-opacity":oa/100},V);var Ka=$("<div/>").attr({"class":"grad_coord jGraduate_lg_field",title:"Begin Stop"}).text(1).css({top:ma*aa,left:I*aa}).data("coord","start").appendTo(ca),Da=Ka.clone().text(2).css({top:Ba*aa,left:ka*aa}).attr("title","End stop").data("coord","end").appendTo(ca),xa=$("<div/>").attr({"class":"grad_coord jGraduate_rg_field",title:"Center stop"}).text("C").css({top:Ca*aa,left:ra*
aa}).data("coord","center").appendTo(ca),sa=xa.clone().text("F").css({top:qa*aa,left:ya*aa,display:"none"}).attr("title","Focus point").data("coord","focus").appendTo(ca);sa[0].id=n+"_jGraduate_focusCoord";$(B+" .grad_coord");$.each(["x1","y1","x2","y2","cx","cy","fx","fy"],function(la,da){var na=ba.getAttribute(da),P=isNaN(da[1]);na||(na=P?"0.5":da==="x2"?"1.0":"0.0");ia[da]=$("#"+n+"_jGraduate_"+da).val(na).change(function(){if(isNaN(parseFloat(this.value))||this.value<0)this.value=0;else if(this.value>
1)this.value=1;if(!(da[0]==="f"&&!eb))if(P&&U==="radialGradient"||!P&&U==="linearGradient")ba.setAttribute(da,this.value);var S=P?da[0]==="c"?xa:sa:da[1]==="1"?Ka:Da,fa=da.indexOf("x")>=0?"left":"top";S.css(fa,this.value*aa)}).change()});var va,kb,vb=$("#"+n+"_jGraduate_StopSlider"),cb,Ta,Va,Ia=a("path",{d:"m9.75,-6l-19.5,19.5m0,-19.5l19.5,19.5",fill:"none",stroke:"#D00","stroke-width":5,display:"none"},Ta),za,$a=1,La=1,Sa=0,Ja=ra,db=Ca;Ta=a("svg",{width:"100%",height:45},vb[0]);ca=a("pattern",{width:16,
height:16,patternUnits:"userSpaceOnUse",id:"jGraduate_trans"},Ta);a("image",{width:16,height:16},ca).setAttributeNS(h.xlink,"xlink:href",s.images.clientPath+"map-opacity.png");$(Ta).on("click touchstart",function(la){za=vb.offset();if(la.target.tagName!=="path"){var da=la.pageX-za.left-8;da=da<10?10:da>aa+10?aa+10:da;l(da/aa,0,0,true);la.stopPropagation()}});$(Ta).mouseover(function(){Ta.appendChild(Ia)});kb=a("g",{},Ta);a("line",{x1:10,y1:15,x2:aa+10,y2:15,"stroke-width":2,stroke:"#000"},Ta);var lb=
N.find(".jGraduate_spreadMethod").change(function(){ba.setAttribute("spreadMethod",$(this).val())}),Ua=null,Xa=function(la){var da=la.pageX-hb.left,na=la.pageY-hb.top;da=da<0?0:da>aa?aa:da;na=na<0?0:na>aa?aa:na;Ua.css("left",da).css("top",na);da=da/ga;na=na/T;var P=Ua.data("coord"),S=ba;switch(P){case "start":ia.x1.val(da);ia.y1.val(na);S.setAttribute("x1",da);S.setAttribute("y1",na);break;case "end":ia.x2.val(da);ia.y2.val(na);S.setAttribute("x2",da);S.setAttribute("y2",na);break;case "center":ia.cx.val(da);
ia.cy.val(na);S.setAttribute("cx",da);S.setAttribute("cy",na);Ja=da;db=na;c();break;case "focus":ia.fx.val(da);ia.fy.val(na);S.setAttribute("fx",da);S.setAttribute("fy",na);c()}la.preventDefault()},wb=function(){Ua=null;Q.unbind("mousemove",Xa).unbind("mouseup",wb)};va=ba.getElementsByTagNameNS(h.svg,"stop");if(wa<2){for(;wa<2;){ba.appendChild(document.createElementNS(h.svg,"stop"));++wa}va=ba.getElementsByTagNameNS(h.svg,"stop")}var wa=va.length;for(ka=0;ka<wa;ka++)l(0,0,0,0,va[ka]);lb.val(ba.getAttribute("spreadMethod")||
"pad");var hb,eb=false;ua.setAttribute("fill-opacity",oa/100);$("#"+n+" div.grad_coord").mousedown(function(la){la.preventDefault();Ua=$(this);Ua.offset();hb=Ua.parent().offset();Q.mousemove(Xa).mouseup(wb)});$("#"+n+"_jGraduate_Ok").bind("click touchstart",function(){m.paint.type=U;m.paint[U]=ba.cloneNode(true);m.paint.solidColor=null;D()});$("#"+n+"_jGraduate_Cancel").bind("click touchstart",function(){E()});if(U==="radialGradient")if(eb)sa.show();else{sa.hide();ia.fx.val("");ia.fy.val("")}$("#"+
n+"_jGraduate_match_ctr")[0].checked=!eb;var sb,ib;$("#"+n+"_jGraduate_match_ctr").change(function(){eb=!this.checked;sa.toggle(eb);ia.fx.val("");ia.fy.val("");var la=ba;if(eb){var da=sb||0.5,na=ib||0.5;la.setAttribute("fx",da);la.setAttribute("fy",na);ia.fx.val(da);ia.fy.val(na)}else{sb=la.getAttribute("fx");ib=la.getAttribute("fy");la.removeAttribute("fx");la.removeAttribute("fy")}});va=ba.getElementsByTagNameNS(h.svg,"stop");wa=va.length;if(wa<2){for(;wa<2;){ba.appendChild(document.createElementNS(h.svg,
"stop"));++wa}va=ba.getElementsByTagNameNS(h.svg,"stop")}var ab;oa=N=0;if(U==="radialGradient"){V=ba.gradientTransform.baseVal;if(V.numberOfItems===2){wa=V.getItem(0);V=V.getItem(1);if(wa.type===2&&V.type===3){wa=V.matrix;if(wa.a!==1)N=Math.round(-(1-wa.a)*100);else if(wa.d!==1)N=Math.round((1-wa.d)*100)}}else if(V.numberOfItems===3){ca=V.getItem(0);wa=V.getItem(1);V=V.getItem(2);if(ca.type===4&&wa.type===2&&V.type===3){oa=Math.round(ca.angle);wa=V.matrix;if(wa.a!==1)N=Math.round(-(1-wa.a)*100);else if(wa.d!==
1)N=Math.round((1-wa.d)*100)}}}N={radius:{handle:"#"+n+"_jGraduate_RadiusArrows",input:"#"+n+"_jGraduate_RadiusInput",val:(ba.getAttribute("r")||0.5)*100},opacity:{handle:"#"+n+"_jGraduate_OpacArrows",input:"#"+n+"_jGraduate_OpacInput",val:m.paint.alpha||100},ellip:{handle:"#"+n+"_jGraduate_EllipArrows",input:"#"+n+"_jGraduate_EllipInput",val:N},angle:{handle:"#"+n+"_jGraduate_AngleArrows",input:"#"+n+"_jGraduate_AngleInput",val:oa}};$.each(N,function(la,da){var na=$(da.handle);na.mousedown(function(P){var S=
na.parent();ab={type:la,elem:na,input:$(da.input),parent:S,offset:S.offset()};Q.mousemove(ob).mouseup(pb);P.preventDefault()});$(da.input).val(da.val).change(function(){var P=+this.value,S=0,fa=U==="radialGradient";switch(la){case "radius":fa&&ba.setAttribute("r",P/100);S=Math.pow(P/100,0.4)/2*145;break;case "opacity":m.paint.alpha=P;ua.setAttribute("fill-opacity",P/100);S=P*1.45;break;case "ellip":$a=La=1;if(P===0){S=72.5;break}if(P>99.5)P=99.5;if(P>0)La=1-P/100;else $a=-(P/100)-1;S=145*((P+100)/
2)/100;fa&&c();break;case "angle":Sa=P;S=Sa/180;S+=0.5;S*=145;fa&&c()}if(S>145)S=145;else if(S<0)S=0;na.css({"margin-left":S-5})}).change()});var ob=function(la){var da=la.pageX-ab.offset.left-parseInt(ab.parent.css("border-left-width"));if(da>145)da=145;if(da<=0)da=0;var na=da-5;da/=145;switch(ab.type){case "radius":da=Math.pow(da*2,2.5);if(da>0.98&&da<1.02)da=1;if(da<=0.01)da=0.01;ba.setAttribute("r",da);break;case "opacity":m.paint.alpha=parseInt(da*100);ua.setAttribute("fill-opacity",da);break;
case "ellip":La=$a=1;if(da<0.5){da/=0.5;$a=da<=0?0.01:da}else if(da>0.5){da/=0.5;da=2-da;La=da<=0?0.01:da}c();da-=1;if(La===da+1)da=Math.abs(da);break;case "angle":da-=0.5;Sa=da*=180;c();da/=100}ab.elem.css({"margin-left":na});da=Math.round(da*100);ab.input.val(da);la.preventDefault()},pb=function(){Q.unbind("mousemove",ob).unbind("mouseup",pb);ab=null};for(N=(m.paint.alpha*255/100).toString(16);N.length<2;)N="0"+N;N=N.split(".")[0];I=m.paint.solidColor=="none"?"":m.paint.solidColor+N;pa||(I=va[0].getAttribute("stop-color"));
$.extend($.fn.jPicker.defaults.window,{alphaSupport:true,effects:{type:"show",speed:0}});O.jPicker({window:{title:s.window.pickerTitle},images:{clientPath:s.images.clientPath},color:{active:I,alphaSupport:true}},function(la){m.paint.type="solidColor";m.paint.alpha=la.val("ahex")?Math.round(la.val("a")/255*100):100;m.paint.solidColor=la.val("hex")?la.val("hex"):"none";m.paint.radialGradient=null;D()},null,function(){E()});var fb=$(B+" .jGraduate_tabs li");fb.on("click touchstart",function(){fb.removeClass("jGraduate_tab_current");
$(this).addClass("jGraduate_tab_current");$(B+" > div").hide();var la=$(this).attr("data-type");$(B+" .jGraduate_gradPick").show();if(la==="rg"||la==="lg"){$(".jGraduate_"+la+"_field").show();$(".jGraduate_"+(la==="lg"?"rg":"lg")+"_field").hide();$("#"+n+"_jgraduate_rect")[0].setAttribute("fill","url(#"+n+"_"+la+"_jgraduate_grad)");U=la==="lg"?"linearGradient":"radialGradient";$("#"+n+"_jGraduate_OpacInput").val(m.paint.alpha).change();var da=$("#"+n+"_"+la+"_jgraduate_grad")[0];if(ba!==da){var na=
$(ba).find("stop");$(da).empty().append(na);ba=da;da=lb.val();ba.setAttribute("spreadMethod",da)}eb=la==="rg"&&ba.getAttribute("fx")!=null&&!(ra==ya&&Ca==qa);$("#"+n+"_jGraduate_focusCoord").toggle(eb);if(eb)$("#"+n+"_jGraduate_match_ctr")[0].checked=false}else{$(B+" .jGraduate_gradPick").hide();$(B+" .jGraduate_colPick").show()}});$(B+" > div").hide();fb.removeClass("jGraduate_tab_current");var tb;switch(m.paint.type){case "linearGradient":tb=$(B+" .jGraduate_tab_lingrad");break;case "radialGradient":tb=
$(B+" .jGraduate_tab_radgrad");break;default:tb=$(B+" .jGraduate_tab_color")}m.show();setTimeout(function(){tb.addClass("jGraduate_tab_current").click()},10)}else alert("Container element must have an id attribute to maintain unique id strings for sub-elements.")})}})();jQuery&&function(){var a=$(window),h=$(document);$.extend($.fn,{contextMenu:function(e,d){if(e.menu==undefined)return false;if(e.inSpeed==undefined)e.inSpeed=150;if(e.outSpeed==undefined)e.outSpeed=75;if(e.inSpeed==0)e.inSpeed=-1;if(e.outSpeed==0)e.outSpeed=-1;$(this).each(function(){var g=$(this),l=$(g).offset(),f=$("#"+e.menu);f.addClass("contextMenu");$(this).bind("mousedown",function(c){$(this).on("mouseup",function(k){var m=$(this);m.unbind("mouseup");$(".contextMenu").hide();if(c.button===2||
e.allowLeft||c.ctrlKey&&svgedit.browser.isMac())svgedit.browser.isTouch()||b(k,c,m)})});svgedit.browser.isTouch()&&$(this).bind("taphold",function(c){var k=$(this);k.unbind("mouseup");b(c,c,k)});var b=function(c,k,m){if(typeof k=="undefined")k=c;c.stopPropagation();if(g.hasClass("disabled")||k.altKey)return false;var s=c.pageX,n=c.pageY;if(svgedit.browser.isTouch()){s=c.originalEvent.touches[0].pageX;n=c.originalEvent.touches[0].pageY}c=a.width()-f.width();k=a.height()-f.height();if(s>c-15)s=c-15;
if(n>k-30)n=k-30;if(svgedit.browser.isTouch())n-=f.height()/2;h.unbind("click");f.css({top:n,left:s}).fadeIn(e.inSpeed);f.find("A").mouseover(function(){f.find("LI.hover").removeClass("hover");$(this).parent().addClass("hover")}).mouseout(function(){f.find("LI.hover").removeClass("hover")});h.keypress(function(B){switch(B.keyCode){case 38:if(f.find("LI.hover").length){f.find("LI.hover").removeClass("hover").prevAll("LI:not(.disabled)").eq(0).addClass("hover");f.find("LI.hover").length||f.find("LI:last").addClass("hover")}else f.find("LI:last").addClass("hover");
break;case 40:if(f.find("LI.hover").length==0)f.find("LI:first").addClass("hover");else{f.find("LI.hover").removeClass("hover").nextAll("LI:not(.disabled)").eq(0).addClass("hover");f.find("LI.hover").length||f.find("LI:first").addClass("hover")}break;case 13:f.find("LI.hover A").trigger("click");break;case 27:h.trigger("click")}});f.find("A").unbind("mouseup");f.find("LI:not(.disabled) A").mouseup(function(){h.unbind("click").unbind("keypress");$(".contextMenu").hide();d&&d($(this).attr("href").substr(1),
$(m),{x:s-l.left,y:n-l.top,docX:s,docY:n});return false});setTimeout(function(){h.click(function(){h.unbind("click").unbind("keypress");f.fadeOut(e.outSpeed);return false})},0)};if($.browser.mozilla)$("#"+e.menu).each(function(){$(this).css({MozUserSelect:"none"})});else $.browser.msie?$("#"+e.menu).each(function(){$(this).bind("selectstart.disableTextSelect",function(){return false})}):$("#"+e.menu).each(function(){$(this).bind("mousedown.disableTextSelect",function(){return false})});$(g).add($("UL.contextMenu")).bind("contextmenu",
function(){return false})});return $(this)},disableContextMenuItems:function(e){if(e==undefined){$(this).find("LI").addClass("disabled");return $(this)}$(this).each(function(){if(e!=undefined)for(var d=e.split(","),g=0;g<d.length;g++)$(this).find('A[href="'+d[g]+'"]').parent().addClass("disabled")});return $(this)},enableContextMenuItems:function(e){if(e==undefined){$(this).find("LI.disabled").removeClass("disabled");return $(this)}$(this).each(function(){if(e!=undefined)for(var d=e.split(","),g=
0;g<d.length;g++)$(this).find('A[href="'+d[g]+'"]').parent().removeClass("disabled")});return $(this)},disableContextMenu:function(){$(this).each(function(){$(this).addClass("disabled")});return $(this)},enableContextMenu:function(){$(this).each(function(){$(this).removeClass("disabled")});return $(this)},destroyContextMenu:function(){$(this).each(function(){$(this).unbind("mousedown").unbind("mouseup")});return $(this)}})}(jQuery);var svgedit=svgedit||{};
(function(){if(!svgedit.browser)svgedit.browser={};var a=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect;svgedit.browser.supportsSvg=function(){return a};if(svgedit.browser.supportsSvg()){var h=navigator.userAgent,e=document.createElementNS("http://www.w3.org/2000/svg","svg"),d=!!window.opera,g=h.indexOf("AppleWebKit")>=0,l=h.indexOf("Gecko/")>=0,f=h.indexOf("MSIE")>=0,b=h.indexOf("Chrome/")>=0,c=h.indexOf("Windows")>=0,k=h.indexOf("Macintosh")>=
0,m="ontouchstart"in window,s=!!e.querySelector,n=!!document.evaluate,B=function(){var ga=document.createElementNS("http://www.w3.org/2000/svg","path");ga.setAttribute("d","M0,0 10,10");var T=ga.pathSegList;ga=ga.createSVGPathSegLinetoAbs(5,5);try{T.replaceItem(ga,0);return true}catch(U){}return false}(),D=function(){var ga=document.createElementNS("http://www.w3.org/2000/svg","path");ga.setAttribute("d","M0,0 10,10");var T=ga.pathSegList;ga=ga.createSVGPathSegLinetoAbs(5,5);try{T.insertItemBefore(ga,
0);return true}catch(U){}return false}(),E=function(){var ga=document.createElementNS("http://www.w3.org/2000/svg","svg"),T=document.createElementNS("http://www.w3.org/2000/svg","svg");document.documentElement.appendChild(ga);T.setAttribute("x",5);ga.appendChild(T);var U=document.createElementNS("http://www.w3.org/2000/svg","text");U.textContent="a";T.appendChild(U);T=U.getStartPositionOfChar(0);T=T.x;document.documentElement.removeChild(ga);return T===0}(),I=function(){var ga=document.createElementNS("http://www.w3.org/2000/svg",
"svg");document.documentElement.appendChild(ga);var T=document.createElementNS("http://www.w3.org/2000/svg","path");T.setAttribute("d","M0,0 C0,0 10,10 10,0");ga.appendChild(T);T=T.getBBox();document.documentElement.removeChild(ga);return T.height>4&&T.height<5}(),Q=function(){var ga=document.createElementNS("http://www.w3.org/2000/svg","svg");document.documentElement.appendChild(ga);var T=document.createElementNS("http://www.w3.org/2000/svg","path");T.setAttribute("d","M0,0 10,0");var U=document.createElementNS("http://www.w3.org/2000/svg",
"path");U.setAttribute("d","M5,0 15,0");var ba=document.createElementNS("http://www.w3.org/2000/svg","g");ba.appendChild(T);ba.appendChild(U);ga.appendChild(ba);T=ba.getBBox();document.documentElement.removeChild(ga);return T.width==15}(),O=function(){var ga=document.createElementNS("http://www.w3.org/2000/svg","rect");ga.setAttribute("x",0.1);(ga=ga.cloneNode(false).getAttribute("x").indexOf(",")==-1)||$.alert("NOTE: This version of Opera is known to contain bugs in SVG-edit.\n\t\tPlease upgrade to the <a href='http://opera.com'>latest version</a> in which the problems have been fixed.");
return ga}(),N=function(){var ga=document.createElementNS("http://www.w3.org/2000/svg","rect");ga.setAttribute("style","vector-effect:non-scaling-stroke");return ga.style.vectorEffect==="non-scaling-stroke"}(),aa=function(){var ga=document.createElementNS("http://www.w3.org/2000/svg","rect").transform.baseVal,T=e.createSVGTransform();ga.appendItem(T);return ga.getItem(0)==T}();svgedit.browser.isOpera=function(){return d};svgedit.browser.isWebkit=function(){return g};svgedit.browser.isGecko=function(){return l};
svgedit.browser.isIE=function(){return f};svgedit.browser.isChrome=function(){return b};svgedit.browser.isWindows=function(){return c};svgedit.browser.isMac=function(){return k};svgedit.browser.isTouch=function(){return m};svgedit.browser.supportsSelectors=function(){return s};svgedit.browser.supportsXpath=function(){return n};svgedit.browser.supportsPathReplaceItem=function(){return B};svgedit.browser.supportsPathInsertItemBefore=function(){return D};svgedit.browser.supportsPathBBox=function(){return I};
svgedit.browser.supportsHVLineContainerBBox=function(){return Q};svgedit.browser.supportsGoodTextCharPos=function(){return E};svgedit.browser.supportsEditableText=function(){return d};svgedit.browser.supportsGoodDecimals=function(){return O};svgedit.browser.supportsNonScalingStroke=function(){return N};svgedit.browser.supportsNativeTransformLists=function(){return aa}}else window.location="browser-not-supported.html"})();svgedit=svgedit||{};
(function(){if(!svgedit.transformlist)svgedit.transformlist={};var a=document.createElementNS("http://www.w3.org/2000/svg","svg"),h={};svgedit.transformlist.SVGTransformList=function(e){this._elem=e||null;this._xforms=[];this._update=function(){var d="";a.createSVGMatrix();for(var g=0;g<this.numberOfItems;++g){var l=this._list.getItem(g);d=d;l=l;var f=l.matrix,b="";switch(l.type){case 1:b="matrix("+[f.a,f.b,f.c,f.d,f.e,f.f].join(",")+")";break;case 2:b="translate("+f.e+","+f.f+")";break;case 3:b=
f.a==f.d?"scale("+f.a+")":"scale("+f.a+","+f.d+")";break;case 4:var c=0;b=0;if(l.angle!=0){c=1-f.a;b=(c*f.f+f.b*f.e)/(c*c+f.b*f.b);c=(f.e-f.b*b)/c}b="rotate("+l.angle+" "+c+","+b+")"}d=d+(b+" ")}this._elem.setAttribute("transform",d)};this._list=this;this._init=function(){var d=this._elem.getAttribute("transform");if(d)for(var g=/\s*((scale|matrix|rotate|translate)\s*\(.*?\))\s*,?\s*/,l=true;l;){l=d.match(g);d=d.replace(g,"");if(l&&l[1]){var f=l[1].split(/\s*\(/),b=f[0];f=f[1].match(/\s*(.*?)\s*\)/);
f[1]=f[1].replace(/(\d)-/g,"$1 -");var c=f[1].split(/[, ]+/),k="abcdef".split(""),m=a.createSVGMatrix();$.each(c,function(B,D){c[B]=parseFloat(D);if(b=="matrix")m[k[B]]=c[B]});f=a.createSVGTransform();var s="set"+b.charAt(0).toUpperCase()+b.slice(1),n=b=="matrix"?[m]:c;if(b=="scale"&&n.length==1)n.push(n[0]);else if(b=="translate"&&n.length==1)n.push(0);else if(b=="rotate"&&n.length==1){n.push(0);n.push(0)}f[s].apply(f,n);this._list.appendItem(f)}}};this._removeFromOtherLists=function(d){if(d){var g=
false,l;for(l in h){for(var f=h[l],b=0,c=f._xforms.length;b<c;++b)if(f._xforms[b]==d){g=true;f.removeItem(b);break}if(g)break}}};this.numberOfItems=0;this.clear=function(){this.numberOfItems=0;this._xforms=[]};this.initialize=function(d){this.numberOfItems=1;this._removeFromOtherLists(d);this._xforms=[d]};this.getItem=function(d){if(d<this.numberOfItems&&d>=0)return this._xforms[d];throw{code:1};};this.insertItemBefore=function(d,g){var l=null;if(g>=0)if(g<this.numberOfItems){this._removeFromOtherLists(d);
l=Array(this.numberOfItems+1);for(var f=0;f<g;++f)l[f]=this._xforms[f];l[f]=d;for(var b=f+1;f<this.numberOfItems;++b,++f)l[b]=this._xforms[f];this.numberOfItems++;this._xforms=l;l=d;this._list._update()}else l=this._list.appendItem(d);return l};this.replaceItem=function(d,g){var l=null;if(g<this.numberOfItems&&g>=0){this._removeFromOtherLists(d);l=this._xforms[g]=d;this._list._update()}return l};this.removeItem=function(d){if(d<this.numberOfItems&&d>=0){for(var g=this._xforms[d],l=Array(this.numberOfItems-
1),f=0;f<d;++f)l[f]=this._xforms[f];for(d=f;d<this.numberOfItems-1;++d,++f)l[d]=this._xforms[f+1];this.numberOfItems--;this._xforms=l;this._list._update();return g}else throw{code:1};};this.appendItem=function(d){this._removeFromOtherLists(d);this._xforms.push(d);this.numberOfItems++;this._list._update();return d}};svgedit.transformlist.resetListMap=function(){h={}};svgedit.transformlist.removeElementFromListMap=function(e){e.id&&h[e.id]&&delete h[e.id]};svgedit.transformlist.getTransformList=function(e){if(svgedit.browser.supportsNativeTransformLists())if(e.transform)return e.transform.baseVal;
else if(e.gradientTransform)return e.gradientTransform.baseVal;else{if(e.patternTransform)return e.patternTransform.baseVal}else{var d=e.id;d||(d="temp");var g=h[d];if(!g||d=="temp"){h[d]=new svgedit.transformlist.SVGTransformList(e);h[d]._init();g=h[d]}return g}return null}})();svgedit=svgedit||{};
(function(){if(!svgedit.math)svgedit.math={};var a=document.createElementNS("http://www.w3.org/2000/svg","svg");svgedit.math.transformPoint=function(h,e,d){return{x:d.a*h+d.c*e+d.e,y:d.b*h+d.d*e+d.f}};svgedit.math.isIdentity=function(h){return h.a===1&&h.b===0&&h.c===0&&h.d===1&&h.e===0&&h.f===0};svgedit.math.matrixMultiply=function(){for(var h=arguments,e=h.length,d=h[e-1];e-- >1;)d=h[e-1].multiply(d);if(Math.abs(d.a)<1.0E-14)d.a=0;if(Math.abs(d.b)<1.0E-14)d.b=0;if(Math.abs(d.c)<1.0E-14)d.c=0;if(Math.abs(d.d)<
1.0E-14)d.d=0;if(Math.abs(d.e)<1.0E-14)d.e=0;if(Math.abs(d.f)<1.0E-14)d.f=0;return d};svgedit.math.hasMatrixTransform=function(h){if(!h)return false;for(var e=h.numberOfItems;e--;){var d=h.getItem(e);if(d.type==1&&!svgedit.math.isIdentity(d.matrix))return true}return false};svgedit.math.transformBox=function(h,e,d,g,l){var f={x:h,y:e},b={x:h+d,y:e};d={x:h+d,y:e+g};h={x:h,y:e+g};e=svgedit.math.transformPoint;f=e(f.x,f.y,l);var c=g=f.x,k=f.y,m=f.y;b=e(b.x,b.y,l);g=Math.min(g,b.x);c=Math.max(c,b.x);
k=Math.min(k,b.y);m=Math.max(m,b.y);h=e(h.x,h.y,l);g=Math.min(g,h.x);c=Math.max(c,h.x);k=Math.min(k,h.y);m=Math.max(m,h.y);d=e(d.x,d.y,l);g=Math.min(g,d.x);c=Math.max(c,d.x);k=Math.min(k,d.y);m=Math.max(m,d.y);return{tl:f,tr:b,bl:h,br:d,aabox:{x:g,y:k,width:c-g,height:m-k}}};svgedit.math.transformListToTransform=function(h,e,d){if(h==null)return a.createSVGTransformFromMatrix(a.createSVGMatrix());e=e==undefined?0:e;d=d==undefined?h.numberOfItems-1:d;e=parseInt(e);d=parseInt(d);if(e>d){var g=d;d=e;
e=g}g=a.createSVGMatrix();for(e=e;e<=d;++e){var l=e>=0&&e<h.numberOfItems?h.getItem(e).matrix:a.createSVGMatrix();g=svgedit.math.matrixMultiply(g,l)}return a.createSVGTransformFromMatrix(g)};svgedit.math.getMatrix=function(h){h=svgedit.transformlist.getTransformList(h);return svgedit.math.transformListToTransform(h).matrix};svgedit.math.snapToAngle=function(h,e,d,g){var l=Math.PI/4;d=d-h;var f=g-e;g=Math.sqrt(d*d+f*f);l=Math.round(Math.atan2(f,d)/l)*l;return{x:h+g*Math.cos(l),y:e+g*Math.sin(l),a:l}};
svgedit.math.rectsIntersect=function(h,e){if(!h||!e)return false;return e.x<h.x+h.width&&e.x+e.width>h.x&&e.y<h.y+h.height&&e.y+e.height>h.y}})();svgedit=svgedit||{};
(function(){if(!svgedit.units)svgedit.units={};var a=["x","x1","cx","rx","width"],h=["y","y1","cy","ry","height"],e=$.merge(["r","radius"],a);$.merge(e,h);var d,g={px:1};svgedit.units.init=function(f){d=f;f=document.createElementNS("http://www.w3.org/2000/svg","svg");document.body.appendChild(f);var b=document.createElementNS("http://www.w3.org/2000/svg","rect");b.setAttribute("width","1em");b.setAttribute("height","1ex");b.setAttribute("x","1in");f.appendChild(b);b=b.getBBox();document.body.removeChild(f);
f=b.x;g.em=b.width;g.ex=b.height;g["in"]=f;g.cm=f/2.54;g.mm=f/25.4;g.pt=f/72;g.pc=f/6;g["%"]=0};svgedit.units.getTypeMap=function(){return g};svgedit.units.shortFloat=function(f){var b=d.getRoundDigits();if(isNaN(f)){if($.isArray(f))return svgedit.units.shortFloat(f[0])+","+svgedit.units.shortFloat(f[1])}else return+(+f).toFixed(b);return parseFloat(f).toFixed(b)-0};svgedit.units.convertUnit=function(f,b){b=b||d.getBaseUnit();return svgedit.unit.shortFloat(f/g[b])};svgedit.units.setUnitAttr=function(f,
b,c){isNaN(c)||f.getAttribute(b);f.setAttribute(b,c)};var l={line:["x1","x2","y1","y2"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],foreignObject:["x","y","width","height"],rect:["x","y","width","height"],image:["x","y","width","height"],use:["x","y","width","height"],text:["x","y"]};svgedit.units.convertAttrs=function(f){var b=f.tagName,c=d.getBaseUnit();if(b=l[b])for(var k=b.length,m=0;m<k;m++){var s=b[m],n=f.getAttribute(s);if(n)isNaN(n)||f.setAttribute(s,n/g[c]+c)}};svgedit.units.convertToNum=
function(f,b){if(!isNaN(b))return b-0;if(b.substr(-1)==="%"){var c=b.substr(0,b.length-1)/100,k=d.getWidth(),m=d.getHeight();return a.indexOf(f)>=0?c*k:h.indexOf(f)>=0?c*m:c*Math.sqrt(k*k+m*m)/Math.sqrt(2)}else{k=b.substr(-2);c=b.substr(0,b.length-2);return c*g[k]}};svgedit.units.isValidUnit=function(f,b,c){var k=false;if(e.indexOf(f)>=0)if(isNaN(b)){b=b.toLowerCase();$.each(g,function(n){if(!k)if(RegExp("^-?[\\d\\.]+"+n+"$").test(b))k=true})}else k=true;else if(f=="id"){f=false;try{var m=d.getElement(b);
f=m==null||m===c}catch(s){}return f}else k=true;return k}})();svgedit=svgedit||{};
(function(){function a(f){if(svgedit.browser.supportsHVLineContainerBBox())try{return f.getBBox()}catch(b){}var c=$.data(f,"ref"),k=null;if(c){var m=$(c).children().clone().attr("visibility","hidden");$(l).append(m);k=m.filter("line, path")}else k=$(f).find("line, path");var s=false;if(k.length){k.each(function(){var n=this.getBBox();if(!n.width||!n.height)s=true});if(s){f=c?m:$(f).children();ret=getStrokedBBox(f)}else ret=f.getBBox()}else ret=f.getBBox();c&&m.remove();return ret}if(!svgedit.utilities)svgedit.utilities=
{};var h="a,circle,ellipse,foreignObject,g,image,line,path,polygon,polyline,rect,svg,text,tspan,use".split(","),e=null,d=null,g=null,l=null;svgedit.utilities.init=function(f){e=f;d=f.getDOMDocument();g=f.getDOMContainer();l=f.getSVGRoot()};svgedit.utilities.toXml=function(f){return $("<p/>").text(f).html()};svgedit.utilities.fromXml=function(f){return $("<p/>").html(f).text()};svgedit.utilities.encode64=function(f){f=svgedit.utilities.convertToXMLReferences(f);if(window.btoa)return window.btoa(f);
var b=Array(Math.floor((f.length+2)/3)*4),c,k,m,s,n,B,D=0,E=0;do{c=f.charCodeAt(D++);k=f.charCodeAt(D++);m=f.charCodeAt(D++);s=c>>2;c=(c&3)<<4|k>>4;n=(k&15)<<2|m>>6;B=m&63;if(isNaN(k))n=B=64;else if(isNaN(m))B=64;b[E++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(s);b[E++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c);b[E++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n);b[E++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(B)}while(D<
f.length);return b.join("")};svgedit.utilities.decode64=function(f){if(window.atob)return window.atob(f);var b="",c,k,m="",s,n="",B=0;f=f.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(f.charAt(B++));k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(f.charAt(B++));s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(f.charAt(B++));n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(f.charAt(B++));
c=c<<2|k>>4;k=(k&15)<<4|s>>2;m=(s&3)<<6|n;b+=String.fromCharCode(c);if(s!=64)b+=String.fromCharCode(k);if(n!=64)b+=String.fromCharCode(m)}while(B<f.length);return unescape(b)};svgedit.utilities.convertToXMLReferences=function(f){for(var b="",c=0;c<f.length;c++){var k=f.charCodeAt(c);if(k<128)b+=f[c];else if(k>127)b+="&#"+k+";"}return b};svgedit.utilities.text2xml=function(f){if(f.indexOf("<svg:svg")>=0)f=f.replace(/<(\/?)svg:/g,"<$1").replace("xmlns:svg","xmlns");var b;try{var c=window.DOMParser?
new DOMParser:new ActiveXObject("Microsoft.XMLDOM");c.async=false}catch(k){throw Error("XML Parser could not be instantiated");}try{b=c.loadXML?c.loadXML(f)?c:false:c.parseFromString(f,"text/xml")}catch(m){throw Error("Error parsing XML string");}return b};svgedit.utilities.bboxToObj=function(f){return{x:f.x,y:f.y,width:f.width,height:f.height}};svgedit.utilities.walkTree=function(f,b){if(f&&f.nodeType==1){b(f);for(var c=f.childNodes.length;c--;)svgedit.utilities.walkTree(f.childNodes.item(c),b)}};
svgedit.utilities.walkTreePost=function(f,b){if(f&&f.nodeType==1){for(var c=f.childNodes.length;c--;)svgedit.utilities.walkTree(f.childNodes.item(c),b);b(f)}};svgedit.utilities.getUrlFromAttr=function(f){if(f)if(f.indexOf('url("')===0)return f.substring(5,f.indexOf('"',6));else if(f.indexOf("url('")===0)return f.substring(5,f.indexOf("'",6));else if(f.indexOf("url(")===0)return f.substring(4,f.indexOf(")"));return null};svgedit.utilities.getHref=function(f){if(f)return f.getAttributeNS("http://www.w3.org/1999/xlink",
"href")};svgedit.utilities.setHref=function(f,b){f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b)};svgedit.utilities.findDefs=function(f){f=e.getSVGContent().documentElement;var b=f.getElementsByTagNameNS("http://www.w3.org/2000/svg","defs");return b=b.length>0?b[0]:f.insertBefore(f.ownerDocument.createElementNS("http://www.w3.org/2000/svg","defs"),f.firstChild.nextSibling)};svgedit.utilities.getPathBBox=function(f){var b=f.pathSegList,c=b.numberOfItems;f=[[],[]];var k=b.getItem(0),
m=[k.x,k.y];for(k=0;k<c;k++){var s=b.getItem(k);if(typeof s.x!="undefined"){f[0].push(m[0]);f[1].push(m[1]);if(s.x1){for(var n=[s.x1,s.y1],B=[s.x2,s.y2],D=[s.x,s.y],E=0;E<2;E++){s=function(aa){return Math.pow(1-aa,3)*m[E]+3*Math.pow(1-aa,2)*aa*n[E]+3*(1-aa)*Math.pow(aa,2)*B[E]+Math.pow(aa,3)*D[E]};var I=6*m[E]-12*n[E]+6*B[E],Q=-3*m[E]+9*n[E]-9*B[E]+3*D[E],O=3*n[E]-3*m[E];if(Q==0){if(I!=0){I=-O/I;0<I&&I<1&&f[E].push(s(I))}}else{O=Math.pow(I,2)-4*O*Q;if(!(O<0)){var N=(-I+Math.sqrt(O))/(2*Q);0<N&&N<
1&&f[E].push(s(N));I=(-I-Math.sqrt(O))/(2*Q);0<I&&I<1&&f[E].push(s(I))}}}m=D}else{f[0].push(s.x);f[1].push(s.y)}}}b=Math.min.apply(null,f[0]);c=Math.max.apply(null,f[0])-b;k=Math.min.apply(null,f[1]);f=Math.max.apply(null,f[1])-k;return{x:b,y:k,width:c,height:f}};svgedit.utilities.getBBox=function(f){var b=f||e.getSelectedElements()[0];if(f.nodeType!=1)return null;f=null;var c=b.nodeName;switch(c){case "text":if(b.textContent===""){b.textContent="a";f=b.getBBox();b.textContent=""}else try{f=b.getBBox()}catch(k){}break;
case "path":if(svgedit.browser.supportsPathBBox())try{f=b.getBBox()}catch(m){}else f=svgedit.utilities.getPathBBox(b);break;case "g":case "a":f=a(b);break;default:if(c==="use")f=a(b,true);if(c==="use")f||(f=b.getBBox());else if(~h.indexOf(c))try{f=b.getBBox()}catch(s){b=$(b).closest("foreignObject");if(b.length)try{f=b[0].getBBox()}catch(n){f=null}else f=null}}if(f)f=svgedit.utilities.bboxToObj(f);return f};svgedit.utilities.getRotationAngle=function(f,b){var c=f||e.getSelectedElements()[0];c=svgedit.transformlist.getTransformList(c);
if(!c)return 0;for(var k=c.numberOfItems,m=0;m<k;++m){var s=c.getItem(m);if(s.type==4)return b?s.angle*Math.PI/180:s.angle}return 0};svgedit.utilities.getElem=svgedit.browser.supportsSelectors()?function(f){return l.querySelector("#"+f)}:svgedit.browser.supportsXpath()?function(f){return d.evaluate('svg:svg[@id="svgroot"]//svg:*[@id="'+f+'"]',g,function(){return"http://www.w3.org/2000/svg"},9,null).singleNodeValue}:function(f){return $(l).find("[id="+f+"]")[0]};svgedit.utilities.assignAttributes=
function(f,b,c,k){c||(c=0);svgedit.browser.isOpera()||l.suspendRedraw(c);for(var m in b)if(c=m.substr(0,4)==="xml:"?"http://www.w3.org/XML/1998/namespace":m.substr(0,6)==="xlink:"?"http://www.w3.org/1999/xlink":null)f.setAttributeNS(c,m,b[m]);else k?svgedit.units.setUnitAttr(f,m,b[m]):f.setAttribute(m,b[m]);svgedit.browser.isOpera()||l.unsuspendRedraw(null)};svgedit.utilities.cleanupElement=function(f){var b=l.suspendRedraw(60),c={"fill-opacity":1,"stop-opacity":1,opacity:1,stroke:"none","stroke-dasharray":"none",
"stroke-linejoin":"miter","stroke-linecap":"butt","stroke-opacity":1,"stroke-width":1,rx:0,ry:0},k;for(k in c){var m=c[k];f.getAttribute(k)==m&&f.removeAttribute(k)}l.unsuspendRedraw(b)}})();svgedit=svgedit||{};
(function(){if(!svgedit.sanitize)svgedit.sanitize={};var a={};a["http://www.w3.org/1999/xlink"]="xlink";a["http://www.w3.org/XML/1998/namespace"]="xml";a["http://www.w3.org/2000/xmlns/"]="xmlns";a["http://svg-edit.googlecode.com"]="se";a["http://www.w3.org/1999/xhtml"]="xhtml";a["http://www.w3.org/1998/Math/MathML"]="mathml";var h={};$.each(a,function(g,l){h[l]=g});var e={a:["class","clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","id","mask","opacity","stroke","stroke-dasharray",
"stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform","xlink:href","xlink:title"],circle:["class","clip-path","clip-rule","cx","cy","fill","fill-opacity","fill-rule","filter","id","mask","opacity","r","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform"],clipPath:["class",
"clipPathUnits","id"],defs:[],style:["type"],desc:[],ellipse:["class","clip-path","clip-rule","cx","cy","fill","fill-opacity","fill-rule","filter","id","mask","opacity","requiredFeatures","rx","ry","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform"],feGaussianBlur:["class","color-interpolation-filters","id","requiredFeatures","stdDeviation"],filter:["class","color-interpolation-filters",
"filterRes","filterUnits","height","id","primitiveUnits","requiredFeatures","width","x","xlink:href","y"],foreignObject:["class","font-size","height","id","opacity","requiredFeatures","style","transform","width","x","y"],g:["class","clip-path","clip-rule","id","display","fill","fill-opacity","fill-rule","filter","mask","opacity","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage",
"transform","font-family","font-size","font-style","font-weight","text-anchor","data-locked"],image:["class","clip-path","clip-rule","filter","height","id","mask","opacity","requiredFeatures","style","systemLanguage","transform","width","x","xlink:href","xlink:title","y"],line:["shape-rendering","class","clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","id","marker-end","marker-mid","marker-start","mask","opacity","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset",
"stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform","x1","x2","y1","y2"],linearGradient:["class","id","gradientTransform","gradientUnits","requiredFeatures","spreadMethod","systemLanguage","x1","x2","xlink:href","y1","y2"],marker:["id","class","markerHeight","markerUnits","markerWidth","orient","preserveAspectRatio","refX","refY","systemLanguage","viewBox"],mask:["class","height","id","maskContentUnits","maskUnits","width","x",
"y"],metadata:["class","id"],path:["class","clip-path","clip-rule","d","fill","fill-opacity","fill-rule","filter","id","marker-end","marker-mid","marker-start","mask","opacity","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform"],pattern:["class","height","id","patternContentUnits","patternTransform","patternUnits","requiredFeatures","style","systemLanguage","viewBox",
"width","x","xlink:href","y"],polygon:["class","clip-path","clip-rule","id","fill","fill-opacity","fill-rule","filter","id","class","marker-end","marker-mid","marker-start","mask","opacity","points","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform"],polyline:["class","clip-path","clip-rule","id","fill","fill-opacity","fill-rule","filter","marker-end","marker-mid",
"marker-start","mask","opacity","points","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform"],radialGradient:["class","cx","cy","fx","fy","gradientTransform","gradientUnits","id","r","requiredFeatures","spreadMethod","systemLanguage","xlink:href"],rect:["shape-rendering","class","clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","height","id","mask",
"opacity","requiredFeatures","rx","ry","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform","width","x","y"],stop:["class","id","offset","requiredFeatures","stop-color","stop-opacity","style","systemLanguage"],svg:["class","clip-path","clip-rule","filter","id","height","mask","preserveAspectRatio","requiredFeatures","style","systemLanguage","viewBox","width","x","xmlns","xmlns:se",
"xmlns:xlink","y"],"switch":["class","id","requiredFeatures","systemLanguage"],symbol:["class","fill","fill-opacity","fill-rule","filter","font-family","font-size","font-style","font-weight","id","opacity","preserveAspectRatio","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform","viewBox"],text:["class","clip-path","clip-rule","fill","fill-opacity","fill-rule",
"filter","font-family","font-size","font-style","font-weight","id","mask","opacity","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","text-anchor","transform","x","xml:space","y"],textPath:["class","id","method","requiredFeatures","spacing","startOffset","style","systemLanguage","transform","xlink:href"],title:[],tspan:["class","clip-path","clip-rule","dx","dy","fill",
"fill-opacity","fill-rule","filter","font-family","font-size","font-style","font-weight","id","mask","opacity","requiredFeatures","rotate","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","text-anchor","textLength","transform","x","xml:space","y"],use:["class","clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","height","id","mask","stroke","stroke-dasharray","stroke-dashoffset",
"stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","transform","width","x","xlink:href","y"],annotation:["encoding"],"annotation-xml":["encoding"],maction:["actiontype","other","selection"],math:["class","id","display","xmlns"],menclose:["notation"],merror:[],mfrac:["linethickness"],mi:["mathvariant"],mmultiscripts:[],mn:[],mo:["fence","lspace","maxsize","minsize","rspace","stretchy"],mover:[],mpadded:["lspace","width","height","depth","voffset"],mphantom:[],
mprescripts:[],mroot:[],mrow:["xlink:href","xlink:type","xmlns:xlink"],mspace:["depth","height","width"],msqrt:[],mstyle:["displaystyle","mathbackground","mathcolor","mathvariant","scriptlevel"],msub:[],msubsup:[],msup:[],mtable:["align","columnalign","columnlines","columnspacing","displaystyle","equalcolumns","equalrows","frame","rowalign","rowlines","rowspacing","width"],mtd:["columnalign","columnspan","rowalign","rowspan"],mtext:[],mtr:["columnalign","rowalign"],munder:[],munderover:[],none:[],
semantics:[]},d={};$.each(e,function(g,l){var f={};$.each(l,function(b,c){if(c.indexOf(":")>=0){var k=c.split(":");f[k[1]]=h[k[0]]}else f[c]=c=="xmlns"?"http://www.w3.org/2000/xmlns/":null});d[g]=f});svgedit.sanitize.getNSMap=function(){return a};svgedit.sanitize.sanitizeSvg=function(g){if(g.nodeType==3){g.nodeValue=g.nodeValue.replace(/^\s+|\s+$/g,"");g.nodeValue.length||g.parentNode.removeChild(g)}if(g.nodeType==1){var l=g.parentNode;if(g.ownerDocument&&l){var f=e[g.nodeName],b=d[g.nodeName];if(f!=
undefined){for(var c=[],k=g.attributes.length;k--;){var m=g.attributes.item(k),s=m.nodeName,n=m.localName,B=m.namespaceURI;if(!(b.hasOwnProperty(n)&&B==b[n]&&B!="http://www.w3.org/2000/xmlns/")&&!(B=="http://www.w3.org/2000/xmlns/"&&a[m.nodeValue])){s.indexOf("se:")==0&&c.push([s,m.nodeValue]);g.removeAttributeNS(B,n)}if(svgedit.browser.isGecko())switch(s){case "transform":case "gradientTransform":case "patternTransform":n=m.nodeValue.replace(/(\d)-/g,"$1 -");g.setAttribute(s,n)}if(s=="style"){m=
m.nodeValue.split(";");for(s=m.length;s--;){n=m[s].split(":");f.indexOf(n[0])>=0&&g.setAttribute(n[0],n[1])}g.removeAttribute("style")}}$.each(c,function(D,E){g.setAttributeNS("http://svg-edit.googlecode.com",E[0],E[1])});if((k=svgedit.utilities.getHref(g))&&["filter","linearGradient","pattern","radialGradient","textPath","use"].indexOf(g.nodeName)>=0)if(k[0]!="#"){svgedit.utilities.setHref(g,"");g.removeAttributeNS("http://www.w3.org/1999/xlink","href")}if(g.nodeName=="use"&&!svgedit.utilities.getHref(g))l.removeChild(g);
else{$.each(["clip-path","fill","filter","marker-end","marker-mid","marker-start","mask","stroke"],function(D,E){var I=g.getAttribute(E);if(I)if((I=svgedit.utilities.getUrlFromAttr(I))&&I[0]!=="#"){g.setAttribute(E,"");g.removeAttribute(E)}});for(k=g.childNodes.length;k--;)svgedit.sanitize.sanitizeSvg(g.childNodes.item(k))}}else{for(f=[];g.hasChildNodes();)f.push(l.insertBefore(g.firstChild,g));l.removeChild(g);for(k=f.length;k--;)svgedit.sanitize.sanitizeSvg(f[k])}}}}})();svgedit=svgedit||{};
(function(){if(!svgedit.history)svgedit.history={};svgedit.history.HistoryEventTypes={BEFORE_APPLY:"before_apply",AFTER_APPLY:"after_apply",BEFORE_UNAPPLY:"before_unapply",AFTER_UNAPPLY:"after_unapply"};svgedit.history.MoveElementCommand=function(a,h,e,d){this.elem=a;this.text=d?"Move "+a.tagName+" to "+d:"Move "+a.tagName;this.oldNextSibling=h;this.oldParent=e;this.newNextSibling=a.nextSibling;this.newParent=a.parentNode};svgedit.history.MoveElementCommand.type=function(){return"svgedit.history.MoveElementCommand"};svgedit.history.MoveElementCommand.prototype.type=
svgedit.history.MoveElementCommand.type;svgedit.history.MoveElementCommand.prototype.getText=function(){return this.text};svgedit.history.MoveElementCommand.prototype.apply=function(a){a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_APPLY,this);this.elem=this.newParent.insertBefore(this.elem,this.newNextSibling);a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_APPLY,this)};svgedit.history.MoveElementCommand.prototype.unapply=function(a){a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_UNAPPLY,
this);this.elem=this.oldParent.insertBefore(this.elem,this.oldNextSibling);a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_UNAPPLY,this)};svgedit.history.MoveElementCommand.prototype.elements=function(){return[this.elem]};svgedit.history.InsertElementCommand=function(a,h){this.elem=a;this.text=h||"Create "+a.tagName;this.parent=a.parentNode;this.nextSibling=this.elem.nextSibling};svgedit.history.InsertElementCommand.type=function(){return"svgedit.history.InsertElementCommand"};svgedit.history.InsertElementCommand.prototype.type=
svgedit.history.InsertElementCommand.type;svgedit.history.InsertElementCommand.prototype.getText=function(){return this.text};svgedit.history.InsertElementCommand.prototype.apply=function(a){a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_APPLY,this);this.elem=this.parent.insertBefore(this.elem,this.nextSibling);a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_APPLY,this)};svgedit.history.InsertElementCommand.prototype.unapply=function(a){a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_UNAPPLY,
this);this.parent=this.elem.parentNode;this.elem=this.elem.parentNode.removeChild(this.elem);a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_UNAPPLY,this)};svgedit.history.InsertElementCommand.prototype.elements=function(){return[this.elem]};svgedit.history.RemoveElementCommand=function(a,h,e,d){this.elem=a;this.text=d||"Delete "+a.tagName;this.nextSibling=h;this.parent=e;svgedit.transformlist.removeElementFromListMap(a)};svgedit.history.RemoveElementCommand.type=function(){return"svgedit.history.RemoveElementCommand"};
svgedit.history.RemoveElementCommand.prototype.type=svgedit.history.RemoveElementCommand.type;svgedit.history.RemoveElementCommand.prototype.getText=function(){return this.text};svgedit.history.RemoveElementCommand.prototype.apply=function(a){a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_APPLY,this);svgedit.transformlist.removeElementFromListMap(this.elem);this.parent=this.elem.parentNode;this.elem=this.parent.removeChild(this.elem);a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_APPLY,
this)};svgedit.history.RemoveElementCommand.prototype.unapply=function(a){a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_UNAPPLY,this);svgedit.transformlist.removeElementFromListMap(this.elem);this.nextSibling==null&&window.console&&console.log("Error: reference element was lost");this.parent.insertBefore(this.elem,this.nextSibling);a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_UNAPPLY,this)};svgedit.history.RemoveElementCommand.prototype.elements=function(){return[this.elem]};
svgedit.history.ChangeElementCommand=function(a,h,e){this.elem=a;this.text=e?"Change "+a.tagName+" "+e:"Change "+a.tagName;this.newValues={};this.oldValues=h;for(var d in h)this.newValues[d]=d=="#text"?a.textContent:d=="#href"?svgedit.utilities.getHref(a):a.getAttribute(d)};svgedit.history.ChangeElementCommand.type=function(){return"svgedit.history.ChangeElementCommand"};svgedit.history.ChangeElementCommand.prototype.type=svgedit.history.ChangeElementCommand.type;svgedit.history.ChangeElementCommand.prototype.getText=
function(){return this.text};svgedit.history.ChangeElementCommand.prototype.apply=function(a){a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_APPLY,this);var h=false,e;for(e in this.newValues){if(this.newValues[e])if(e=="#text")this.elem.textContent=this.newValues[e];else e=="#href"?svgedit.utilities.setHref(this.elem,this.newValues[e]):this.elem.setAttribute(e,this.newValues[e]);else if(e=="#text")this.elem.textContent="";else{this.elem.setAttribute(e,"");this.elem.removeAttribute(e)}if(e==
"transform")h=true}if(!h)if(h=svgedit.utilities.getRotationAngle(this.elem)){e=elem.getBBox();h=["rotate(",h," ",e.x+e.width/2,",",e.y+e.height/2,")"].join("");h!=elem.getAttribute("transform")&&elem.setAttribute("transform",h)}a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_APPLY,this);return true};svgedit.history.ChangeElementCommand.prototype.unapply=function(a){a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_UNAPPLY,this);var h=false,e;for(e in this.oldValues){if(this.oldValues[e])if(e==
"#text")this.elem.textContent=this.oldValues[e];else e=="#href"?svgedit.utilities.setHref(this.elem,this.oldValues[e]):this.elem.setAttribute(e,this.oldValues[e]);else if(e=="#text")this.elem.textContent="";else this.elem.removeAttribute(e);if(e=="transform")h=true}if(!h)if(h=svgedit.utilities.getRotationAngle(this.elem)){e=this.elem.getBBox();h=["rotate(",h," ",e.x+e.width/2,",",e.y+e.height/2,")"].join("");h!=this.elem.getAttribute("transform")&&this.elem.setAttribute("transform",h)}svgedit.transformlist.removeElementFromListMap(this.elem);
a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_UNAPPLY,this);return true};svgedit.history.ChangeElementCommand.prototype.elements=function(){return[this.elem]};svgedit.history.BatchCommand=function(a){this.text=a||"Batch Command";this.stack=[]};svgedit.history.BatchCommand.type=function(){return"svgedit.history.BatchCommand"};svgedit.history.BatchCommand.prototype.type=svgedit.history.BatchCommand.type;svgedit.history.BatchCommand.prototype.getText=function(){return this.text};svgedit.history.BatchCommand.prototype.apply=
function(a){a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_APPLY,this);for(var h=this.stack.length,e=0;e<h;++e)this.stack[e].apply(a);a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_APPLY,this)};svgedit.history.BatchCommand.prototype.unapply=function(a){a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_UNAPPLY,this);for(var h=this.stack.length-1;h>=0;h--)this.stack[h].unapply(a);a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_UNAPPLY,
this)};svgedit.history.BatchCommand.prototype.elements=function(){for(var a=[],h=this.stack.length;h--;)for(var e=this.stack[h].elements(),d=e.length;d--;)a.indexOf(e[d])==-1&&a.push(e[d]);return a};svgedit.history.BatchCommand.prototype.addSubCommand=function(a){this.stack.push(a)};svgedit.history.BatchCommand.prototype.isEmpty=function(){return this.stack.length==0};svgedit.history.UndoManager=function(a){this.handler_=a||null;this.undoStackPointer=0;this.undoStack=[];this.undoChangeStackPointer=
-1;this.undoableChangeStack=[]};svgedit.history.UndoManager.prototype.resetUndoStack=function(){this.undoStack=[];this.undoStackPointer=0};svgedit.history.UndoManager.prototype.getUndoStackSize=function(){return this.undoStackPointer};svgedit.history.UndoManager.prototype.getRedoStackSize=function(){return this.undoStack.length-this.undoStackPointer};svgedit.history.UndoManager.prototype.getNextUndoCommandText=function(){return this.undoStackPointer>0?this.undoStack[this.undoStackPointer-1].getText():
""};svgedit.history.UndoManager.prototype.getNextRedoCommandText=function(){return this.undoStackPointer<this.undoStack.length?this.undoStack[this.undoStackPointer].getText():""};svgedit.history.UndoManager.prototype.undo=function(){this.undoStackPointer>0&&this.undoStack[--this.undoStackPointer].unapply(this.handler_)};svgedit.history.UndoManager.prototype.redo=function(){this.undoStackPointer<this.undoStack.length&&this.undoStack.length>0&&this.undoStack[this.undoStackPointer++].apply(this.handler_)};
svgedit.history.UndoManager.prototype.addCommandToHistory=function(a){if(this.undoStackPointer<this.undoStack.length&&this.undoStack.length>0)this.undoStack=this.undoStack.splice(0,this.undoStackPointer);this.undoStack.push(a);this.undoStackPointer=this.undoStack.length};svgedit.history.UndoManager.prototype.beginUndoableChange=function(a,h){for(var e=++this.undoChangeStackPointer,d=h.length,g=Array(d),l=Array(d);d--;){var f=h[d];if(f!=null){l[d]=f;g[d]=f.getAttribute(a)}}this.undoableChangeStack[e]=
{attrName:a,oldValues:g,elements:l}};svgedit.history.UndoManager.prototype.finishUndoableChange=function(){for(var a=this.undoChangeStackPointer--,h=this.undoableChangeStack[a],e=h.elements.length,d=h.attrName,g=new svgedit.history.BatchCommand("Change "+d);e--;){var l=h.elements[e];if(l!=null){var f={};f[d]=h.oldValues[e];f[d]!=l.getAttribute(d)&&g.addSubCommand(new svgedit.history.ChangeElementCommand(l,f,d))}}this.undoableChangeStack[a]=null;return g}})();svgedit=svgedit||{};
(function(){if(!svgedit.select)svgedit.select={};var a,h,e;svgedit.select.Selector=function(d,g){this.id=d;this.selectedElement=g;this.locked=true;this.selectorGroup=a.createSVGElement({element:"g",attr:{id:"selectorGroup"+this.id}});this.selectorRect=this.selectorGroup.appendChild(a.createSVGElement({element:"path",attr:{id:"selectedBox"+this.id,fill:"none",stroke:"#4F80FF","stroke-width":"1","shape-rendering":"crispEdges",style:"pointer-events:none"}}));svgedit.browser.isTouch()&&this.selectorRect.setAttribute("stroke-opacity",
0.3);this.gripCoords={nw:null,n:null,ne:null,e:null,se:null,s:null,sw:null,w:null};this.reset(this.selectedElement)};svgedit.select.Selector.prototype.reset=function(d){this.locked=true;this.selectedElement=d;this.resize();this.selectorGroup.setAttribute("display","inline")};svgedit.select.Selector.prototype.updateGripCursors=function(d){var g=[];d=Math.round(d/45);if(d<0)d+=8;for(var l in e.selectorGrips)g.push(l);for(;d>0;){g.push(g.shift());d--}d=0;for(l in e.selectorGrips){e.selectorGrips[l].setAttribute("style",
"cursor:"+g[d]+"-resize");d++}};svgedit.select.Selector.prototype.showGrips=function(d){e.selectorGripsGroup.setAttribute("display",d?"inline":"none");var g=this.selectedElement;this.hasGrips=d;if(g&&d){this.selectorGroup.appendChild(e.selectorGripsGroup);this.updateGripCursors(svgedit.utilities.getRotationAngle(g))}};svgedit.select.Selector.prototype.resize=function(){var d=this.selectorRect,g=e,l=g.selectorGrips,f=this.selectedElement,b=f.getAttribute("stroke-width"),c=a.currentZoom(),k=1/c;if(f.getAttribute("stroke")!==
"none"&&!isNaN(b))k+=b/2;var m=f.tagName;if(m==="text")k+=2/c;b=svgedit.transformlist.getTransformList(f);b=svgedit.math.transformListToTransform(b).matrix;b.e*=c;b.f*=c;var s=svgedit.utilities.getBBox(f);if(m==="g"&&!$.data(f,"gsvg"))if(m=a.getStrokedBBox(f.childNodes))s=m;m=s.x;var n=s.y,B=s.width;s=s.height;k*=c;c=svgedit.math.transformBox(m*c,n*c,B*c,s*c,b);b=c.aabox;m=b.x-k;n=b.y-k;B=b.width+k*2;var D=b.height+k*2;b=m+B/2;s=n+D/2;if(f=svgedit.utilities.getRotationAngle(f)){m=a.svgRoot().createSVGTransform();
m.setRotate(-f,b,s);m=m.matrix;c.tl=svgedit.math.transformPoint(c.tl.x,c.tl.y,m);c.tr=svgedit.math.transformPoint(c.tr.x,c.tr.y,m);c.bl=svgedit.math.transformPoint(c.bl.x,c.bl.y,m);c.br=svgedit.math.transformPoint(c.br.x,c.br.y,m);m=c.tl;B=m.x;D=m.y;var E=m.x,I=m.y;m=Math.min;n=Math.max;B=m(B,m(c.tr.x,m(c.bl.x,c.br.x)))-k;D=m(D,m(c.tr.y,m(c.bl.y,c.br.y)))-k;E=n(E,n(c.tr.x,n(c.bl.x,c.br.x)))+k;I=n(I,n(c.tr.y,n(c.bl.y,c.br.y)))+k;m=B;n=D;B=E-B;D=I-D}k=a.svgRoot().suspendRedraw(100);d.setAttribute("d",
"M"+m+","+n+" L"+(m+B)+","+n+" "+(m+B)+","+(n+D)+" "+m+","+(n+D)+"z");this.selectorGroup.setAttribute("transform",f?"rotate("+[f,b,s].join(",")+")":"");if(svgedit.browser.isTouch()){m-=15.75;n-=15.75}else{m-=4;n-=4}this.gripCoords={nw:[m,n].map(Math.round),ne:[m+B,n].map(Math.round),sw:[m,n+D].map(Math.round),se:[m+B,n+D].map(Math.round),n:[m+B/2,n].map(Math.round),w:[m,n+D/2].map(Math.round),e:[m+B,n+D/2].map(Math.round),s:[m+B/2,n+D].map(Math.round)};for(var Q in this.gripCoords){d=this.gripCoords[Q];
l[Q].setAttribute("x",d[0]);l[Q].setAttribute("y",d[1])}this.rotateCoords={nw:[m,n],ne:[m+B+8,n],sw:[m,n+D+8],se:[m+B+8,n+D+8]};for(Q in this.rotateCoords){d=this.rotateCoords[Q];g.rotateGrips[Q].setAttribute("cx",d[0]);g.rotateGrips[Q].setAttribute("cy",d[1])}a.svgRoot().unsuspendRedraw(k)};svgedit.select.SelectorManager=function(){this.rubberBandBox=this.selectorParentGroup=null;this.selectors=[];this.selectorMap={};this.selectorGrips={nw:null,n:null,ne:null,e:null,se:null,s:null,sw:null,w:null};
this.selectorGripsGroup=null;this.rotateGrips={nw:null,ne:null,se:null,sw:null};this.initGroup()};svgedit.select.SelectorManager.prototype.initGroup=function(){this.selectorParentGroup&&this.selectorParentGroup.parentNode&&this.selectorParentGroup.parentNode.removeChild(this.selectorParentGroup);this.selectorParentGroup=a.createSVGElement({element:"g",attr:{id:"selectorParentGroup"}});this.selectorGripsGroup=a.createSVGElement({element:"g",attr:{display:"none"}});this.selectorParentGroup.appendChild(this.selectorGripsGroup);
a.svgRoot().appendChild(this.selectorParentGroup);this.selectorMap={};this.selectors=[];this.rubberBandBox=null;for(var d in this.rotateGrips){var g=a.createSVGElement({element:"circle",attr:{id:"selectorGrip_rotate_"+d,fill:"#000",r:8,stroke:"#000","fill-opacity":0,"stroke-opacity":0,"stroke-width":0,style:"cursor:url("+h.imgPath+"rotate.png) 12 12, auto;"}});$.data(g,"dir",d);$.data(g,"type","rotate");this.rotateGrips[d]=this.selectorGripsGroup.appendChild(g)}for(d in this.selectorGrips){g=a.createSVGElement({element:"rect",
attr:{id:"selectorGrip_resize_"+d,width:8,height:8,fill:"#4F80FF",stroke:"rgba(0,0,0,0)","stroke-width":1,style:"cursor:"+d+"-resize","pointer-events":"all"}});if(svgedit.browser.isTouch()){g.setAttribute("width",30.5);g.setAttribute("height",30.5);g.setAttribute("fill-opacity",0.3)}$.data(g,"dir",d);$.data(g,"type","resize");this.selectorGrips[d]=this.selectorGripsGroup.appendChild(g)}if(!$("#canvasBackground").length){d=h.dimensions;d=a.createSVGElement({element:"svg",attr:{id:"canvasBackground",
width:d[0],height:d[1],x:0,y:0,overflow:svgedit.browser.isWebkit()?"none":"visible",style:"pointer-events:none"}});g=a.createSVGElement({element:"defs",attr:{id:"placeholder_defs"}});var l=a.createSVGElement({element:"pattern",attr:{id:"checkerPattern",patternUnits:"userSpaceOnUse",x:0,y:0,width:20,height:20,viewBox:"0 0 10 10"}}),f=a.createSVGElement({element:"rect",attr:{x:0,y:0,width:10,height:10,fill:"#fff"}}),b=a.createSVGElement({element:"rect",attr:{x:0,y:0,width:5,height:5,fill:"#eee"}}),
c=a.createSVGElement({element:"rect",attr:{x:5,y:5,width:5,height:5,fill:"#eee"}}),k=a.createSVGElement({element:"rect",attr:{width:"100%",height:"100%",x:0,y:0,"stroke-width":1,stroke:"#000",fill:"url(#checkerPattern)",style:"pointer-events:none"}});d.appendChild(g);g.appendChild(l);l.appendChild(f);l.appendChild(b);l.appendChild(c);d.appendChild(k);a.svgRoot().insertBefore(d,a.svgContent())}};svgedit.select.SelectorManager.prototype.requestSelector=function(d){if(d==null)return null;var g=this.selectors.length;
if(typeof this.selectorMap[d.id]=="object"){this.selectorMap[d.id].locked=true;return this.selectorMap[d.id]}for(var l=0;l<g;++l)if(this.selectors[l]&&!this.selectors[l].locked){this.selectors[l].locked=true;this.selectors[l].reset(d);this.selectorMap[d.id]=this.selectors[l];return this.selectors[l]}this.selectors[g]=new svgedit.select.Selector(g,d);this.selectorParentGroup.appendChild(this.selectors[g].selectorGroup);this.selectorMap[d.id]=this.selectors[g];return this.selectors[g]};svgedit.select.SelectorManager.prototype.releaseSelector=
function(d){if(d!=null)for(var g=this.selectors.length,l=this.selectorMap[d.id],f=0;f<g;++f)if(this.selectors[f]&&this.selectors[f]==l){l.locked==false&&console.log("WARNING! selector was released but was already unlocked");delete this.selectorMap[d.id];l.locked=false;l.selectedElement=null;l.showGrips(false);try{l.selectorGroup.setAttribute("display","none")}catch(b){}break}};svgedit.select.SelectorManager.prototype.getRubberBandBox=function(){if(!this.rubberBandBox)this.rubberBandBox=this.selectorParentGroup.appendChild(a.createSVGElement({element:"rect",
attr:{id:"selectorRubberBand",fill:"none",stroke:"#666","stroke-width":1,"stroke-dasharray":"3,2",display:"none",style:"pointer-events:none"}}));return this.rubberBandBox};svgedit.select.init=function(d,g){h=d;a=g;e=new svgedit.select.SelectorManager;a.createSVGElement({element:"g",attr:{id:"hover_group"}})};svgedit.select.getSelectorManager=function(){return e}})();svgedit=svgedit||{};
(function(){if(!svgedit.draw)svgedit.draw={};var a="a,circle,ellipse,foreignObject,g,image,line,path,polygon,polyline,rect,svg,text,tspan,use".split(","),h={LET_DOCUMENT_DECIDE:0,ALWAYS_RANDOMIZE:1,NEVER_RANDOMIZE:2},e=h.LET_DOCUMENT_DECIDE;svgedit.draw.Layer=function(d,g){this.name_=d;this.group_=g};svgedit.draw.Layer.prototype.getName=function(){return this.name_};svgedit.draw.Layer.prototype.getGroup=function(){return this.group_};svgedit.draw.randomizeIds=function(d,g){e=d==false?h.NEVER_RANDOMIZE:
h.ALWAYS_RANDOMIZE;if(e==h.ALWAYS_RANDOMIZE&&!g.getNonce())g.setNonce(Math.floor(Math.random()*100001));else e==h.NEVER_RANDOMIZE&&g.getNonce()&&g.clearNonce()};svgedit.draw.Drawing=function(d,g){if(!d||!d.tagName||!d.namespaceURI||d.tagName!="svg"||d.namespaceURI!="http://www.w3.org/2000/svg")throw"Error: svgedit.draw.Drawing instance initialized without a <svg> element";this.svgElem_=d;this.obj_num=0;this.idPrefix=g||"svg_";this.releasedNums=[];this.all_layers=[];this.current_layer=null;this.nonce_=
"";var l=this.svgElem_.getAttributeNS("http://svg-edit.googlecode.com","nonce");if(l&&e!=h.NEVER_RANDOMIZE)this.nonce_=l;else e==h.ALWAYS_RANDOMIZE&&this.setNonce(Math.floor(Math.random()*100001))};svgedit.draw.Drawing.prototype.getElem_=function(d){return this.svgElem_.querySelector?this.svgElem_.querySelector("#"+d):$(this.svgElem_).find("[id="+d+"]")[0]};svgedit.draw.Drawing.prototype.getSvgElem=function(){return this.svgElem_};svgedit.draw.Drawing.prototype.getNonce=function(){return this.nonce_};
svgedit.draw.Drawing.prototype.setNonce=function(d){this.svgElem_.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:se","http://svg-edit.googlecode.com");this.svgElem_.setAttributeNS("http://svg-edit.googlecode.com","se:nonce",d);this.nonce_=d};svgedit.draw.Drawing.prototype.clearNonce=function(){this.nonce_=""};svgedit.draw.Drawing.prototype.getId=function(){return this.nonce_?this.idPrefix+this.nonce_+"_"+this.obj_num:this.idPrefix+this.obj_num};svgedit.draw.Drawing.prototype.getNextId=function(){var d=
this.obj_num,g=false;if(this.releasedNums.length>0){this.obj_num=this.releasedNums.pop();g=true}else this.obj_num++;for(var l=this.getId();this.getElem_(l);){if(g){this.obj_num=d;g=false}this.obj_num++;l=this.getId()}if(g)this.obj_num=d;return l};svgedit.draw.Drawing.prototype.releaseId=function(d){var g=this.idPrefix+(this.nonce_?this.nonce_+"_":"");if(typeof d!="string"||d.indexOf(g)!=0)return false;d=parseInt(d.substr(g.length));if(typeof d!="number"||d<=0||this.releasedNums.indexOf(d)!=-1)return false;
this.releasedNums.push(d);return true};svgedit.draw.Drawing.prototype.getNumLayers=function(){return this.all_layers.length};svgedit.draw.Drawing.prototype.hasLayer=function(d){for(var g=0;g<this.getNumLayers();g++)if(this.all_layers[g][0]==d)return true;return false};svgedit.draw.Drawing.prototype.getLayerName=function(d){if(d>=0&&d<this.getNumLayers())return this.all_layers[d][0];return""};svgedit.draw.Drawing.prototype.getCurrentLayer=function(){return this.current_layer};svgedit.draw.Drawing.prototype.getCurrentLayerName=
function(){for(var d=0;d<this.getNumLayers();++d)if(this.all_layers[d][1]==this.current_layer)return this.getLayerName(d);return""};svgedit.draw.Drawing.prototype.setCurrentLayer=function(d){for(var g=0;g<this.getNumLayers();++g)if(d==this.getLayerName(g)){if(this.current_layer!=this.all_layers[g][1]){this.current_layer.setAttribute("style","pointer-events:none");this.current_layer=this.all_layers[g][1];this.current_layer.setAttribute("style","pointer-events:all")}return true}return false};svgedit.draw.Drawing.prototype.deleteCurrentLayer=
function(){if(this.current_layer&&this.getNumLayers()>1){var d=this.current_layer.parentNode.removeChild(this.current_layer);this.identifyLayers();return d}return null};svgedit.draw.Drawing.prototype.identifyLayers=function(){this.all_layers=[];for(var d=this.svgElem_.childNodes.length,g=[],l=[],f=null,b=false,c=0;c<d;++c){var k=this.svgElem_.childNodes.item(c);if(k&&k.nodeType==1)if(k.tagName=="g"){b=true;var m=$("title",k).text();if(!m&&svgedit.browser.isOpera()&&k.querySelectorAll)m=$(k.querySelectorAll("title")).text();
if(m){l.push(m);this.all_layers.push([m,k]);f=k;svgedit.utilities.walkTree(k,function(s){s.setAttribute("style","pointer-events:inherit")});f.setAttribute("style","pointer-events:none")}else g.push(k)}else if(~a.indexOf(k.nodeName)){svgedit.utilities.getBBox(k);g.push(k)}}d=this.svgElem_.ownerDocument;if(g.length>0||!b){for(c=1;l.indexOf("Layer "+c)>=0;)c++;l="Layer "+c;f=d.createElementNS("http://www.w3.org/2000/svg","g");b=d.createElementNS("http://www.w3.org/2000/svg","title");b.textContent=l;
f.appendChild(b);for(b=0;b<g.length;++b)f.appendChild(g[b]);this.svgElem_.appendChild(f);this.all_layers.push([l,f])}svgedit.utilities.walkTree(f,function(s){s.setAttribute("style","pointer-events:inherit")});this.current_layer=f.getAttribute("data-locked")==="true"?this.all_layers.slice(-2)[0][1]:f;this.current_layer.setAttribute("style","pointer-events:all")};svgedit.draw.Drawing.prototype.createLayer=function(d){var g=this.svgElem_.ownerDocument,l=g.createElementNS("http://www.w3.org/2000/svg",
"g");g=g.createElementNS("http://www.w3.org/2000/svg","title");g.textContent=d;l.appendChild(g);this.svgElem_.appendChild(l);this.identifyLayers();return l};svgedit.draw.Drawing.prototype.getLayerVisibility=function(d){for(var g=null,l=0;l<this.getNumLayers();++l)if(this.getLayerName(l)==d){g=this.all_layers[l][1];break}if(!g)return false;return g.getAttribute("display")!="none"};svgedit.draw.Drawing.prototype.setLayerVisibility=function(d,g){if(typeof g!="boolean")return null;for(var l=null,f=0;f<
this.getNumLayers();++f)if(this.getLayerName(f)==d){l=this.all_layers[f][1];break}if(!l)return null;l.getAttribute("display");l.setAttribute("display",g?"inline":"none");return l};svgedit.draw.Drawing.prototype.getLayerOpacity=function(d){for(var g=0;g<this.getNumLayers();++g)if(this.getLayerName(g)==d){(d=this.all_layers[g][1].getAttribute("opacity"))||(d="1.0");return parseFloat(d)}return null};svgedit.draw.Drawing.prototype.setLayerOpacity=function(d,g){if(!(typeof g!="number"||g<0||g>1))for(var l=
0;l<this.getNumLayers();++l)if(this.getLayerName(l)==d){this.all_layers[l][1].setAttribute("opacity",g);break}}})();svgedit=svgedit||{};
(function(){if(!svgedit.path)svgedit.path={};var a={pathNodeTooltip:"Drag node to move it. Double-click node to change segment type",pathCtrlPtTooltip:"Drag control point to adjust curve properties"},h={2:["x","y"],4:["x","y"],6:["x","y","x1","y1","x2","y2"],8:["x","y","x1","y1"],10:["x","y","r1","r2","angle","largeArcFlag","sweepFlag"],12:["x"],14:["y"],16:["x","y","x2","y2"],18:["x","y"]},e=[],d=false,g={};svgedit.path.setLinkControlPoints=function(b){d=b};var l=svgedit.path.path=null;svgedit.path.init=
function(b){l=b;e=[0,"ClosePath"];$.each(["Moveto","Lineto","CurvetoCubic","CurvetoQuadratic","Arc","LinetoHorizontal","LinetoVertical","CurvetoCubicSmooth","CurvetoQuadraticSmooth"],function(c,k){e.push(k+"Abs");e.push(k+"Rel")})};svgedit.path.insertItemBefore=function(b,c,k){b=b.pathSegList;if(svgedit.browser.supportsPathInsertItemBefore())b.insertItemBefore(c,k);else{for(var m=b.numberOfItems,s=[],n=0;n<m;n++){var B=b.getItem(n);s.push(B)}b.clear();for(n=0;n<m;n++){n==k&&b.appendItem(c);b.appendItem(s[n])}}};
svgedit.path.ptObjToArr=function(b,c){for(var k=h[b],m=k.length,s=Array(m),n=0;n<m;n++)s[n]=c[k[n]];return s};svgedit.path.getGripPt=function(b,c){var k={x:c?c.x:b.item.x,y:c?c.y:b.item.y},m=b.path;if(m.matrix)k=svgedit.math.transformPoint(k.x,k.y,m.matrix);k.x*=l.getCurrentZoom();k.y*=l.getCurrentZoom();return k};svgedit.path.getPointFromGrip=function(b,c){var k={x:b.x,y:b.y};if(c.matrix){b=svgedit.math.transformPoint(k.x,k.y,c.imatrix);k.x=b.x;k.y=b.y}k.x/=l.getCurrentZoom();k.y/=l.getCurrentZoom();
return k};svgedit.path.addPointGrip=function(b,c,k){var m=svgedit.path.getGripContainer(),s=svgedit.utilities.getElem("pathpointgrip_"+b);if(!s){s=document.createElementNS("http://www.w3.org/2000/svg","rect");svgedit.utilities.assignAttributes(s,{id:"pathpointgrip_"+b,display:"none",width:svgedit.browser.isTouch()?30:5,height:svgedit.browser.isTouch()?30:5,fill:"#fff",stroke:"#4F80FF","shape-rendering":"crispEdges","stroke-width":1,cursor:"move",style:"pointer-events:all","xlink:title":a.pathNodeTooltip});
s=m.appendChild(s);$("#pathpointgrip_"+b).dblclick(function(){svgedit.path.path&&svgedit.path.path.setSegType()})}if(c&&k)svgedit.utilities.assignAttributes(s,{x:c-(svgedit.browser.isTouch()?15:2.5),y:k-(svgedit.browser.isTouch()?15:2.5),display:"inline"});return s};svgedit.path.getGripContainer=function(){var b=svgedit.utilities.getElem("pathpointgrip_container");if(!b){b=svgedit.utilities.getElem("selectorParentGroup").appendChild(document.createElementNS("http://www.w3.org/2000/svg","g"));b.id=
"pathpointgrip_container"}return b};svgedit.path.addCtrlGrip=function(b){var c=svgedit.utilities.getElem("ctrlpointgrip_"+b);if(c)return c;c=document.createElementNS("http://www.w3.org/2000/svg","circle");svgedit.utilities.assignAttributes(c,{id:"ctrlpointgrip_"+b,display:"none",r:svgedit.browser.isTouch()?15:3,fill:"#4F80FF",stroke:"#4F80FF","stroke-opacity":0,"stroke-width":"3",cursor:"move",style:"pointer-events:all","xlink:title":a.pathCtrlPtTooltip});svgedit.path.getGripContainer().appendChild(c);
return c};svgedit.path.getCtrlLine=function(b){var c=svgedit.utilities.getElem("ctrlLine_"+b);if(c)return c;c=document.createElementNS("http://www.w3.org/2000/svg","line");svgedit.utilities.assignAttributes(c,{id:"ctrlLine_"+b,stroke:"#4F80FF","stroke-width":1,style:"pointer-events:none"});svgedit.path.getGripContainer().appendChild(c);return c};svgedit.path.getPointGrip=function(b,c){var k=svgedit.path.addPointGrip(b.index);if(c){var m=svgedit.path.getGripPt(b);svgedit.utilities.assignAttributes(k,
{x:m.x-(svgedit.browser.isTouch()?15:2.5),y:m.y-(svgedit.browser.isTouch()?15:2.5),display:"inline"})}return k};svgedit.path.getControlPoints=function(b){var c=b.item,k=b.index;if(!c||!("x1"in c)||!("x2"in c))return null;var m={};svgedit.path.getGripContainer();for(var s=[svgedit.path.path.segs[k-1].item,c],n=1;n<3;n++){var B=k+"c"+n,D=m["c"+n+"_line"]=svgedit.path.getCtrlLine(B),E=svgedit.path.getGripPt(b,{x:c["x"+n],y:c["y"+n]}),I=svgedit.path.getGripPt(b,{x:s[n-1].x,y:s[n-1].y});svgedit.utilities.assignAttributes(D,
{x1:E.x,y1:E.y,x2:I.x,y2:I.y,display:"inline"});m["c"+n+"_line"]=D;pointGrip=m["c"+n]=svgedit.path.addCtrlGrip(B);svgedit.utilities.assignAttributes(pointGrip,{cx:E.x,cy:E.y,display:"inline"});m["c"+n]=pointGrip}return m};svgedit.path.replacePathSeg=function(b,c,k,m){m=m||svgedit.path.path.elem;b=m["createSVGPathSeg"+e[b]].apply(m,k);if(svgedit.browser.supportsPathReplaceItem())m.pathSegList.replaceItem(b,c);else{k=m.pathSegList;m=k.numberOfItems;for(var s=[],n=0;n<m;n++){var B=k.getItem(n);s.push(B)}k.clear();
for(n=0;n<m;n++)n==c?k.appendItem(b):k.appendItem(s[n])}};svgedit.path.getSegSelector=function(b,c){var k=b.index,m=svgedit.utilities.getElem("segline_"+k);if(!m){var s=svgedit.path.getGripContainer();m=document.createElementNS("http://www.w3.org/2000/svg","path");svgedit.utilities.assignAttributes(m,{id:"segline_"+k,display:"none",fill:"none",stroke:"#0ff","stroke-opacity":1,"shape-rendering":"crispEdges","stroke-width":2,style:"pointer-events:none",d:"M0,0 0,0"});s.appendChild(m)}if(c){k=b.prev;
if(!k){m.setAttribute("display","none");return m}k=svgedit.path.getGripPt(k);svgedit.path.replacePathSeg(2,0,[k.x,k.y],m);s=svgedit.path.ptObjToArr(b.type,b.item,true);for(var n=0;n<s.length;n+=2){k=svgedit.path.getGripPt(b,{x:s[n],y:s[n+1]});s[n]=k.x;s[n+1]=k.y}svgedit.path.replacePathSeg(b.type,1,s,m)}return m};svgedit.path.smoothControlPoints=this.smoothControlPoints=function(b,c,k){var m=b.x-k.x,s=b.y-k.y,n=c.x-k.x,B=c.y-k.y;if((m!=0||s!=0)&&(n!=0||B!=0)){b=Math.atan2(s,m);c=Math.atan2(B,n);m=
Math.sqrt(m*m+s*s);n=Math.sqrt(n*n+B*B);s=l.getSVGRoot().createSVGPoint();B=l.getSVGRoot().createSVGPoint();if(b<0)b+=2*Math.PI;if(c<0)c+=2*Math.PI;var D=Math.abs(b-c),E=Math.abs(Math.PI-D)/2;if(b-c>0){b=D<Math.PI?b+E:b-E;c=D<Math.PI?c-E:c+E}else{b=D<Math.PI?b-E:b+E;c=D<Math.PI?c+E:c-E}s.x=m*Math.cos(b)+k.x;s.y=m*Math.sin(b)+k.y;B.x=n*Math.cos(c)+k.x;B.y=n*Math.sin(c)+k.y;return[s,B]}};svgedit.path.Segment=function(b,c){this.selected=false;this.index=b;this.item=c;this.type=c.pathSegType;this.ctrlpts=
[];this.segsel=this.ptgrip=null};svgedit.path.Segment.prototype.showCtrlPts=function(b){for(var c in this.ctrlpts)this.ctrlpts[c].setAttribute("display",b?"inline":"none")};svgedit.path.Segment.prototype.selectCtrls=function(){$("#ctrlpointgrip_"+this.index+"c1, #ctrlpointgrip_"+this.index+"c2").attr("fill","#4F80FF")};svgedit.path.Segment.prototype.show=function(b){if(this.ptgrip){this.ptgrip.setAttribute("display",b?"inline":"none");this.segsel.setAttribute("display",b?"inline":"none");this.showCtrlPts(b)}};
svgedit.path.Segment.prototype.select=function(b){if(this.ptgrip){this.ptgrip.setAttribute("stroke",b?"#4F80FF":"#4F80FF");this.ptgrip.setAttribute("fill",b?"#4F80FF":"#fff");this.segsel.setAttribute("display",b?"inline":"none");this.ctrlpts&&this.selectCtrls(b);this.selected=b}};svgedit.path.Segment.prototype.addGrip=function(){this.ptgrip=svgedit.path.getPointGrip(this,true);this.ctrlpts=svgedit.path.getControlPoints(this,true);this.segsel=svgedit.path.getSegSelector(this,true)};svgedit.path.Segment.prototype.update=
function(b){if(this.ptgrip){var c=svgedit.path.getGripPt(this),k=svgedit.browser.isTouch()?15:2.5;svgedit.utilities.assignAttributes(this.ptgrip,this.ptgrip.nodeName=="rect"?{x:c.x-k,y:c.y-k}:{cx:c.x,cy:c.y});svgedit.path.getSegSelector(this,true);if(this.ctrlpts){if(b){this.item=svgedit.path.path.elem.pathSegList.getItem(this.index);this.type=this.item.pathSegType}svgedit.path.getControlPoints(this)}}};svgedit.path.Segment.prototype.move=function(b,c){var k=this.item;k=this.ctrlpts?[k.x+=b,k.y+=
c,k.x1,k.y1,k.x2+=b,k.y2+=c]:[k.x+=b,k.y+=c];svgedit.path.replacePathSeg(this.type,this.index,k);if(this.next&&this.next.ctrlpts){k=this.next.item;k=[k.x,k.y,k.x1+=b,k.y1+=c,k.x2,k.y2];svgedit.path.replacePathSeg(this.next.type,this.next.index,k)}if(this.mate){k=this.mate.item;k=[k.x+=b,k.y+=c];svgedit.path.replacePathSeg(this.mate.type,this.mate.index,k)}this.update(true);this.next&&this.next.update(true)};svgedit.path.Segment.prototype.setLinked=function(b){var c,k,m;if(b==2){k=1;c=this.next;if(!c)return;
m=this.item}else{k=2;c=this.prev;if(!c)return;m=c.item}var s=c.item;s["x"+k]=m.x+m.x-this.item["x"+b];s["y"+k]=m.y+m.y-this.item["y"+b];svgedit.path.replacePathSeg(c.type,c.index,[s.x,s.y,s.x1,s.y1,s.x2,s.y2]);c.update(true)};svgedit.path.Segment.prototype.moveCtrl=function(b,c,k){var m=this.item;m["x"+b]+=c;m["y"+b]+=k;svgedit.path.replacePathSeg(this.type,this.index,[m.x,m.y,m.x1,m.y1,m.x2,m.y2]);this.update(true)};svgedit.path.Segment.prototype.setType=function(b,c){svgedit.path.replacePathSeg(b,
this.index,c);this.type=b;this.item=svgedit.path.path.elem.pathSegList.getItem(this.index);this.showCtrlPts(b===6);this.ctrlpts=svgedit.path.getControlPoints(this);this.update(true)};svgedit.path.Path=function(b){if(!b||b.tagName!=="path")throw"svgedit.path.Path constructed without a <path> element";this.elem=b;this.segs=[];this.selected_pts=[];svgedit.path.path=this;this.init()};svgedit.path.Path.prototype.init=function(){$(svgedit.path.getGripContainer()).find("*").attr("display","none");var b=
this.elem.pathSegList,c=b.numberOfItems;this.segs=[];this.selected_pts=[];this.first_seg=null;for(var k=0;k<c;k++){var m=b.getItem(k);m=new svgedit.path.Segment(k,m);m.path=this;this.segs.push(m)}b=this.segs;m=null;for(k=0;k<c;k++){var s=b[k],n=k+1>=c?null:b[k+1],B=k-1<0?null:b[k-1];if(s.type===2){if(B&&B.type!==1){n=b[m];n.next=b[m+1];n.next.prev=n;n.addGrip()}m=k}else if(n&&n.type===1){s.next=b[m+1];s.next.prev=s;s.mate=b[m];s.addGrip();if(this.first_seg==null)this.first_seg=s}else if(n){if(s.type!==
1){s.addGrip();if(n&&n.type!==2){s.next=n;s.next.prev=s}}}else if(s.type!==1){n=b[m];n.next=b[m+1];n.next.prev=n;n.addGrip();s.addGrip();if(!this.first_seg)this.first_seg=b[m]}}return this};svgedit.path.Path.prototype.eachSeg=function(b){for(var c=this.segs.length,k=0;k<c;k++)if(b.call(this.segs[k],k)===false)break};svgedit.path.Path.prototype.addSeg=function(b){var c=this.segs[b];if(c.prev){var k=c.prev,m;switch(c.item.pathSegType){case 4:var s=(c.item.x+k.item.x)/2,n=(c.item.y+k.item.y)/2;m=this.elem.createSVGPathSegLinetoAbs(s,
n);break;case 6:m=(k.item.x+c.item.x1)/2;var B=(c.item.x1+c.item.x2)/2,D=(c.item.x2+c.item.x)/2,E=(m+B)/2;B=(B+D)/2;s=(E+B)/2;var I=(k.item.y+c.item.y1)/2,Q=(c.item.y1+c.item.y2)/2;k=(c.item.y2+c.item.y)/2;var O=(I+Q)/2;Q=(Q+k)/2;n=(O+Q)/2;m=this.elem.createSVGPathSegCurvetoCubicAbs(s,n,m,I,E,O);svgedit.path.replacePathSeg(c.type,b,[c.item.x,c.item.y,B,Q,D,k])}svgedit.path.insertItemBefore(this.elem,m,b)}};svgedit.path.Path.prototype.deleteSeg=function(b){var c=this.segs[b],k=this.elem.pathSegList;
c.show(false);var m=c.next;if(c.mate){var s=[m.item.x,m.item.y];svgedit.path.replacePathSeg(2,m.index,s);svgedit.path.replacePathSeg(4,c.index,s);k.removeItem(c.mate.index)}else{if(!c.prev){s=[m.item.x,m.item.y];svgedit.path.replacePathSeg(2,c.next.index,s)}k.removeItem(b)}};svgedit.path.Path.prototype.subpathIsClosed=function(b){var c=false;svgedit.path.path.eachSeg(function(k){if(k<=b)return true;if(this.type===2)return false;else if(this.type===1){c=true;return false}});return c};svgedit.path.Path.prototype.removePtFromSelection=
function(b){var c=this.selected_pts.indexOf(b);if(c!=-1){this.segs[b].select(false);this.selected_pts.splice(c,1)}};svgedit.path.Path.prototype.clearSelection=function(){this.eachSeg(function(){this.select(false)});this.selected_pts=[]};svgedit.path.Path.prototype.storeD=function(){this.last_d=this.elem.getAttribute("d")};svgedit.path.Path.prototype.show=function(b){this.eachSeg(function(){this.show(b)});b&&this.selectPt(this.first_seg.index);return this};svgedit.path.Path.prototype.movePts=function(b,
c){for(var k=this.selected_pts.length;k--;)this.segs[this.selected_pts[k]].move(b,c)};svgedit.path.Path.prototype.moveCtrl=function(b,c){var k=this.segs[this.selected_pts[0]];k.moveCtrl(this.dragctrl,b,c);d&&k.setLinked(this.dragctrl)};svgedit.path.Path.prototype.setSegType=function(b){this.storeD();for(var c=this.selected_pts.length,k;c--;){var m=this.segs[this.selected_pts[c]],s=m.prev;if(s){if(!b){k="Toggle Path Segment Type";b=m.type==6?4:6}b-=0;var n=m.item.x,B=m.item.y,D=s.item.x;s=s.item.y;
var E;switch(b){case 6:if(m.olditem){D=m.olditem;E=[n,B,D.x1,D.y1,D.x2,D.y2]}else{E=n-D;var I=B-s;E=[n,B,D+E/3,s+I/3,n-E/3,B-I/3]}break;case 4:E=[n,B];m.olditem=m.item}m.setType(b,E)}}svgedit.path.path.endChanges(k)};svgedit.path.Path.prototype.selectPt=function(b,c){this.clearSelection();b==null&&this.eachSeg(function(k){if(this.prev)b=k});this.addPtsToSelection(b);if(c){this.dragctrl=c;d&&this.segs[b].setLinked(c)}};svgedit.path.Path.prototype.update=function(){var b=this.elem;if(svgedit.utilities.getRotationAngle(b)){this.matrix=
svgedit.math.getMatrix(b);this.imatrix=this.matrix.inverse()}else this.imatrix=this.matrix=null;this.eachSeg(function(c){this.item=b.pathSegList.getItem(c);this.update()});return this};svgedit.path.getPath_=function(b){var c=g[b.id];c||(c=g[b.id]=new svgedit.path.Path(b));return c};svgedit.path.removePath_=function(b){b in g&&delete g[b]};var f=function(b,c,k,m,s,n,B){dx=b-k;dy=c-m;r=Math.sqrt(dx*dx+dy*dy);theta=Math.atan2(dy,dx)+B;dx=r*Math.cos(theta)+k;dy=r*Math.sin(theta)+m;dx-=s;dy-=n;r=Math.sqrt(dx*
dx+dy*dy);theta=Math.atan2(dy,dx)-B;return{x:(r*Math.cos(theta)+s)/1,y:(r*Math.sin(theta)+n)/1}};svgedit.path.recalcRotatedPath=function(){var b=svgedit.path.path.elem,c=svgedit.utilities.getRotationAngle(b,true);if(c){var k=svgedit.utilities.getBBox(b),m=svgedit.path.path.oldbbox,s=m.x+m.width/2;m=m.y+m.height/2;var n=k.x+k.width/2;k=k.y+k.height/2;n=n-s;var B=k-m;k=Math.sqrt(n*n+B*B);B=Math.atan2(B,n)+c;n=k*Math.cos(B)+s;k=k*Math.sin(B)+m;B=b.pathSegList;for(var D=B.numberOfItems;D;){D-=1;var E=
B.getItem(D),I=E.pathSegType;if(I!=1){var Q=f(E.x,E.y,s,m,n,k,c);Q=[Q.x,Q.y];if(E.x1!=null&&E.x2!=null){c_vals1=f(E.x1,E.y1,s,m,n,k,c);c_vals2=f(E.x2,E.y2,s,m,n,k,c);Q.splice(Q.length,0,c_vals1.x,c_vals1.y,c_vals2.x,c_vals2.y)}svgedit.path.replacePathSeg(I,D,Q)}}svgedit.utilities.getBBox(b);s=svgroot.createSVGTransform();b=svgedit.transformlist.getTransformList(b);s.setRotate(c*180/Math.PI,n,k);b.replaceItem(s,0)}};svgedit.path.clearData=function(){g={}}})();if(!window.console){window.console={};window.console.log=function(){};window.console.dir=function(){}}if(window.opera){window.console.log=function(a){opera.postError(a)};window.console.dir=function(){}}
(function(){var a=jQuery.fn.attr;jQuery.fn.attr=function(h,e){var d=this.length;if(!d)return a.apply(this,arguments);for(var g=0;g<d;g++){var l=this[g];if(l.namespaceURI==="http://www.w3.org/2000/svg")if(e!==undefined)l.setAttribute(h,e);else if($.isArray(h)){d=h.length;for(g={};d--;){var f=h[d],b=l.getAttribute(f);if(b||b==="0")b=isNaN(b)?b:b-0;g[f]=b}return g}else if(typeof h==="object")for(f in h)l.setAttribute(f,h[f]);else{if((b=l.getAttribute(h))||b==="0")b=isNaN(b)?b:b-0;return b}else return a.apply(this,
arguments)}return this}})();
$.SvgCanvas=function(a,h){function e(o,q){for(var u=svgedit.utilities.getBBox(o),F=0;F<2;F++){var C=F===0?"fill":"stroke",K=o.getAttribute(C);if(K&&K.indexOf("url(")===0){K=S(K);if(K.tagName==="linearGradient"){var G=K.getAttribute("x1")||0,A=K.getAttribute("y1")||0,J=K.getAttribute("x2")||1,p=K.getAttribute("y2")||0;G=u.width*G+u.x;A=u.height*A+u.y;J=u.width*J+u.x;p=u.height*p+u.y;G=N(G,A,q);p=N(J,p,q);J={};J.x1=(G.x-u.x)/u.width;J.y1=(G.y-u.y)/u.height;J.x2=(p.x-u.x)/u.width;J.y2=(p.y-u.y)/u.height;
K=K.cloneNode(true);$(K).attr(J);K.id=na();gb().appendChild(K);o.setAttribute(C,"url(#"+K.id+")")}}}}var d="http://www.w3.org/2000/svg",g={show_outside_canvas:true,selectNew:true,dimensions:[640,480]};h&&$.extend(g,h);var l=g.dimensions,f=this,b=a.ownerDocument,c=b.importNode(svgedit.utilities.text2xml('<svg id="svgroot" xmlns="'+d+'" xlinkns="http://www.w3.org/1999/xlink" width="'+l[0]+'" height="'+l[1]+'" x="'+l[0]+'" y="'+l[1]+'" overflow="visible"><defs><filter id="canvashadow" filterUnits="objectBoundingBox"><feGaussianBlur in="SourceAlpha" stdDeviation="4" result="blur"/><feOffset in="blur" dx="5" dy="5" result="offsetBlur"/><feMerge><feMergeNode in="offsetBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs></svg>').documentElement,
true);a.appendChild(c);var k=b.createElementNS(d,"svg");(f.clearSvgContentElement=function(){for(;k.firstChild;)k.removeChild(k.firstChild);$(k).attr({id:"svgcontent",width:l[0],height:l[1],x:l[0],y:l[1],overflow:g.show_outside_canvas?"visible":"hidden",xmlns:d,"xmlns:se":"http://svg-edit.googlecode.com","xmlns:xlink":"http://www.w3.org/1999/xlink"}).appendTo(c);var o=b.createComment(" Created with Method Draw - http://github.com/duopixel/Method-Draw/ ");k.appendChild(o)})();var m="svg_";f.setIdPrefix=
function(o){m=o};f.current_drawing_=new svgedit.draw.Drawing(k,m);var s=f.getCurrentDrawing=function(){return f.current_drawing_},n=1,B=null,D={shape:{fill:(g.initFill.color=="none"?"":"#")+g.initFill.color,fill_paint:null,fill_opacity:g.initFill.opacity,stroke:"#"+g.initStroke.color,stroke_paint:null,stroke_opacity:g.initStroke.opacity,stroke_width:g.initStroke.width,stroke_dasharray:"none",opacity:g.initOpacity}};D.text=$.extend(true,{},D.shape);$.extend(D.text,{fill:"#000000",stroke_width:0,font_size:24,
font_family:"Helvetica, Arial, sans-serif"});var E=D.shape,I=Array(1),Q=this.addSvgElementFromJson=function(o){var q=svgedit.utilities.getElem(o.attr.id),u=s().getCurrentLayer();if(q&&o.element!=q.tagName){u.removeChild(q);q=null}if(!q){q=b.createElementNS(d,o.element);if(u)(B||u).appendChild(q)}o.curStyles&&svgedit.utilities.assignAttributes(q,{fill:E.fill,stroke:E.stroke,"stroke-width":E.stroke_width,"stroke-dasharray":E.stroke_dasharray,"stroke-opacity":E.stroke_opacity,"fill-opacity":E.fill_opacity,
opacity:E.opacity/2,style:"pointer-events:inherit"},100);svgedit.utilities.assignAttributes(q,o.attr,100);svgedit.utilities.cleanupElement(q);return q},O=f.getTransformList=svgedit.transformlist.getTransformList,N=svgedit.math.transformPoint,aa=f.matrixMultiply=svgedit.math.matrixMultiply,ga=f.hasMatrixTransform=svgedit.math.hasMatrixTransform,T=f.transformListToTransform=svgedit.math.transformListToTransform,U=svgedit.math.snapToAngle,ba=svgedit.math.getMatrix;svgedit.units.init({getBaseUnit:function(){return g.baseUnit},
getElement:svgedit.utilities.getElem,getHeight:function(){return k.getAttribute("height")/n},getWidth:function(){return k.getAttribute("width")/n},getRoundDigits:function(){return $a.round_digits}});var ua=f.convertToNum=svgedit.units.convertToNum;svgedit.utilities.init({getDOMDocument:function(){return b},getDOMContainer:function(){return a},getSVGRoot:function(){return c},getSelectedElements:function(){return I},getSVGContent:function(){return k}});var ia=f.getUrlFromAttr=svgedit.utilities.getUrlFromAttr,
ca=f.getHref=svgedit.utilities.getHref,V=f.setHref=svgedit.utilities.setHref,Y=svgedit.utilities.getPathBBox;f.getBBox=svgedit.utilities.getBBox;var oa=f.getRotationAngle=svgedit.utilities.getRotationAngle,pa=f.getElem=svgedit.utilities.getElem,ma=f.assignAttributes=svgedit.utilities.assignAttributes,ka=this.cleanupElement=svgedit.utilities.cleanupElement,Ba=svgedit.sanitize.getNSMap(),ra=f.sanitizeSvg=svgedit.sanitize.sanitizeSvg,Ca=svgedit.history.MoveElementCommand,ya=svgedit.history.InsertElementCommand,
qa=svgedit.history.RemoveElementCommand,Ka=svgedit.history.ChangeElementCommand,Da=svgedit.history.BatchCommand;f.undoMgr=new svgedit.history.UndoManager({handleHistoryEvent:function(o,q){var u=svgedit.history.HistoryEventTypes;if(o==u.BEFORE_UNAPPLY||o==u.BEFORE_APPLY)f.clearSelection();else if(o==u.AFTER_APPLY||o==u.AFTER_UNAPPLY){var F=q.elements();f.pathActions.clear();P("changed",F);F=q.type();u=o==u.AFTER_APPLY;if(F==Ca.type())(u?q.newParent:q.oldParent)==k&&f.identifyLayers();else if(F==ya.type()||
F==qa.type()){q.parent==k&&f.identifyLayers();if(F==ya.type())u&&Ta(q.elem);else u||Ta(q.elem);q.elem.tagName==="use"&&Hb(q.elem)}else if(F==Ka.type()){q.elem.tagName=="title"&&q.elem.parentNode.parentNode==k&&f.identifyLayers();u=u?q.newValues:q.oldValues;u.stdDeviation&&f.setBlurOffsets(q.elem.parentNode,u.stdDeviation)}}}});var xa=function(o){f.undoMgr.addCommandToHistory(o)};svgedit.select.init(g,{createSVGElement:function(o){return f.addSvgElementFromJson(o)},svgRoot:function(){return c},svgContent:function(){return k},
currentZoom:function(){return n},getStrokedBBox:function(o){return f.getStrokedBBox([o])}});var sa=this.selectorManager=svgedit.select.getSelectorManager();svgedit.path.init({getCurrentZoom:function(){return n},getSVGRoot:function(){return c}});svgedit.utilities.snapToGrid=function(o){var q=g.snappingStep,u=g.baseUnit;if(u!=="px")q*=svgedit.units.getTypeMap()[u];return o=Math.round(o/q)*q};var va=svgedit.utilities.snapToGrid,kb={exportNoBlur:"Blurred elements will appear as un-blurred",exportNoforeignObject:"foreignObject elements will not appear",
exportNoDashArray:"Strokes will appear filled",exportNoText:"Text may not appear as expected"},vb=["clip-path","fill","filter","marker-end","marker-mid","marker-start","mask","stroke"],cb=$.data,Ta=function(o){var q=$(o).attr(vb),u;for(u in q){var F=q[u];if(F&&F.indexOf("url(")===0){F=ia(F).substr(1);if(!pa(F)){gb().appendChild(sb[F]);delete sb[F]}}}o=o.getElementsByTagName("*");if(o.length){q=0;for(u=o.length;q<u;q++)Ta(o[q])}},Va={},Ia=g.imgPath+"logo.png",za=[],$a={round_digits:5},La=false,Sa=
null,Ja="select",db="none",lb={},Ua=D.text,Xa=E,wb=null,wa=null,hb=[],eb={},sb={};f.clipBoard=[];var ib=this.runExtensions=function(o,q,u){var F=false;if(u)F=[];$.each(eb,function(C,K){if(o in K)if(u)F.push(K[o](q));else F=K[o](q)});return F};this.addExtension=function(o,q){if(o in eb)console.log('Cannot add extension "'+o+'", an extension by that name already exists"');else{var u=$.isFunction(q)?q($.extend(f.getPrivateMethods(),{svgroot:c,svgcontent:k,nonce:s().getNonce(),selectorManager:sa})):q;
eb[o]=u;P("extension_added",u)}};var ab=this.round=function(o){return parseInt(o*n)/n},ob=this.getIntersectionList=function(o){if(wa==null)return null;var q=B||s().getCurrentLayer();hb.length||(hb=fb(q));var u=null;try{u=q.getIntersectionList(o,null)}catch(F){}if(u==null||typeof u.item!="function"){u=[];if(o)o=o;else{o=wa.getBBox();q={};for(var C in o)q[C]=o[C]/n;o=q}for(C=hb.length;C--;)o.width&&o.width&&svgedit.math.rectsIntersect(o,hb[C].bbox)&&u.push(hb[C].elem)}return u};getStrokedBBox=this.getStrokedBBox=
function(o){o||(o=pb());if(!o.length)return false;var q=function(p){try{var v=svgedit.utilities.getBBox(p),w=svgedit.utilities.getRotationAngle(p);if(w&&w%90||svgedit.math.hasMatrixTransform(svgedit.transformlist.getTransformList(p))){w=false;if(["ellipse","path","line","polyline","polygon"].indexOf(p.tagName)>=0)v=w=f.convertToPath(p,true);else if(p.tagName=="rect"){var z=p.getAttribute("rx"),H=p.getAttribute("ry");if(z||H)v=w=f.convertToPath(p,true)}if(!w){var L=p.cloneNode(true),M=document.createElementNS(d,
"g"),R=p.parentNode;R.appendChild(M);M.appendChild(L);v=svgedit.utilities.bboxToObj(M.getBBox());R.removeChild(M)}}return v}catch(Z){console.log(p,Z)}},u;$.each(o,function(){if(!u)if(this.parentNode)u=q(this)});if(u==null)return null;var F=u.x+u.width,C=u.y+u.height,K=u.x,G=u.y,A=function(p){var v=p.getAttribute("stroke-width"),w=0;if(p.getAttribute("stroke")!="none"&&!isNaN(v))w+=v/2;return w},J=[];$.each(o,function(p,v){var w=q(v);if(w){var z=A(v);K=Math.min(K,w.x-z);G=Math.min(G,w.y-z);J.push(w)}});
u.x=K;u.y=G;$.each(o,function(p,v){var w=J[p];if(w&&v.nodeType==1){var z=A(v);F=Math.max(F,w.x+w.width+z);C=Math.max(C,w.y+w.height+z)}});u.width=F-K;u.height=C-G;return u};var pb=this.getVisibleElements=function(o){o||(o=$(k).children());o.find("#canvas_background").length&&o.splice(0,1);var q=[];$(o).children().each(function(u,F){try{F.getBBox()&&q.push(F)}catch(C){}});return q.reverse()},fb=this.getVisibleElementsAndBBoxes=function(o){o||(o=$(k).children());var q=[];$(o).children().each(function(u,
F){try{F.getBBox()&&q.push({elem:F,bbox:getStrokedBBox([F])})}catch(C){}});return q.reverse()},tb=this.groupSvgElem=function(o){var q=document.createElementNS(d,"g");o.parentNode.replaceChild(q,o);$(q).append(o).data("gsvg",o)[0].id=na()},la=function(o){var q=document.createElementNS(o.namespaceURI,o.nodeName);q.removeAttribute("id");$.each(o.attributes,function(F,C){C.localName!="-moz-math-font-style"&&q.setAttributeNS(C.namespaceURI,C.nodeName,C.nodeValue)});if(svgedit.browser.isWebkit()&&o.nodeName==
"path"){var u=Ma.convertPath(o);q.setAttribute("d",u)}$.each(o.childNodes,function(F,C){switch(C.nodeType){case 1:q.appendChild(la(C));break;case 3:q.textContent=C.nodeValue}});if($(o).data("gsvg"))$(q).data("gsvg",q.firstChild);else if($(o).data("symbol")){o=$(o).data("symbol");$(q).data("ref",o).data("symbol",o)}else q.tagName=="image"&&Fb(q);q.id=na();return q},da,na,P;(function(o){var q={};da=o.getId=function(){return s().getId()};na=o.getNextId=function(){return s().getNextId()};P=o.call=function(u,
F){if(q[u])return q[u](this,F)};o.bind=function(u,F){var C=q[u];q[u]=F;return C}})(f);this.prepareSvg=function(o){this.sanitizeSvg(o.documentElement);o=o.getElementsByTagNameNS(d,"path");for(var q=0,u=o.length;q<u;++q){var F=o[q];F.setAttribute("d",Ma.convertPath(F));Ma.fixEnd(F)}};var S=this.getRefElem=function(o){return pa(ia(o).substr(1))},fa=function(o){if(!svgedit.browser.isGecko())return o;var q=o.cloneNode(true);o.parentNode.insertBefore(q,o);o.parentNode.removeChild(o);sa.releaseSelector(o);
I[0]=q;sa.requestSelector(q).showGrips(true);return q};this.setRotationAngle=function(o,q){o=parseFloat(o);var u=I[0];if(u){var F=u.getAttribute("transform"),C=svgedit.utilities.getBBox(u),K=C.x+C.width/2,G=C.y+C.height/2;C=O(u);C.numberOfItems>0&&C.getItem(0).type==4&&C.removeItem(0);if(o!=0){K=N(K,G,T(C).matrix);G=c.createSVGTransform();G.setRotate(o,K.x,K.y);C.numberOfItems?C.insertItemBefore(G,0):C.appendItem(G)}else C.numberOfItems==0&&u.removeAttribute("transform");if(!q){C=u.getAttribute("transform");
u.setAttribute("transform",F);Ya("transform",C,I);P("changed",I)}pa("pathpointgrip_container");u=sa.requestSelector(I[0]);u.resize();u.updateGripCursors(o)}};var Ha=this.recalculateAllSelectedDimensions=function(){for(var o=new Da(db=="none"?"position":"size"),q=I.length;q--;){var u=Ra(I[q]);u&&o.addSubCommand(u)}if(!o.isEmpty()){xa(o);P("changed",I)}},Oa=[0,"z","M","m","L","l","C","c","Q","q","A","a","H","h","V","v","S","s","T","t"],Wa=function(o){console.log([o.a,o.b,o.c,o.d,o.e,o.f])},Za=this.remapElement=
function(o,q,u){var F=g.gridSnapping&&o.parentNode.parentNode.localName==="svg",C=function(){if(F)for(var w in q)q[w]=va(q[w]);ma(o,q,1E3,true)};box=svgedit.utilities.getBBox(o);for(var K=0;K<2;K++){var G=K===0?"fill":"stroke",A=o.getAttribute(G);if(A&&A.indexOf("url(")===0)if(u.a<0||u.d<0){A=S(A).cloneNode(true);if(u.a<0){var J=A.getAttribute("x1"),p=A.getAttribute("x2");A.setAttribute("x1",-(J-1));A.setAttribute("x2",-(p-1))}if(u.d<0){J=A.getAttribute("y1");p=A.getAttribute("y2");A.setAttribute("y1",
-(J-1));A.setAttribute("y2",-(p-1))}A.id=na();gb().appendChild(A);o.setAttribute(G,"url(#"+A.id+")")}}K=o.tagName;if(K==="g"||K==="text"||K==="use")if(u.a==1&&u.b==0&&u.c==0&&u.d==1&&(u.e!=0||u.f!=0)){G=T(o).matrix;G=aa(G.inverse(),u,G);q.x=parseFloat(q.x)+G.e;q.y=parseFloat(q.y)+G.f}else{G=O(o);A=c.createSVGTransform();A.setMatrix(aa(T(G).matrix,u));G.clear();G.appendItem(A)}switch(K){case "foreignObject":case "rect":case "image":if(K==="image"&&(u.a<0||u.d<0)){G=O(o);A=c.createSVGTransform();A.setMatrix(aa(T(G).matrix,
u));G.clear();G.appendItem(A)}else{G=N(q.x,q.y,u);q.width=u.a*q.width;q.height=u.d*q.height;q.x=G.x+Math.min(0,q.width);q.y=G.y+Math.min(0,q.height);q.width=Math.abs(q.width);q.height=Math.abs(q.height)}C();break;case "ellipse":K=N(q.cx,q.cy,u);q.cx=K.x;q.cy=K.y;q.rx=u.a*q.rx;q.ry=u.d*q.ry;q.rx=Math.abs(q.rx);q.ry=Math.abs(q.ry);C();break;case "circle":K=N(q.cx,q.cy,u);q.cx=K.x;q.cy=K.y;K=svgedit.math.transformBox(box.x,box.y,box.width,box.height,u);q.r=Math.min((K.tr.x-K.tl.x)/2,(K.bl.y-K.tl.y)/
2);if(q.r)q.r=Math.abs(q.r);C();break;case "line":G=N(q.x1,q.y1,u);J=N(q.x2,q.y2,u);q.x1=G.x;q.y1=G.y;q.x2=J.x;q.y2=J.y;case "text":u=o.querySelectorAll("tspan");for(K=u.length;K--;){G=ua("x",o.getAttribute("x"));A=ua("x",u[K].getAttribute("x"));J=ua("y",o.getAttribute("y"));p=ua("y",u[K].getAttribute("y"));var v={};if(!isNaN(G)&&!isNaN(A)&&G!=0&&A!=0&&q.x)v.x=q.x-(G-A);if(!isNaN(J)&&!isNaN(p)&&J!=0&&p!=0&&q.y)v.y=q.y-(J-p);if(v.x||v.y)ma(u[K],v,1E3,true)}C();break;case "use":C();break;case "g":(C=
$(o).data("gsvg"))&&ma(C,q,1E3,true);break;case "polyline":case "polygon":C=q.points.length;for(K=0;K<C;++K){p=q.points[K];p=N(p.x,p.y,u);q.points[K].x=p.x;q.points[K].y=p.y}C=q.points.length;u="";for(K=0;K<C;++K){p=q.points[K];u+=p.x+","+p.y+" "}o.setAttribute("points",u);break;case "path":G=o.pathSegList;C=G.numberOfItems;q.d=Array(C);for(K=0;K<C;++K){A=G.getItem(K);q.d[K]={type:A.pathSegType,x:A.x,y:A.y,x1:A.x1,y1:A.y1,x2:A.x2,y2:A.y2,r1:A.r1,r2:A.r2,angle:A.angle,largeArcFlag:A.largeArcFlag,sweepFlag:A.sweepFlag}}C=
q.d.length;K=q.d[0];v=N(K.x,K.y,u);q.d[0].x=v.x;q.d[0].y=v.y;for(K=1;K<C;++K){A=q.d[K];G=A.type;if(G%2==0){p=N(A.x!=undefined?A.x:v.x,A.y!=undefined?A.y:v.y,u);G=N(A.x1,A.y1,u);J=N(A.x2,A.y2,u);A.x=p.x;A.y=p.y;A.x1=G.x;A.y1=G.y;A.x2=J.x;A.y2=J.y}else{A.x=u.a*A.x;A.y=u.d*A.y;A.x1=u.a*A.x1;A.y1=u.d*A.y1;A.x2=u.a*A.x2;A.y2=u.d*A.y2}A.r1=u.a*A.r1;A.r2=u.d*A.r2}u="";C=q.d.length;for(K=0;K<C;++K){A=q.d[K];G=A.type;u+=Oa[G];switch(G){case 13:case 12:u+=A.x+" ";break;case 15:case 14:u+=A.y+" ";break;case 3:case 5:case 19:case 2:case 4:case 18:u+=
A.x+","+A.y+" ";break;case 7:case 6:u+=A.x1+","+A.y1+" "+A.x2+","+A.y2+" "+A.x+","+A.y+" ";break;case 9:case 8:u+=A.x1+","+A.y1+" "+A.x+","+A.y+" ";break;case 11:case 10:u+=A.r1+","+A.r2+" "+A.angle+" "+ +A.largeArcFlag+" "+ +A.sweepFlag+" "+A.x+","+A.y+" ";break;case 17:case 16:u+=A.x2+","+A.y2+" "+A.x+","+A.y+" "}}o.setAttribute("d",u)}},nb=function(o,q,u){o=S(o).firstChild;var F=O(o),C=c.createSVGTransform();C.setTranslate(q,u);F.appendItem(C);Ra(o)},Ra=this.recalculateDimensions=function(o){if(o==
null)return null;var q=O(o);if(q&&q.numberOfItems>0){for(var u=q.numberOfItems;u--;){var F=q.getItem(u);if(F.type===0)q.removeItem(u);else if(F.type===1)svgedit.math.isIdentity(F.matrix)&&q.removeItem(u);else F.type===4&&F.angle===0&&q.removeItem(u)}if(q.numberOfItems===1&&oa(o))return null}if(!q||q.numberOfItems==0){o.removeAttribute("transform");return null}if(q){u=q.numberOfItems;for(var C=[];u--;){F=q.getItem(u);if(F.type===1)C.push([F.matrix,u]);else if(C.length)C=[]}if(C.length===2){u=c.createSVGTransformFromMatrix(aa(C[1][0],
C[0][0]));q.removeItem(C[0][1]);q.removeItem(C[1][1]);q.insertItemBefore(u,C[1][1])}u=q.numberOfItems;if(u>=2&&q.getItem(u-2).type===1&&q.getItem(u-1).type===2){C=c.createSVGTransform();F=aa(q.getItem(u-2).matrix,q.getItem(u-1).matrix);C.setMatrix(F);q.removeItem(u-2);q.removeItem(u-2);q.appendItem(C)}}switch(o.tagName){case "line":case "polyline":case "polygon":case "path":break;default:if(q.numberOfItems===1&&q.getItem(0).type===1||q.numberOfItems===2&&q.getItem(0).type===1&&q.getItem(0).type===
4)return null}var K=$(o).data("gsvg");u=new Da("Transform");var G={},A=null;F=[];switch(o.tagName){case "line":F=["x1","y1","x2","y2"];break;case "circle":F=["cx","cy","r"];break;case "ellipse":F=["cx","cy","rx","ry"];break;case "foreignObject":case "rect":case "image":F=["width","height","x","y"];break;case "use":case "text":case "tspan":F=["x","y"];break;case "polygon":case "polyline":A={};A.points=o.getAttribute("points");C=o.points;var J=C.numberOfItems;G.points=Array(J);for(var p=0;p<J;++p){var v=
C.getItem(p);G.points[p]={x:v.x,y:v.y}}break;case "path":A={};A.d=o.getAttribute("d");G.d=o.getAttribute("d")}if(F.length){G=$(o).attr(F);$.each(G,function(Ga,Pa){G[Ga]=ua(Ga,Pa)})}else if(K)G={x:$(K).attr("x")||0,y:$(K).attr("y")||0};if(A==null){A=$.extend(true,{},G);$.each(A,function(Ga,Pa){A[Ga]=ua(Ga,Pa)})}A.transform=Sa?Sa:"";if(o.tagName=="g"&&!K||o.tagName=="a"){C=svgedit.utilities.getBBox(o);var w={x:C.x+C.width/2,y:C.y+C.height/2},z=N(C.x+C.width/2,C.y+C.height/2,T(q).matrix);F=c.createSVGMatrix();
if(C=oa(o)){p=C*Math.PI/180;J=Math.abs(p)>1.0E-10?Math.sin(p)/(1-Math.cos(p)):2/p;for(p=0;p<q.numberOfItems;++p){F=q.getItem(p);if(F.type==4){F=F.matrix;w.y=(J*F.e+F.f)/2;w.x=(F.e-J*F.f)/2;q.removeItem(p);break}}}p=F=K=0;var H=q.numberOfItems;if(H)var L=q.getItem(0).matrix;if(H>=3&&q.getItem(H-2).type==3&&q.getItem(H-3).type==2&&q.getItem(H-1).type==2){p=3;var M=q.getItem(H-3).matrix,R=q.getItem(H-2).matrix,Z=q.getItem(H-1).matrix;J=o.childNodes;for(v=J.length;v--;){var ea=J.item(v);F=K=0;if(ea.nodeType==
1){var W=O(ea);if(W){F=T(W).matrix;K=oa(ea);var ha=Sa,ja=[];Sa=ea.getAttribute("transform");if(K||ga(W)){var X=c.createSVGTransform();X.setMatrix(aa(M,R,Z,F));W.clear();W.appendItem(X);ja.push(X)}else{K=aa(F.inverse(),Z,F);X=c.createSVGMatrix();X.e=-K.e;X.f=-K.f;F=aa(X.inverse(),F.inverse(),M,R,Z,F,K.inverse());var ta=c.createSVGTransform(),Aa=c.createSVGTransform(),Fa=c.createSVGTransform();ta.setTranslate(K.e,K.f);Aa.setScale(F.a,F.d);Fa.setTranslate(X.e,X.f);W.appendItem(Fa);W.appendItem(Aa);W.appendItem(ta);
ja.push(Fa);ja.push(Aa);ja.push(ta)}u.addSubCommand(Ra(ea));Sa=ha}}}q.removeItem(H-1);q.removeItem(H-2);q.removeItem(H-3)}else if(H>=3&&q.getItem(H-1).type==1){p=3;F=T(q).matrix;X=c.createSVGTransform();X.setMatrix(F);q.clear();q.appendItem(X)}else if((H==1||H>1&&q.getItem(1).type!=3)&&q.getItem(0).type==2){p=2;K=T(q).matrix;q.removeItem(0);F=T(q).matrix.inverse();F=aa(F,K);K=F.e;F=F.f;if(K!=0||F!=0){J=o.childNodes;v=J.length;for(H=[];v--;){ea=J.item(v);if(ea.nodeType==1){if(ea.getAttribute("clip-path")){ha=
ea.getAttribute("clip-path");if(H.indexOf(ha)===-1){nb(ha,K,F);H.push(ha)}}ha=Sa;Sa=ea.getAttribute("transform");if(W=O(ea)){M=c.createSVGTransform();M.setTranslate(K,F);W.numberOfItems?W.insertItemBefore(M,0):W.appendItem(M);u.addSubCommand(Ra(ea));W=o.getElementsByTagNameNS(d,"use");ea="#"+ea.id;for(M=W.length;M--;){R=W.item(M);if(ea==ca(R)){Z=c.createSVGTransform();Z.setTranslate(-K,-F);O(R).insertItemBefore(Z,0);u.addSubCommand(Ra(R))}}Sa=ha}}}H=[];Sa=ha}}else if(H==1&&q.getItem(0).type==1&&!C){p=
1;F=q.getItem(0).matrix;J=o.childNodes;for(v=J.length;v--;){ea=J.item(v);if(ea.nodeType==1){ha=Sa;Sa=ea.getAttribute("transform");if(W=O(ea)){K=aa(F,T(W).matrix);H=c.createSVGTransform();H.setMatrix(K);W.clear();W.appendItem(H,0);u.addSubCommand(Ra(ea));Sa=ha;ha=ea.getAttribute("stroke-width");ea.getAttribute("stroke")!=="none"&&!isNaN(ha)&&ea.setAttribute("stroke-width",ha*((Math.abs(K.a)+Math.abs(K.d))/2))}}}q.clear()}else{if(C){w=c.createSVGTransform();w.setRotate(C,z.x,z.y);q.numberOfItems?q.insertItemBefore(w,
0):q.appendItem(w)}q.numberOfItems==0&&o.removeAttribute("transform");return null}if(p==2){if(C){z={x:w.x+L.e,y:w.y+L.f};w=c.createSVGTransform();w.setRotate(C,z.x,z.y);q.numberOfItems?q.insertItemBefore(w,0):q.appendItem(w)}}else if(p==3){F=T(q).matrix;L=c.createSVGTransform();L.setRotate(C,w.x,w.y);L=L.matrix;w=c.createSVGTransform();w.setRotate(C,z.x,z.y);z=w.matrix.inverse();ha=F.inverse();z=aa(ha,z,L,F);K=z.e;F=z.f;if(K!=0||F!=0){J=o.childNodes;for(v=J.length;v--;){ea=J.item(v);if(ea.nodeType==
1){ha=Sa;Sa=ea.getAttribute("transform");W=O(ea);M=c.createSVGTransform();M.setTranslate(K,F);W.numberOfItems?W.insertItemBefore(M,0):W.appendItem(M);u.addSubCommand(Ra(ea));Sa=ha}}}if(C)q.numberOfItems?q.insertItemBefore(w,0):q.appendItem(w)}}else{C=svgedit.utilities.getBBox(o);if(!C&&o.tagName!="path")return null;F=c.createSVGMatrix();if(K=oa(o)){w={x:C.x+C.width/2,y:C.y+C.height/2};z=N(C.x+C.width/2,C.y+C.height/2,T(q).matrix);p=K*Math.PI/180;J=Math.abs(p)>1.0E-10?Math.sin(p)/(1-Math.cos(p)):2/
p;for(p=0;p<q.numberOfItems;++p){F=q.getItem(p);if(F.type==4){F=F.matrix;w.y=(J*F.e+F.f)/2;w.x=(F.e-J*F.f)/2;q.removeItem(p);break}}}p=0;H=q.numberOfItems;if(!svgedit.browser.isWebkit())if((L=o.getAttribute("fill"))&&L.indexOf("url(")===0){L=S(L);ha="pattern";if(L.tagName!==ha)ha="gradient";if(L.getAttribute(ha+"Units")==="userSpaceOnUse"){F=T(q).matrix;C=O(L);C=T(C).matrix;F=aa(F,C);C="matrix("+[F.a,F.b,F.c,F.d,F.e,F.f].join(",")+")";L.setAttribute(ha+"Transform",C)}}if(H>=3&&q.getItem(H-2).type==
3&&q.getItem(H-3).type==2&&q.getItem(H-1).type==2){p=3;F=T(q,H-3,H-1).matrix;q.removeItem(H-1);q.removeItem(H-2);q.removeItem(H-3)}else if(H==4&&q.getItem(H-1).type==1){p=3;F=T(q).matrix;X=c.createSVGTransform();X.setMatrix(F);q.clear();q.appendItem(X);F=c.createSVGMatrix()}else if((H==1||H>1&&q.getItem(1).type!=3)&&q.getItem(0).type==2){p=2;L=q.getItem(0).matrix;ha=T(q,1).matrix;C=ha.inverse();F=aa(C,L,ha);q.removeItem(0)}else if(H==1&&q.getItem(0).type==1&&!K){F=T(q).matrix;switch(o.tagName){case "line":G=
$(o).attr(["x1","y1","x2","y2"]);case "polyline":case "polygon":G.points=o.getAttribute("points");if(G.points){C=o.points;J=C.numberOfItems;G.points=Array(J);for(p=0;p<J;++p){v=C.getItem(p);G.points[p]={x:v.x,y:v.y}}}case "path":G.d=o.getAttribute("d");p=1;q.clear()}}else{p=4;if(K){w=c.createSVGTransform();w.setRotate(K,z.x,z.y);q.numberOfItems?q.insertItemBefore(w,0):q.appendItem(w)}q.numberOfItems==0&&o.removeAttribute("transform");return null}if(p==1||p==2||p==3)Za(o,G,F);if(p==2){if(K){ga(q)||
(z={x:w.x+F.e,y:w.y+F.f});w=c.createSVGTransform();w.setRotate(K,z.x,z.y);q.numberOfItems?q.insertItemBefore(w,0):q.appendItem(w)}}else if(p==3&&K){F=T(q).matrix;L=c.createSVGTransform();L.setRotate(K,w.x,w.y);L=L.matrix;w=c.createSVGTransform();w.setRotate(K,z.x,z.y);z=w.matrix.inverse();ha=F.inverse();z=aa(ha,z,L,F);Za(o,G,z);if(K)q.numberOfItems?q.insertItemBefore(w,0):q.appendItem(w)}}q.numberOfItems==0&&o.removeAttribute("transform");u.addSubCommand(new Ka(o,A));return u},mb=null,Ea=this.clearSelection=
function(o){if(I[0]!=null)for(var q=I.length,u=0;u<q;++u){var F=I[u];if(F==null)break;sa.releaseSelector(F);I[u]=null}o||P("selected",I)},qb=this.addToSelection=function(o,q){if(o.length!=0){for(var u=0;u<I.length;){if(I[u]==null)break;++u}for(var F=o.length;F--;){var C=o[F];if(C&&svgedit.utilities.getBBox(C)){if(C.tagName==="a"&&C.childNodes.length===1)C=C.firstChild;if(I.indexOf(C)==-1){I[u]=C;u++;C=sa.requestSelector(C);I.length>1&&C.showGrips(false)}}}P("selected",I);q||I.length==1?sa.requestSelector(I[0]).showGrips(true):
sa.requestSelector(I[0]).showGrips(false);for(I.sort(function(K,G){if(K&&G&&K.compareDocumentPosition)return 3-(G.compareDocumentPosition(K)&6);else if(K==null)return 1});I[0]==null;)I.shift(0)}},rb=this.selectOnly=function(o,q){Ea(true);qb(o,q)};this.removeFromSelection=function(o){if(I[0]!=null)if(o.length!=0){var q=Array(I.length);j=0;len=I.length;for(var u=0;u<len;++u){var F=I[u];if(F)if(o.indexOf(F)==-1){q[j]=F;j++}else sa.releaseSelector(F)}I=q}};this.selectAllInCurrentLayer=function(){var o=
s().getCurrentLayer();if(o){Ja="select";rb($(B||o).children())}};var Bb=this.getMouseTarget=function(o){if(o==null||o.target==null)return null;o=o.target;if(o.correspondingUseElement)o=o.correspondingUseElement;if(["http://www.w3.org/1998/Math/MathML","http://www.w3.org/1999/xhtml"].indexOf(o.namespaceURI)>=0&&o.id!="svgcanvas")for(;o.nodeName!="foreignObject";){o=o.parentNode;if(!o)return c}var q=s().getCurrentLayer();if([c,a,k,q].indexOf(o)>=0)return c;if($(o).closest("#selectorParentGroup").length)return sa.selectorParentGroup;
for(;o.parentNode&&o.parentNode!==(B||q);)o=o.parentNode;return o};(function(){var o=null,q=null,u=null,F=null,C=null,K={},G={minx:null,miny:null,maxx:null,maxy:null};$(a).mousedown(function(A){if(!f.spaceKey){var J=A.button===2;mb=k.getScreenCTM().inverse();isBotchedZoom=svgedit.browser.isGecko();var p=N(A.pageX,A.pageY,mb),v=p.x*(isBotchedZoom?1:n);p=p.y*(isBotchedZoom?1:n);A.preventDefault();if(J)Ja="select";v=v/n;p=p/n;var w=Bb(A);if(w.tagName==="a"&&w.childNodes.length===1)w=w.firstChild;var z=
F=q=v,H=C=u=p;if(g.gridSnapping){v=va(v);p=va(p);q=va(q);u=va(u)}if(w==sa.selectorParentGroup&&I[0]!=null){w=A.target;var L=cb(w,"type");if(L=="rotate"){Ja="rotate";current_rotate_mode=cb(w,"dir")}else if(L=="resize"){Ja="resize";db=cb(w,"dir")}w=I[0]}Sa=w.getAttribute("transform");L=O(w);switch(Ja){case "select":La=true;db="none";if(J)La=false;if(w!=c){if(I.indexOf(w)==-1){A.shiftKey||Ea(true);qb([w]);wb=w;Ma.clear()}if(!J)for(J=0;J<I.length;++J)if(I[J]!=null){var M=O(I[J]);M.numberOfItems?M.insertItemBefore(c.createSVGTransform(),
0):M.appendItem(c.createSVGTransform())}}else if(!J){Ea();Ja="multiselect";if(wa==null)wa=sa.getRubberBandBox();F*=n;C*=n;ma(wa,{x:F,y:C,width:0,height:0,display:"inline"},100)}break;case "zoom":La=true;if(wa==null)wa=sa.getRubberBandBox();ma(wa,{x:z*n,y:z*n,width:0,height:0,display:"inline"},100);break;case "resize":La=true;q=v;u=p;K=svgedit.utilities.getBBox($("#selectedBox0")[0]);var R={};$.each(K,function(Z,ea){R[Z]=ea/n});K=R;J=oa(w)?1:0;if(ga(L)){L.insertItemBefore(c.createSVGTransform(),J);
L.insertItemBefore(c.createSVGTransform(),J);L.insertItemBefore(c.createSVGTransform(),J)}else{L.appendItem(c.createSVGTransform());L.appendItem(c.createSVGTransform());L.appendItem(c.createSVGTransform());if(svgedit.browser.supportsNonScalingStroke()){if(v=svgedit.browser.isWebkit())M=function(Z){var ea=Z.getAttributeNS(null,"stroke");Z.removeAttributeNS(null,"stroke");setTimeout(function(){Z.setAttributeNS(null,"stroke",ea)},0)};w.style.vectorEffect="non-scaling-stroke";v&&M(w);p=w.getElementsByTagName("*");
z=p.length;for(J=0;J<z;J++){p[J].style.vectorEffect="non-scaling-stroke";v&&M(p[J])}}}break;case "fhellipse":case "fhrect":case "fhpath":La=true;o=z+","+H+" ";M=E.stroke_width==0?1:E.stroke_width;Q({element:"polyline",curStyles:true,attr:{points:o,id:na(),fill:"none",opacity:E.opacity/2,"stroke-linecap":"round",style:"pointer-events:none"}});G.minx=z;G.maxx=z;G.miny=H;G.maxy=H;break;case "image":La=true;M=Q({element:"image",attr:{x:v,y:p,width:0,height:0,id:na(),opacity:E.opacity/2,style:"pointer-events:inherit"}});
V(M,Ia);Fb(M);break;case "square":case "rect":La=true;q=v;u=p;Q({element:"rect",curStyles:true,attr:{x:v,y:p,width:0,height:0,id:na(),opacity:E.opacity/2}});break;case "line":La=true;M=E.stroke_width==0?1:E.stroke_width;Q({element:"line",curStyles:true,attr:{x1:v,y1:p,x2:v,y2:p,id:na(),stroke:E.stroke,"stroke-width":M,"stroke-dasharray":E.stroke_dasharray,"stroke-linejoin":E.stroke_linejoin,"stroke-linecap":E.stroke_linecap,"stroke-opacity":E.stroke_opacity,fill:"none",opacity:E.opacity/2,style:"pointer-events:none"}});
break;case "circle":La=true;Q({element:"circle",curStyles:true,attr:{cx:v,cy:p,r:0,id:na(),opacity:E.opacity/2}});break;case "ellipse":La=true;Q({element:"ellipse",curStyles:true,attr:{cx:v,cy:p,rx:0,ry:0,id:na(),opacity:E.opacity/2}});break;case "text":La=true;Q({element:"text",curStyles:true,attr:{x:v,y:p,id:na(),fill:Ua.fill,"stroke-width":Ua.stroke_width,"font-size":Ua.font_size,"font-family":Ua.font_family,"text-anchor":"left","xml:space":"preserve",opacity:E.opacity}});break;case "path":case "pathedit":q*=
n;u*=n;Ma.mouseDown(A,w,q,u);La=true;break;case "textedit":q*=n;u*=n;bb.mouseDown(A,w,q,u);La=true;break;case "rotate":La=true;f.undoMgr.beginUndoableChange("transform",I);document.getElementById("workarea").className="rotate"}M=ib("mouseDown",{event:A,start_x:q,start_y:u,selectedElements:I},true);$.each(M,function(Z,ea){if(ea&&ea.started)La=true});if(Ja)document.getElementById("workarea").className=Ja=="resize"?A.target.style.cursor:Ja}}).mousemove(function(A){if(!(A.originalEvent.touches&&A.originalEvent.touches.length>
1))if(La)if(!(A.button===1||f.spaceKey)){var J=I[0],p=N(A.pageX,A.pageY,mb),v=p.x*(isBotchedZoom?1:n);p=p.y*(isBotchedZoom?1:n);var w=pa(da()),z=x=v/n,H=y=p/n;if(g.gridSnapping){x=va(x);y=va(y)}A.preventDefault();switch(Ja){case "select":if(I[0]!==null){z=x-q;var L=y-u;if(g.gridSnapping){z=va(z);L=va(L)}if(A.shiftKey){var M=U(q,u,x,y);x=M.x;y=M.y}if(z!=0||L!=0){H=I.length;for(var R=0;R<H;++R){J=I[R];if(J==null)break;var Z=c.createSVGTransform();w=O(J);if(M){z=M.x-q;L=M.y-u}Z.setTranslate(z,L);w.numberOfItems?
w.replaceItem(Z,0):w.appendItem(Z);sa.requestSelector(J).resize()}if(A.altKey)if(!f.addClones){f.addClones=f.cloneSelectedElements(0,0,Z);f.removeClones=function(){f.addClones&&f.addClones.forEach(function(Aa){Aa.parentNode&&Aa.parentNode.removeChild(Aa);f.addClones=false})};window.addEventListener("keyup",f.removeClones)}P("transition",I)}}break;case "multiselect":z*=n;H*=n;ma(wa,{x:Math.min(F,z),y:Math.min(C,H),width:Math.abs(z-F),height:Math.abs(H-C)},100);w=[];z=[];M=ob();H=I.length;for(R=0;R<
H;++R){L=M.indexOf(I[R]);if(L==-1)w.push(I[R]);else M[L]=null}H=M.length;for(R=0;R<H;++R)M[R]&&z.push(M[R]);w.length>0&&f.removeFromSelection(w);z.length>0&&qb(z);break;case "resize":w=O(J);z=(M=ga(w))?K:svgedit.utilities.getBBox(J);H=z.x;R=z.y;var ea=z.width,W=z.height;z=x-q;L=y-u;if(g.gridSnapping){z=va(z);L=va(L);W=va(W);ea=va(ea)}if(Z=oa(J)){var ha=Math.sqrt(z*z+L*L);L=Math.atan2(L,z)-Z*Math.PI/180;z=ha*Math.cos(L);L=ha*Math.sin(L)}if(db.indexOf("n")==-1&&db.indexOf("s")==-1)L=0;if(db.indexOf("e")==
-1&&db.indexOf("w")==-1)z=0;var ja=ha=0,X=W?(W+L)/W:1,ta=ea?(ea+z)/ea:1;if(db.indexOf("n")>=0){X=W?(W-L)/W:1;ja=W}if(db.indexOf("w")>=0){ta=ea?(ea-z)/ea:1;ha=ea}z=c.createSVGTransform();L=c.createSVGTransform();ea=c.createSVGTransform();if(g.gridSnapping){H=va(H);ha=va(ha);R=va(R);ja=va(ja)}z.setTranslate(-(H+ha),-(R+ja));if(A.shiftKey)if(ta==1)ta=X;else X=ta;L.setScale(ta,X);ea.setTranslate(H+ha,R+ja);if(M){M=Z?1:0;w.replaceItem(z,2+M);w.replaceItem(L,1+M);w.replaceItem(ea,0+M)}else{M=w.numberOfItems;
w.replaceItem(ea,M-3);w.replaceItem(L,M-2);w.replaceItem(z,M-1)}sa.requestSelector(J).resize();P("transition",I);break;case "zoom":z*=n;H*=n;ma(wa,{x:Math.min(F*n,z),y:Math.min(C*n,H),width:Math.abs(z-F*n),height:Math.abs(H-C*n)},100);break;case "text":ma(w,{x:x,y:y},1E3);break;case "line":z=null;window.opera||c.suspendRedraw(1E3);if(g.gridSnapping){x=va(x);y=va(y)}H=x;M=y;if(A.shiftKey){M=U(q,u,H,M);H=M.x;M=M.y}w.setAttributeNS(null,"x2",H);w.setAttributeNS(null,"y2",M);window.opera||c.unsuspendRedraw(z);
break;case "foreignObject":case "square":case "rect":case "image":z=Math.abs(x-q);M=Math.abs(y-u);if(Ja=="square"||A.shiftKey){z=M=Math.max(z,M);H=q<x?q:q-z;R=u<y?u:u-M}else{H=Math.min(q,x);R=Math.min(u,y)}if(A.altKey){z*=2;M*=2;H=q-z/2;R=u-M/2}if(g.gridSnapping){z=va(z);M=va(M);H=va(H);R=va(R)}ma(w,{width:z,height:M,x:H,y:R},1E3);break;case "circle":z=$(w).attr(["cx","cy"]);M=z.cx;H=z.cy;z=Math.sqrt((x-M)*(x-M)+(y-H)*(y-H));if(g.gridSnapping)z=va(z);w.setAttributeNS(null,"r",z);break;case "ellipse":z=
$(w).attr(["cx","cy"]);M=Math.abs(q+(x-q)/2);H=Math.abs(u+(y-u)/2);z=null;window.opera||c.suspendRedraw(1E3);if(g.gridSnapping){x=va(x);M=va(M);y=va(y);H=va(H)}R=Math.abs(q-M);L=Math.abs(u-H);if(A.shiftKey){L=R;H=y>u?u+R:u-R}if(A.altKey){M=q;H=u;R=Math.abs(x-M);L=A.shiftKey?R:Math.abs(y-H)}w.setAttributeNS(null,"rx",R);w.setAttributeNS(null,"ry",L);w.setAttributeNS(null,"cx",M);w.setAttributeNS(null,"cy",H);window.opera||c.unsuspendRedraw(z);break;case "fhellipse":case "fhrect":G.minx=Math.min(z,
G.minx);G.maxx=Math.max(z,G.maxx);G.miny=Math.min(H,G.miny);G.maxy=Math.max(H,G.maxy);case "fhpath":o+=+z+","+H+" ";w.setAttributeNS(null,"points",o);break;case "path":case "pathedit":x*=n;y*=n;if(g.gridSnapping){x=va(x);y=va(y);q=va(q);u=va(u)}if(A.shiftKey){if(M=svgedit.path.path){w=M.dragging?M.dragging[0]:q;M=M.dragging?M.dragging[1]:u}else{w=q;M=u}M=U(w,M,x,y);x=M.x;y=M.y}if(wa&&wa.getAttribute("display")!=="none"){z*=n;H*=n;ma(wa,{x:Math.min(F*n,z),y:Math.min(C*n,H),width:Math.abs(z-F*n),height:Math.abs(H-
C*n)},100)}Ma.mouseMove(A,x,y);break;case "textedit":x*=n;y*=n;bb.mouseMove(v,p);break;case "rotate":z=svgedit.utilities.getBBox(J);M=z.x+z.width/2;H=z.y+z.height/2;w=ba(J);w=N(M,H,w);M=w.x;H=w.y;w=z.x;R=z.y;if(current_rotate_mode=="nw")w=z.x+z.width;if(current_rotate_mode=="se")R=z.y+z.height;if(current_rotate_mode=="sw"){w=z.x+z.width;R=z.y+z.height}compensation_angle=(Math.atan2(H-R,M-w)*(180/Math.PI)-90)%360;Z=(Math.atan2(H-y,M-x)*(180/Math.PI)-90)%360;Z+=compensation_angle;if(g.gridSnapping)Z=
va(Z);if(A.shiftKey)Z=Math.round(Z/45)*45;f.setRotationAngle(Z<-180?360+Z:Z,true);P("transition",I)}ib("mouseMove",{event:A,mouse_x:v,mouse_y:p,selected:J})}}).click(function(A){A.preventDefault();return false}).dblclick(function(A){var J=A.target.parentNode,p=Bb(A),v=p.tagName;if(J!==B){if(v==="text"&&Ja!=="textedit"){A=N(A.pageX,A.pageY,mb);bb.select(p,A.x,A.y)}if((v==="g"||v==="a")&&oa(p)){Db(p);p=I[0];Ea(true)}B&&Eb();J.tagName!=="g"&&J.tagName!=="a"||J===s().getCurrentLayer()||p===sa.selectorParentGroup||
Kb(p)}}).mouseup(function(A){f.addClones=false;window.removeEventListener("keyup",f.removeClones);I=I.filter(Boolean);if(A.button!==2){var J=wb;wb=null;if(La){var p=N(A.pageX,A.pageY,mb),v=p.x*n;p=p.y*n;var w=v/n,z=p/n,H=pa(da()),L=false;La=false;switch(Ja){case "resize":case "multiselect":if(wa!=null){wa.setAttribute("display","none");hb=[]}Ja="select";case "select":if(I[0]!=null){if(I.length==1){v=I[0];switch(v.tagName){case "g":case "use":case "image":case "foreignObject":break;default:Xa.fill=
v.getAttribute("fill");Xa.fill_opacity=v.getAttribute("fill-opacity");Xa.stroke=v.getAttribute("stroke");Xa.stroke_opacity=v.getAttribute("stroke-opacity");Xa.stroke_width=v.getAttribute("stroke-width");Xa.stroke_dasharray=v.getAttribute("stroke-dasharray");Xa.stroke_linejoin=v.getAttribute("stroke-linejoin");Xa.stroke_linecap=v.getAttribute("stroke-linecap")}if(v.tagName=="text"){Ua.font_size=v.getAttribute("font-size");Ua.font_family=v.getAttribute("font-family")}sa.requestSelector(v).showGrips(true)}Ha();
F=(v=svgedit.browser.isGecko())?F*n:F;C=v?C*n:C;v=Math.abs(z-C);if(v>1||v>1){A=I.length;for(v=0;v<A;++v){if(I[v]==null)break;I[v].firstChild||sa.requestSelector(I[v]).resize()}}else{v=A.target;if(I[0].nodeName==="path"&&I[1]==null)Ma.select(I[0]);else A.shiftKey&&J!=v&&f.removeFromSelection([v])}if(svgedit.browser.supportsNonScalingStroke())if(A=I[0]){A.removeAttribute("style");svgedit.utilities.walkTree(A,function(Z){Z.removeAttribute("style")})}}return;case "zoom":wa!=null&&wa.setAttribute("display",
"none");P("zoomed",{x:Math.min(F,w),y:Math.min(C,z),width:Math.abs(w-F),height:Math.abs(z-C),factor:A.altKey?0.5:2});return;case "fhpath":J=H.getAttribute("points");z=J.indexOf(",");if(L=z>=0?J.indexOf(",",z+1)>=0:J.indexOf(" ",J.indexOf(" ")+1)>=0)H=Ma.smoothPolylineIntoPath(H);break;case "line":J=$(H).attr(["x1","x2","y1","y2"]);L=J.x1!=J.x2||J.y1!=J.y2;break;case "foreignObject":case "square":case "rect":case "image":J=$(H).attr(["width","height"]);L=J.width!=0||J.height!=0||Ja==="image";break;
case "circle":L=H.getAttribute("r")!=0;break;case "ellipse":J=$(H).attr(["rx","ry"]);L=J.rx!=null||J.ry!=null;break;case "fhellipse":if(G.maxx-G.minx>0&&G.maxy-G.miny>0){H=Q({element:"ellipse",curStyles:true,attr:{cx:(G.minx+G.maxx)/2,cy:(G.miny+G.maxy)/2,rx:(G.maxx-G.minx)/2,ry:(G.maxy-G.miny)/2,id:da()}});P("changed",[H]);L=true}break;case "fhrect":if(G.maxx-G.minx>0&&G.maxy-G.miny>0){H=Q({element:"rect",curStyles:true,attr:{x:G.minx,y:G.miny,width:G.maxx-G.minx,height:G.maxy-G.miny,id:da()}});
P("changed",[H]);L=true}break;case "text":L=true;rb([H]);bb.start(H);break;case "path":H=null;La=true;J=Ma.mouseUp(A,H,v,p);H=J.element;L=J.keep;break;case "pathedit":L=true;H=null;Ma.mouseUp(A);break;case "textedit":L=false;H=null;bb.mouseUp(A,v,p);break;case "rotate":L=true;H=null;Ja="select";J=f.undoMgr.finishUndoableChange();J.isEmpty()||xa(J);Ha();P("changed",I)}v=ib("mouseUp",{event:A,mouse_x:v,mouse_y:p},true);$.each(v,function(Z,ea){if(ea){L=ea.keep||L;H=ea.element;La=ea.started||La}});if(!L&&
H!=null){s().releaseId(da());H.parentNode.removeChild(H);H=null;for(v=A.target;v.parentNode.parentNode.tagName=="g";)v=v.parentNode;if((Ja!="path"||!drawn_path)&&v.parentNode.id!="selectorParentGroup"&&v.id!="svgcanvas"&&v.id!="svgroot"){f.setMode("select");rb([v],true)}}else if(H!=null){f.addedNew=true;A=0.2;var M;if(false.beginElement&&H.getAttribute("opacity")!=E.opacity){M=$(false).clone().attr({to:E.opacity,dur:A}).appendTo(H);try{M[0].beginElement()}catch(R){}}else A=0;setTimeout(function(){M&&
M.remove();H.setAttribute("opacity",E.opacity);H.setAttribute("style","pointer-events:inherit");ka(H);if(Ja==="path")Ma.toEditMode(H);else g.selectNew&&rb([H],true);xa(new ya(H));P("changed",[H])},A*1E3)}Sa=null}}});$(a).bind("mousewheel DOMMouseScroll",function(A){if(A.shiftKey){A.preventDefault();mb=k.getScreenCTM().inverse();var J=N(A.pageX,A.pageY,mb);J={x:J.x,y:J.y,width:0,height:0};if(A.wheelDelta)if(A.wheelDelta>=120)J.factor=2;else{if(A.wheelDelta<=-120)J.factor=0.5}else if(A.detail)if(A.detail>
0)J.factor=0.5;else if(A.detail<0)J.factor=2;J.factor&&P("zoomed",J)}})})();var Fb=function(o){$(o).click(function(q){q.preventDefault()})},bb=f.textActions=function(){function o(W){var ha=p.value==="";$(p).focus();if(!arguments.length)if(ha)W=0;else{if(p.selectionEnd!==p.selectionStart)return;W=p.selectionEnd}var ja;ja=H[W];ha||p.setSelectionRange(W,W);v=pa("text_cursor");if(!v){v=document.createElementNS(d,"line");ma(v,{id:"text_cursor",stroke:"#333","stroke-width":1});v=pa("selectorParentGroup").appendChild(v)}z||
(z=setInterval(function(){var X=v.getAttribute("display")==="none";v.setAttribute("display",X?"inline":"none")},600));ha=K(ja.x,L.y);ja=K(ja.x,L.y+L.height);ma(v,{x1:ha.x,y1:ha.y,x2:ja.x,y2:ja.y,visibility:"visible",display:"inline"});w&&w.setAttribute("d","M 0 0")}function q(W,ha,ja){if(W===ha)o(ha);else{ja||p.setSelectionRange(W,ha);w=pa("text_selectblock");if(!w){w=document.createElementNS(d,"path");ma(w,{id:"text_selectblock",fill:"green",opacity:0.5,style:"pointer-events:none"});pa("selectorParentGroup").appendChild(w)}W=
H[W];var X=H[ha];v.setAttribute("visibility","hidden");ha=K(W.x,L.y);ja=K(W.x+(X.x-W.x),L.y);var ta=K(W.x,L.y+L.height);W=K(W.x+(X.x-W.x),L.y+L.height);ma(w,{d:"M"+ha.x+","+ha.y+" L"+ja.x+","+ja.y+" "+W.x+","+W.y+" "+ta.x+","+ta.y+"z",display:"inline"})}}function u(W,ha){var ja=c.createSVGPoint();ja.x=W;ja.y=ha;if(H.length==1)return 0;ja=J.getCharNumAtPosition(ja);if(ja<0){ja=H.length-2;if(W<=H[0].x)ja=0}else if(ja>=H.length-2)ja=H.length-2;var X=H[ja];W>X.x+X.width/2&&ja++;return ja}function F(W,
ha,ja){var X=p.selectionStart;W=u(W,ha);q(Math.min(X,W),Math.max(X,W),!ja)}function C(W,ha){var ja={x:W,y:ha};ja.x/=n;ja.y/=n;if(M){var X=N(ja.x,ja.y,M.inverse());ja.x=X.x;ja.y=X.y}return ja}function K(W,ha){var ja={x:W,y:ha};if(M){var X=N(ja.x,ja.y,M);ja.x=X.x;ja.y=X.y}ja.x*=n;ja.y*=n;return ja}function G(W){q(0,J.textContent.length);$(this).unbind(W)}function A(W){if(ea&&J){var ha=N(W.pageX,W.pageY,mb);ha=C(ha.x*n,ha.y*n);ha=u(ha.x,ha.y);var ja=J.textContent,X=ja.substr(0,ha).replace(/[a-z0-9]+$/i,
"").length;ja=ja.substr(ha).match(/^[a-z0-9]+/i);q(X,(ja?ja[0].length:0)+ha);$(W.target).click(G);setTimeout(function(){$(W.target).unbind("click",G)},300)}}var J,p,v,w,z,H=[],L,M,R,Z,ea;return{select:function(W,ha,ja){J=W;bb.toEditMode(ha,ja)},start:function(W){J=W;bb.toEditMode()},mouseDown:function(W,ha,ja,X){W=C(ja,X);p.focus();o(u(W.x,W.y));R=ja;Z=X},mouseMove:function(W,ha){var ja=C(W,ha);F(ja.x,ja.y)},mouseUp:function(W,ha,ja){var X=C(ha,ja);F(X.x,X.y,true);W.target!==J&&ha<R+2&&ha>R-2&&ja<
Z+2&&ja>Z-2&&bb.toSelectMode(true)},setCursor:o,toEditMode:function(W,ha){rb([J],false);ea=false;Ja="textedit";sa.requestSelector(J).showGrips(false);sa.requestSelector(J);bb.init();$(J).css("cursor","text");if(arguments.length){var ja=C(W,ha);o(u(ja.x,ja.y))}else o();setTimeout(function(){ea=true},300)},toSelectMode:function(W){Ja="select";clearInterval(z);z=null;w&&$(w).attr("display","none");v&&$(v).attr("visibility","hidden");$(J).css("cursor","move");if(W){Ea();$(J).css("cursor","move");P("selected",
[J]);qb([J],true)}J&&!J.textContent.length&&f.deleteSelectedElements();$(p).blur();J=false},setInputElem:function(W){p=W},clear:function(){Ja=="textedit"&&bb.toSelectMode()},init:function(){if(J){if(!J.parentNode){J=I[0];sa.requestSelector(J).showGrips(false)}var W=J.textContent.length,ha=J.getAttribute("transform");L=svgedit.utilities.getBBox(J);M=ha?ba(J):null;H=Array(W);p.focus();$(J).unbind("dblclick",A).dblclick(A);if(!W)var ja={x:L.x+L.width/2,width:0};for(ha=0;ha<W;ha++){var X=J.getStartPositionOfChar(ha);
ja=J.getEndPositionOfChar(ha);if(!svgedit.browser.supportsGoodTextCharPos()){var ta=f.contentW*n;X.x-=ta;ja.x-=ta;X.x/=n;ja.x/=n}H[ha]={x:X.x,y:L.y,width:ja.x-X.x,height:L.height}}H.push({x:ja.x,width:0});q(p.selectionStart,p.selectionEnd,true)}}}}(),Ma=f.pathActions=function(){var o=false,q,u,F;svgedit.path.Path.prototype.endChanges=function(G){if(svgedit.browser.isWebkit()){var A=this.elem;A.setAttribute("d",Ma.convertPath(A))}G=new Ka(this.elem,{d:this.last_d},G);xa(G);P("changed",[this.elem])};
svgedit.path.Path.prototype.addPtsToSelection=function(G){$.isArray(G)||(G=[G]);for(var A=0;A<G.length;A++){var J=G[A],p=this.segs[J];p.ptgrip&&this.selected_pts.indexOf(J)==-1&&J>=0&&this.selected_pts.push(J)}this.selected_pts.sort();A=this.selected_pts.length;for(G=Array(A);A--;){p=this.segs[this.selected_pts[A]];p.select(true);G[A]=p.ptgrip}Ma.canDeleteNodes=true;Ma.closed_subpath=this.subpathIsClosed(this.selected_pts[0]);P("selected",G)};var C=q=null,K=false;this.lastCtrlPoint=[0,0];return{mouseDown:function(G,
A,J,p){if(Ja==="path"){mouse_x=J;mouse_y=p;J=mouse_x/n;A=mouse_y/n;p=pa("path_stretch_line");u=[J,A];if(g.gridSnapping){J=va(J);A=va(A);mouse_x=va(mouse_x);mouse_y=va(mouse_y)}if(!p){p=document.createElementNS(d,"path");ma(p,{id:"path_stretch_line",stroke:"#22C","stroke-width":"0.5",fill:"none"});p=pa("selectorParentGroup").appendChild(p)}p.setAttribute("display","inline");this.stretchy=p;var v=null;if(C){v=C.pathSegList;for(var w=v.numberOfItems,z=6/n,H=false;w;){w--;var L=v.getItem(w),M=L.x;L=L.y;
if(J>=M-z&&J<=M+z&&A>=L-z&&A<=L+z){H=true;break}}z=da();svgedit.path.removePath_(z);z=pa(z);M=v.numberOfItems;if(H){if(w<=1&&M>=2){J=v.getItem(0).x;A=v.getItem(0).y;w=svgedit.path.first_grip?svgedit.path.first_grip[0]/n:v.getItem(0).x;H=svgedit.path.first_grip?svgedit.path.first_grip[1]/n:v.getItem(0).y;G=p.pathSegList.getItem(1);G=G.pathSegType===4?C.createSVGPathSegLinetoAbs(J,A):C.createSVGPathSegCurvetoCubicAbs(J,A,G.x1/n,G.y1/n,w,H);J=C.createSVGPathSegClosePath();v.appendItem(G);v.appendItem(J)}else if(M<
3)return v=false;$(p).remove();element=z;C=null;La=false;if(o){svgedit.path.path.matrix&&Za(z,{},svgedit.path.path.matrix.inverse());J=z.getAttribute("d");p=$(svgedit.path.path.elem).attr("d");$(svgedit.path.path.elem).attr("d",p+J);$(z).remove();svgedit.path.path.matrix&&svgedit.path.recalcRotatedPath();svgedit.path.path.init();Ma.toEditMode(svgedit.path.path.elem);svgedit.path.path.selectPt();return false}}else{if(!$.contains(a,Bb(G))){console.log("Clicked outside canvas");return false}v=C.pathSegList.numberOfItems;
w=C.pathSegList.getItem(v-1);z=w.x;w=w.y;if(G.shiftKey){A=U(z,w,J,A);J=A.x;A=A.y}G=p.pathSegList.getItem(1);G=G.pathSegType===4?C.createSVGPathSegLinetoAbs(ab(J),ab(A)):C.createSVGPathSegCurvetoCubicAbs(ab(J),ab(A),G.x1/n,G.y1/n,G.x2/n,G.y2/n);C.pathSegList.appendItem(G);J*=n;A*=n;p.setAttribute("d",["M",J,A,J,A].join(" "));p=svgedit.path.addCtrlGrip("1c1");G=svgedit.path.addCtrlGrip("0c2");z=svgedit.path.getCtrlLine(1);w=svgedit.path.getCtrlLine(2);p.setAttribute("cx",J);p.setAttribute("cy",A);G.setAttribute("cx",
J);G.setAttribute("cy",A);z.setAttribute("x1",J);z.setAttribute("x2",J);z.setAttribute("y1",A);z.setAttribute("y2",A);w.setAttribute("x1",J);w.setAttribute("x2",J);w.setAttribute("y1",A);w.setAttribute("y2",A);p=v;if(o)p+=svgedit.path.path.segs.length;svgedit.path.addPointGrip(p,J,A)}v=true}else{d_attr="M"+J+","+A+" ";C=Q({element:"path",curStyles:true,attr:{d:d_attr,id:na(),opacity:E.opacity/2}});p.setAttribute("d",["M",mouse_x,mouse_y,mouse_x,mouse_y].join(" "));p=o?svgedit.path.path.segs.length:
0;svgedit.path.addPointGrip(p,mouse_x,mouse_y);svgedit.path.first_grip=null}}else if(svgedit.path.path){svgedit.path.path.storeD();z=G.target.id;if(z.substr(0,14)=="pathpointgrip_"){A=svgedit.path.path.cur_pt=parseInt(z.substr(14));svgedit.path.path.dragging=[J,p];z=svgedit.path.path.segs[A];if(G.shiftKey)z.selected?svgedit.path.path.removePtFromSelection(A):svgedit.path.path.addPtsToSelection(A);else{if(svgedit.path.path.selected_pts.length<=1||!z.selected)svgedit.path.path.clearSelection();svgedit.path.path.addPtsToSelection(A)}}else if(z.indexOf("ctrlpointgrip_")==
0){svgedit.path.path.dragging=[J,p];G=z.split("_")[1].split("c");A=G[0]-0;v=G=G[1]-0;w=svgedit.path.path.segs[A];svgedit.path.path.selectPt(A,G);if(v==2){H=1;z=w.next}else{H=2;z=w.prev}if(!z)return;G=function(R,Z){return Math.sqrt(Math.pow(R.x-Z.x,2)+Math.pow(R.y-Z.y,2))};A={x:w.item["x"+v],y:w.item["y"+v]};v=v==2?{x:w.item.x,y:w.item.y}:{x:z.item.x,y:z.item.y};w={x:z.item["x"+H],y:z.item["y"+H]};z=G(A,v);G=G(w,v);A=Math.abs(Math.round(Math.atan2(A.y-v.y,A.x-v.x)*(180/Math.PI),0)-Math.round(Math.atan2(w.y-
v.y,w.x-v.x)*(180/Math.PI),0))==180;if(Math.abs(z-G)<5&&A){svgedit.path.setLinkControlPoints(true);svgedit.path.is_linked=true}else{svgedit.path.setLinkControlPoints(false);svgedit.path.is_linked=false}}if(!svgedit.path.path.dragging){if(wa==null)wa=sa.getRubberBandBox();ma(wa,{x:J*n,y:p*n,width:0,height:0,display:"inline"},100)}}},mouseMove:function(G,A,J){K=true;var p=!G.altKey;if(Ja==="path"){if(C){var v=C.pathSegList,w=v.numberOfItems-1,z=svgedit.path.addCtrlGrip("1c1"),H=svgedit.path.addCtrlGrip("0c2");
if(u){var L=H.getAttribute("cx")/n||0,M=H.getAttribute("cy")/n||0;z.setAttribute("cx",A);z.setAttribute("cy",J);z.setAttribute("display","inline");G=u[0];z=u[1];v.getItem(w);var R=A/n,Z=J/n;L=p?G+(G-R):L;p=p?z+(z-Z):M;H.setAttribute("cx",L*n);H.setAttribute("cy",p*n);H.setAttribute("display","inline");H=svgedit.path.getCtrlLine(1);M=svgedit.path.getCtrlLine(2);ma(H,{x1:A,y1:J,x2:G*n,y2:z*n,display:"inline"});ma(M,{x1:L*n,y1:p*n,x2:G*n,y2:z*n,display:"inline"});if(w===0)F=[A,J];else{v=v.getItem(w-
1);A=v.x;J=v.y;if(v.pathSegType===6){A+=A-v.x2;J+=J-v.y2}else if(F){A=F[0]/n;J=F[1]/n}svgedit.path.replacePathSeg(6,w,[G,z,this.lastCtrlPoint[0]/n,this.lastCtrlPoint[1]/n,L,p],C)}}else if(p=this.stretchy){w=v.getItem(w);v=A;z=J;if(G.target.id==="pathpointgrip_0"&&svgedit.path.first_grip){v=svgedit.path.first_grip[0];z=svgedit.path.first_grip[1]}if(w.pathSegType===6)svgedit.path.replacePathSeg(6,1,[A,J,(this.lastCtrlPoint[0]/n||w.x+(w.x-w.x2))*n,(this.lastCtrlPoint[1]/n||w.y+(w.y-w.y2))*n,v,z],p);
else F?svgedit.path.replacePathSeg(6,1,[A,J,F[0],F[1],A,J],p):svgedit.path.replacePathSeg(4,1,[A,J],p)}}}else if(svgedit.path.path.dragging){v=svgedit.path.getPointFromGrip({x:svgedit.path.path.dragging[0],y:svgedit.path.path.dragging[1]},svgedit.path.path);G=svgedit.path.getPointFromGrip({x:A,y:J},svgedit.path.path);w=G.x-v.x;v=G.y-v.y;svgedit.path.path.dragging=[A,J];!p||!svgedit.path.is_linked?svgedit.path.setLinkControlPoints(false):svgedit.path.setLinkControlPoints(true);svgedit.path.path.dragctrl?
svgedit.path.path.moveCtrl(w,v):svgedit.path.path.movePts(w,v)}else{svgedit.path.path.selected_pts=[];svgedit.path.path.eachSeg(function(){if(this.next||this.prev){var ea=wa.getBBox(),W=svgedit.path.getGripPt(this);ea=svgedit.math.rectsIntersect(ea,{x:W.x,y:W.y,width:0,height:0});this.select(ea);ea&&svgedit.path.path.selected_pts.push(this.index)}})}},mouseUp:function(G,A,J,p){var v=pa("ctrlpointgrip_1c1"),w=pa("ctrlpointgrip_0c2");this.lastCtrlPoint=v?[v.getAttribute("cx"),v.getAttribute("cy")]:
[J,p];if(!svgedit.path.first_grip&&w)svgedit.path.first_grip=[w.getAttribute("cx"),w.getAttribute("cy")];if(Ja==="path"){u=null;if(!C){A=pa(da());La=false;F=null}return{keep:true,element:A}}if(svgedit.path.path.dragging){A=svgedit.path.path.cur_pt;svgedit.path.path.dragging=false;svgedit.path.path.dragctrl=false;svgedit.path.path.update();K&&svgedit.path.path.endChanges("Move path point(s)");!G.shiftKey&&!K&&svgedit.path.path.selectPt(A)}else if(wa&&wa.getAttribute("display")!="none"){wa.setAttribute("display",
"none");wa.getAttribute("width")<=2&&wa.getAttribute("height")<=2&&Ma.toSelectMode(G.target)}else Ma.toSelectMode(G.target);K=false},toEditMode:function(G){svgedit.path.path=svgedit.path.getPath_(G);Ja="pathedit";Ea();svgedit.path.path.show(true).update();svgedit.path.path.oldbbox=svgedit.utilities.getBBox(svgedit.path.path.elem);o=false},toSelectMode:function(G){var A=G==svgedit.path.path.elem;Ja="select";svgedit.path.path.show(false);q=false;Ea();svgedit.path.path.matrix&&svgedit.path.recalcRotatedPath();
if(A){P("selected",[G]);qb([G],true)}},addSubPath:function(G){if(G){Ja="path";o=true}else{Ma.clear(true);Ma.toEditMode(svgedit.path.path.elem)}},select:function(G){if(q===G){Ma.toEditMode(G);Ja="pathedit"}else q=G},reorient:function(){var G=I[0];if(G)if(oa(G)!=0){var A=new Da("Reorient path"),J={d:G.getAttribute("d"),transform:G.getAttribute("transform")};A.addSubCommand(new Ka(G,J));Ea();this.resetOrientation(G);xa(A);svgedit.path.getPath_(G).show(false).matrix=null;this.clear();qb([G],true);P("changed",
I)}},clear:function(G){q=null;if(C){var A=pa(da());$(pa("path_stretch_line")).remove();G&&$(A).remove();$(pa("pathpointgrip_container")).find("*").attr("display","none");C=F=null;La=false}else Ja=="pathedit"&&this.toSelectMode();svgedit.path.path&&svgedit.path.path.init().show(false)},resetOrientation:function(G){if(G==null||G.nodeName!="path")return false;var A=O(G),J=T(A).matrix;A.clear();G.removeAttribute("transform");A=G.pathSegList;for(var p=A.numberOfItems,v=0;v<p;++v){var w=A.getItem(v),z=
w.pathSegType;if(z!=1){var H=[];$.each(["",1,2],function(L,M){var R=w["x"+M],Z=w["y"+M];if(R!==undefined&&Z!==undefined){R=N(R,Z,J);H.splice(H.length,0,R.x,R.y)}});svgedit.path.replacePathSeg(z,v,H,G)}}e(G,J)},zoomChange:function(){Ja=="pathedit"&&svgedit.path.path.update()},getNodePoint:function(){if(svgedit.path.path){var G=svgedit.path.path.segs[svgedit.path.path.selected_pts.length?svgedit.path.path.selected_pts[0]:1];return{x:G.item.x,y:G.item.y,type:G.type}}},linkControlPoints:function(G){svgedit.path.setLinkControlPoints(G)},
clonePathNode:function(){svgedit.path.path.storeD();for(var G=svgedit.path.path.selected_pts,A=G.length,J=[];A--;){var p=G[A];svgedit.path.path.addSeg(p);J.push(p+A);J.push(p+A+1)}svgedit.path.path.init().addPtsToSelection(J);svgedit.path.path.endChanges("Clone path node(s)")},opencloseSubPath:function(){var G=svgedit.path.path.selected_pts;if(G.length===1){var A=svgedit.path.path.elem,J=A.pathSegList,p=G[0],v=null,w=null;svgedit.path.path.eachSeg(function(M){if(this.type===2&&M<=p)w=this.item;if(M<=
p)return true;if(this.type===2){v=M;return false}else if(this.type===1)return v=false});if(v==null)v=svgedit.path.path.segs.length-1;if(v!==false){var z=A.createSVGPathSegLinetoAbs(w.x,w.y),H=A.createSVGPathSegClosePath();if(v==svgedit.path.path.segs.length){J.appendItem(z);J.appendItem(H)}else{svgedit.path.insertItemBefore(A,H,v);svgedit.path.insertItemBefore(A,z,v)}svgedit.path.path.init().selectPt(v+1)}else if(svgedit.path.path.segs[p].mate){J.removeItem(p);J.removeItem(p);svgedit.path.path.init().selectPt(p-
1)}else{for(G=0;G<J.numberOfItems;G++){var L=J.getItem(G);if(L.pathSegType===2)z=G;else if(G===p)J.removeItem(z);else if(L.pathSegType===1&&p<G){H=G-1;J.removeItem(G);break}}for(G=p-z-1;G--;)svgedit.path.insertItemBefore(A,J.getItem(z),H);A=J.getItem(z);svgedit.path.replacePathSeg(2,z,[A.x,A.y]);G=p;svgedit.path.path.init().selectPt(0)}}},deletePathNode:function(){if(Ma.canDeleteNodes){svgedit.path.path.storeD();for(var G=svgedit.path.path.selected_pts,A=G.length;A--;)svgedit.path.path.deleteSeg(G[A]);
var J=function(){var p=svgedit.path.path.elem.pathSegList,v=p.numberOfItems,w=function(L,M){for(;M--;)p.removeItem(L)};if(v<=1)return true;for(;v--;){var z=p.getItem(v);if(z.pathSegType===1){z=p.getItem(v-1);var H=p.getItem(v-2);if(z.pathSegType===2){w(v-1,2);J();break}else if(H.pathSegType===2){w(v-2,3);J();break}}else if(z.pathSegType===2)if(v>0){z=p.getItem(v-1).pathSegType;if(z===2){w(v-1,1);J();break}else if(z===1&&p.numberOfItems-1===v){w(v,1);J();break}}}return false};J();if(svgedit.path.path.elem.pathSegList.numberOfItems<=
1){f.setMode("select");f.deleteSelectedElements()}else{svgedit.path.path.init();svgedit.path.path.clearSelection();if(window.opera){G=$(svgedit.path.path.elem);G.attr("d",G.attr("d"))}svgedit.path.path.endChanges("Delete path node(s)")}}},smoothPolylineIntoPath:function(G){var A=G.points,J=A.numberOfItems;if(J>=4){var p=A.getItem(0),v=null;G=[];G.push(["M",p.x,",",p.y," C"].join(""));for(var w=1;w<=J-4;w+=3){var z=A.getItem(w),H=A.getItem(w+1),L=A.getItem(w+2);if(v)if((p=svgedit.path.smoothControlPoints(v,
z,p))&&p.length==2){z=G[G.length-1].split(",");z[2]=p[0].x;z[3]=p[0].y;G[G.length-1]=z.join(",");z=p[1]}G.push([z.x,z.y,H.x,H.y,L.x,L.y].join(","));p=L;v=H}for(G.push("L");w<J;++w){H=A.getItem(w);G.push([H.x,H.y].join(","))}G=G.join(" ");G=Q({element:"path",curStyles:true,attr:{id:da(),d:G,fill:"none"}})}return G},setSegType:function(G){svgedit.path.path.setSegType(G)},moveNode:function(G,A){var J=svgedit.path.path.selected_pts;if(J.length){svgedit.path.path.storeD();J=svgedit.path.path.segs[J[0]];
var p={x:0,y:0};p[G]=A-J.item[G];J.move(p.x,p.y);svgedit.path.path.endChanges("Move path point")}},fixEnd:function(G){for(var A=G.pathSegList,J=A.numberOfItems,p,v=0;v<J;++v){var w=A.getItem(v);if(w.pathSegType===2)p=w;if(w.pathSegType===1){w=A.getItem(v-1);if(w.x!=p.x||w.y!=p.y){A=G.createSVGPathSegLinetoAbs(p.x,p.y);svgedit.path.insertItemBefore(G,A,v);Ma.fixEnd(G);break}}}svgedit.browser.isWebkit()&&G.setAttribute("d",Ma.convertPath(G))},convertPath:function(G,A){for(var J=G.pathSegList,p=J.numberOfItems,
v=0,w=0,z="",H=null,L=0;L<p;++L){var M=J.getItem(L),R=M.x||0,Z=M.y||0,ea=M.x1||0,W=M.y1||0,ha=M.x2||0,ja=M.y2||0,X=M.pathSegType,ta=Oa[X]["to"+(A?"Lower":"Upper")+"Case"](),Aa=function(Fa,Ga,Pa){Ga=Ga?" "+Ga.join(" "):"";Pa=Pa?" "+svgedit.units.shortFloat(Pa):"";$.each(Fa,function(Qa,Na){Fa[Qa]=svgedit.units.shortFloat(Na)});z+=ta+Fa.join(" ")+Ga+Pa};switch(X){case 1:z+="z";break;case 12:R-=v;case 13:if(A){v+=R;ta="l"}else{R+=v;v=R;ta="L"}Aa([[R,w]]);break;case 14:Z-=w;case 15:if(A){w+=Z;ta="l"}else{Z+=
w;w=Z;ta="L"}Aa([[v,Z]]);break;case 2:case 4:case 18:R-=v;Z-=w;case 5:case 3:if(H&&J.getItem(L-1).pathSegType===1&&!A){v=H[0];w=H[1]}case 19:if(A){v+=R;w+=Z}else{R+=v;Z+=w;v=R;w=Z}if(X===3)H=[v,w];Aa([[R,Z]]);break;case 6:R-=v;ea-=v;ha-=v;Z-=w;W-=w;ja-=w;case 7:if(A){v+=R;w+=Z}else{R+=v;ea+=v;ha+=v;Z+=w;W+=w;ja+=w;v=R;w=Z}Aa([[ea,W],[ha,ja],[R,Z]]);break;case 8:R-=v;ea-=v;Z-=w;W-=w;case 9:if(A){v+=R;w+=Z}else{R+=v;ea+=v;Z+=w;W+=w;v=R;w=Z}Aa([[ea,W],[R,Z]]);break;case 10:R-=v;Z-=w;case 11:if(A){v+=
R;w+=Z}else{R+=v;Z+=w;v=R;w=Z}Aa([[M.r1,M.r2]],[M.angle,M.largeArcFlag?1:0,M.sweepFlag?1:0],[R,Z]);break;case 16:R-=v;ha-=v;Z-=w;ja-=w;case 17:if(A){v+=R;w+=Z}else{R+=v;ha+=v;Z+=w;ja+=w;v=R;w=Z}Aa([[ha,ja],[R,Z]])}}return z}}}(),yb=this.removeUnusedDefElems=function(){var o=k.getElementsByTagNameNS(d,"defs");if(!o||!o.length)return 0;for(var q=[],u=0,F=["fill","stroke","filter","marker-start","marker-mid","marker-end"],C=F.length,K=k.getElementsByTagNameNS(d,"*"),G=K.length,A=0;A<G;A++){for(var J=
K[A],p=0;p<C;p++)if(J){var v=ia(J.getAttribute(F[p]));v&&q.push(v.substr(1))}(J=ca(J))&&J.indexOf("#")===0&&q.push(J.substr(1))}o=$(o).find("linearGradient, radialGradient, filter, marker, svg, symbol");defelem_ids=[];for(A=o.length;A--;){F=o[A];C=F.id;if(q.indexOf(C)<0){sb[C]=F;F.parentNode.removeChild(F);u++}}return u};this.svgCanvasToString=function(){for(;yb()>0;);Ma.clear(true);$.each(k.childNodes,function(u,F){u&&F.nodeType===8&&F.data.indexOf("Created with")>=0&&k.insertBefore(F,k.firstChild)});
if(B){Eb();rb([B])}$("#canvasGrid").attr("display","none");var o=[];$(k).find("g:data(gsvg)").each(function(){for(var u=this.attributes,F=u.length,C=0;C<F;C++)if(u[C].nodeName=="id"||u[C].nodeName=="style")F--;if(F<=0){u=this.firstChild;o.push(u);$(this).replaceWith(u)}});var q=this.svgToString(k,0);o.length&&$(o).each(function(){tb(this)});return q};this.svgToString=function(o,q){var u=[],F=svgedit.utilities.toXml,C=g.baseUnit,K=RegExp("^-?[\\d\\.]+"+C+"$");if(o){ka(o);var G=o.attributes,A,J,p=o.childNodes;
for(J=0;J<q;J++)u.push(" ");u.push("<");u.push(o.nodeName);if(o.id==="svgcontent"){J=zb();if(C!=="px"){J.w=svgedit.units.convertUnit(J.w,C)+C;J.h=svgedit.units.convertUnit(J.h,C)+C}u.push(' width="'+J.w+'" height="'+J.h+'" xmlns="'+d+'"');var v={};$(o).find("*").andSelf().each(function(){$.each(this.attributes,function(L,M){var R=M.namespaceURI;if(R&&!v[R]&&Ba[R]!=="xmlns"&&Ba[R]!=="xml"){v[R]=true;u.push(" xmlns:"+Ba[R]+'="'+R+'"')}})});J=G.length;for(C=["width","height","xmlns","x","y","viewBox",
"id","overflow"];J--;){A=G.item(J);var w=F(A.nodeValue);if(A.nodeName.indexOf("xmlns:")!==0)if(w!=""&&C.indexOf(A.localName)==-1)if(!A.namespaceURI||Ba[A.namespaceURI]){u.push(" ");u.push(A.nodeName);u.push('="');u.push(w);u.push('"')}}}else{if(o.nodeName==="defs"&&!o.firstChild)return;var z=["-moz-math-font-style","_moz-math-font-style"];for(J=G.length-1;J>=0;J--){A=G.item(J);w=F(A.nodeValue);if(!(z.indexOf(A.localName)>=0))if(w!="")if(w.indexOf("pointer-events")!==0)if(!(A.localName==="class"&&
w.indexOf("se_")===0)){u.push(" ");if(A.localName==="d")w=Ma.convertPath(o,true);if(isNaN(w)){if(K.test(w))w=svgedit.units.shortFloat(w)+C}else w=svgedit.units.shortFloat(w);if($a.apply&&o.nodeName==="image"&&A.localName==="href"&&$a.images&&$a.images==="embed"){var H=Va[w];if(H)w=H}if(!A.namespaceURI||A.namespaceURI==d||Ba[A.namespaceURI]){u.push(A.nodeName);u.push('="');u.push(w);u.push('"')}}}}if(o.hasChildNodes()){u.push(">");q++;G=false;for(J=0;J<p.length;J++){C=p.item(J);switch(C.nodeType){case 1:u.push("\n");
u.push(this.svgToString(p.item(J),q));break;case 3:C=C.nodeValue.replace(/^\s+|\s+$/g,"");if(C!=""){G=true;u.push(F(C)+"")}break;case 4:u.push("\n");u.push(Array(q+1).join(" "));u.push("<![CDATA[");u.push(C.nodeValue);u.push("]]\>");break;case 8:u.push("\n");u.push(Array(q+1).join(" "));u.push("<!--");u.push(C.data);u.push("--\>")}}q--;if(!G){u.push("\n");for(J=0;J<q;J++)u.push(" ")}u.push("</");u.push(o.nodeName);u.push(">")}else u.push("/>")}return u.join("")};this.embedImage=function(o,q){$(new Image).load(function(){var u=
document.createElement("canvas");u.width=this.width;u.height=this.height;u.getContext("2d").drawImage(this,0,0);try{var F=";svgedit_url="+encodeURIComponent(o);F=u.toDataURL().replace(";base64",F+";base64");Va[o]=F}catch(C){Va[o]=false}Ia=o;q&&q(Va[o])}).attr("src",o)};this.setGoodImage=function(o){Ia=o};this.open=function(){};this.save=function(o){Ea();o&&$.extend($a,o);$a.apply=true;o=this.svgCanvasToString();P("saved",o)};this.rasterExport=function(){Ea();var o=[],q={feGaussianBlur:kb.exportNoBlur,
foreignObject:kb.exportNoforeignObject,"[stroke-dasharray]":kb.exportNoDashArray},u=$(k);if(!("font"in $("<canvas>")[0].getContext("2d")))q.text=kb.exportNoText;$.each(q,function(F,C){u.find(F).length&&o.push(C)});q=this.svgCanvasToString();P("exported",{svg:q,issues:o})};this.getSvgString=function(){$a.apply=false;return this.svgCanvasToString()};this.randomizeIds=function(){arguments.length>0&&arguments[0]==false?svgedit.draw.randomizeIds(false,s()):svgedit.draw.randomizeIds(true,s())};var Gb=this.uniquifyElems=
function(o){var q={},u=["filter","linearGradient","pattern","radialGradient","symbol","textPath","use"];svgedit.utilities.walkTree(o,function(A){if(A.nodeType==1){if(A.id){A.id in q||(q[A.id]={elem:null,attrs:[],hrefs:[]});q[A.id].elem=A}$.each(vb,function(p,v){var w=A.getAttributeNode(v);if(w){var z=svgedit.utilities.getUrlFromAttr(w.value);if(z=z?z.substr(1):null){z in q||(q[z]={elem:null,attrs:[],hrefs:[]});q[z].attrs.push(w)}}});var J=svgedit.utilities.getHref(A);if(J&&u.indexOf(A.nodeName)>=
0)if(J=J.substr(1)){J in q||(q[J]={elem:null,attrs:[],hrefs:[]});q[J].hrefs.push(A)}}});for(var F in q)if(F){var C=q[F].elem;if(C){o=na();C.id=o;C=q[F].attrs;for(var K=C.length;K--;){var G=C[K];G.ownerElement.setAttribute(G.name,"url(#"+o+")")}C=q[F].hrefs;for(K=C.length;K--;)svgedit.utilities.setHref(C[K],"#"+o)}}},Hb=this.setUseData=function(o){var q=$(o);if(o.tagName!=="use")q=q.find("use");q.each(function(){var u=ca(this).substr(1);if(u=pa(u)){$(this).data("ref",u);if(u.tagName=="symbol"||u.tagName==
"svg")$(this).data("symbol",u).data("ref",u)}})},Ib=this.convertGradients=function(o){var q=$(o).find("linearGradient, radialGradient");if(!q.length&&svgedit.browser.isWebkit())q=$(o).find("*").filter(function(){return this.tagName.indexOf("Gradient")>=0});q.each(function(){if($(this).attr("gradientUnits")==="userSpaceOnUse"){var u=$(k).find('[fill="url(#'+this.id+')"],[stroke="url(#'+this.id+')"]');if(u.length)if(u=svgedit.utilities.getBBox(u[0]))if(this.tagName==="linearGradient"){var F=$(this).attr(["x1",
"y1","x2","y2"]),C=this.gradientTransform.baseVal;if(C&&C.numberOfItems>0){var K=T(C).matrix;C=N(F.x1,F.y1,K);K=N(F.x2,F.y2,K);F.x1=C.x;F.y1=C.y;F.x2=K.x;F.y2=K.y;this.removeAttribute("gradientTransform")}$(this).attr({x1:(F.x1-u.x)/u.width,y1:(F.y1-u.y)/u.height,x2:(F.x2-u.x)/u.width,y2:(F.y2-u.y)/u.height});this.removeAttribute("gradientUnits")}}})},Lb=this.convertToGroup=function(o){o||(o=I[0]);var q=$(o),u=new Da,F;if(q.data("gsvg")){u=$(o.firstChild).attr(["x","y"]);$(o.firstChild.firstChild).unwrap();
$(o).removeData("gsvg");F=O(o);var C=c.createSVGTransform();C.setTranslate(u.x,u.y);F.appendItem(C);Ra(o);P("selected",[o])}else if(q.data("symbol")){o=q.data("symbol");F=q.attr("transform");C=q.attr(["x","y"]);var K=o.getAttribute("viewBox");if(K){K=K.split(" ");C.x-=+K[0];C.y-=+K[1]}F+=" translate("+(C.x||0)+","+(C.y||0)+")";C=q.prev();u.addSubCommand(new qa(q[0],q[0].nextSibling,q[0].parentNode));q.remove();K=$(k).find("use:data(symbol)").length;q=b.createElementNS(d,"g");for(var G=o.childNodes,
A=0;A<G.length;A++)q.appendChild(G[A].cloneNode(true));if(svgedit.browser.isGecko()){G=$(gb()).children("linearGradient,radialGradient,pattern").clone();$(q).append(G)}F&&q.setAttribute("transform",F);F=o.parentNode;Gb(q);svgedit.browser.isGecko()&&$(gb()).append($(q).find("linearGradient,radialGradient,pattern"));q.id=na();C.after(q);if(F){if(!K){C=o.nextSibling;F.removeChild(o);u.addSubCommand(new qa(o,C,F))}u.addSubCommand(new ya(q))}Hb(q);svgedit.browser.isGecko()?Ib(gb()):Ib(q);svgedit.utilities.walkTreePost(q,
function(J){try{Ra(J)}catch(p){console.log(p)}});$(q).find("a,circle,ellipse,foreignObject,g,image,line,path,polygon,polyline,rect,svg,text,tspan,use").each(function(){if(!this.id)this.id=na()});rb([q]);(o=Db(q,true))&&u.addSubCommand(o);xa(u)}else console.log("Unexpected element to ungroup:",o)};this.setSvgString=function(o){try{var q=svgedit.utilities.text2xml(o);this.prepareSvg(q);var u=new Da("Change Source"),F=k.nextSibling,C=c.removeChild(k);u.addSubCommand(new qa(C,F,c));k=b.adoptNode?b.adoptNode(q.documentElement):
b.importNode(q.documentElement,true);c.appendChild(k);var K=$(k);f.current_drawing_=new svgedit.draw.Drawing(k,m);var G=s().getNonce();G?P("setnonce",G):P("unsetnonce");K.find("image").each(function(){var M=this;Fb(M);var R=ca(this);if(R.indexOf("data:")===0){var Z=R.match(/svgedit_url=(.*?);/);if(Z){var ea=decodeURIComponent(Z[1]);$(new Image).load(function(){M.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",ea)}).attr("src",ea)}}f.embedImage(R)});K.find("svg").each(function(){if(!$(this).closest("defs").length){Gb(this);
var M=this.parentNode;if(M.childNodes.length===1&&M.nodeName==="g"){$(M).data("gsvg",this);M.id=M.id||na()}else tb(this)}});K.find("linearGradient, radialGradient, pattern").appendTo(gb());Hb(K);Ib(K[0]);svgedit.utilities.walkTreePost(k,function(M){try{Ra(M)}catch(R){console.log(R)}});var A={id:"svgcontent",overflow:g.show_outside_canvas?"visible":"hidden"},J=false;if(K.attr("viewBox")){var p=K.attr("viewBox").split(" ");A.width=p[2];A.height=p[3]}else $.each(["width","height"],function(M,R){var Z=
K.attr(R);Z||(Z="100%");if((Z+"").substr(-1)==="%")J=true;else A[R]=ua(R,Z)});xb();K.children().find("a,circle,ellipse,foreignObject,g,image,line,path,polygon,polyline,rect,svg,text,tspan,use").each(function(){if(!this.id)this.id=na()});if(J){var v=getStrokedBBox();A.width=v.width+v.x;A.height=v.height+v.y}if(A.width<=0)A.width=200;if(A.height<=0)A.height=200;K.attr(A);this.contentW=A.width;this.contentH=A.height;$("#canvas_width").val(this.contentW);$("#canvas_height").val(this.contentH);var w=$("#canvas_background");
if(w.length){var z=w.attr("fill-opacity");z=z?parseInt(z)*100:100;fill=this.getPaint(w.attr("fill"),z,"canvas")}else fill=this.getPaint("none",100,"canvas");methodDraw.paintBox.canvas.setPaint(fill);u.addSubCommand(new ya(k));var H=K.attr(["width","height"]);u.addSubCommand(new Ka(c,H));n=1;svgedit.transformlist.resetListMap();Ea();svgedit.path.clearData();c.appendChild(sa.selectorParentGroup);xa(u);P("changed",[k])}catch(L){console.log(L);return false}return true};this.appendSvgString=function(o){try{var q=
new Da("Import Image"),u=svgedit.utilities.text2xml(o);this.prepareSvg(u);var F;F=b.adoptNode?b.adoptNode(u.documentElement):b.importNode(u.documentElement,true);for(Gb(F);F.firstElementChild;){var C=F.firstElementChild;C.id=na();(B||s().getCurrentLayer()).appendChild(C);q.addSubCommand(new ya(C))}Ea()}catch(K){console.log(K);return false}return true};this.getPaint=function(o,q,u){var F=null;if(o.indexOf("url(#")===0){o=(o=svgCanvas.getRefElem(o))?o.cloneNode(true):$("#"+u+"_color defs *")[0];F={alpha:q};
F[o.tagName]=o}else F=o.indexOf("#")===0?{alpha:q,solidColor:o.substr(1)}:{alpha:q,solidColor:"none"};return new $.jGraduate.Paint(F)};this.importSvgString=function(o){try{var q=svgedit.utilities.encode64(o.length+o).substr(0,32),u=false;if(lb[q])if($(lb[q].symbol).parents("#svgroot").length)u=true;var F=new Da("Import SVG");if(u)var C=lb[q].symbol,K=lb[q].xform;else{var G=svgedit.utilities.text2xml(o);this.prepareSvg(G);var A;A=b.adoptNode?b.adoptNode(G.documentElement):b.importNode(G.documentElement,
true);Gb(A);var J=ua("width",A.getAttribute("width")),p=ua("height",A.getAttribute("height")),v=A.getAttribute("viewBox"),w=v?v.split(" "):[0,0,J,p];for(o=0;o<4;++o)w[o]=+w[o];k.getAttribute("width");var z=+k.getAttribute("height");K=p>J?"scale("+z/3/w[3]+")":"scale("+z/3/w[2]+")";K="translate(0) "+K+" translate(0)";C=b.createElementNS(d,"symbol");var H=gb();for(svgedit.browser.isGecko()&&$(A).find("linearGradient, radialGradient, pattern").appendTo(H);A.firstChild;)C.appendChild(A.firstChild);var L=
A.attributes;for(A=0;A<L.length;A++){var M=L[A];C.setAttribute(M.nodeName,M.nodeValue)}C.id=na();lb[q]={symbol:C,xform:K};gb().appendChild(C);F.addSubCommand(new ya(C))}var R=b.createElementNS(d,"use");R.id=na();V(R,"#"+C.id);(B||s().getCurrentLayer()).appendChild(R);F.addSubCommand(new ya(R));Ea();R.setAttribute("transform",K);Ra(R);$(R).data("symbol",C).data("ref",C);qb([R]);xa(F);P("changed",[k])}catch(Z){console.log(Z);return false}return true};var xb=f.identifyLayers=function(){Eb();s().identifyLayers()};
this.createLayer=function(o){var q=new Da("Create Layer");o=s().createLayer(o);q.addSubCommand(new ya(o));xa(q);Ea();P("changed",[o])};this.cloneLayer=function(o){var q=new Da("Duplicate Layer"),u=b.createElementNS(d,"g"),F=b.createElementNS(d,"title");F.textContent=o;u.appendChild(F);F=s().getCurrentLayer();$(F).after(u);F=F.childNodes;for(var C=0;C<F.length;C++){var K=F[C];K.localName!="title"&&u.appendChild(la(K))}Ea();xb();q.addSubCommand(new ya(u));xa(q);f.setCurrentLayer(o);P("changed",[u])};
this.deleteCurrentLayer=function(){var o=s().getCurrentLayer(),q=o.nextSibling,u=o.parentNode;if(o=s().deleteCurrentLayer()){var F=new Da("Delete Layer");F.addSubCommand(new qa(o,q,u));xa(F);Ea();P("changed",[u]);return true}return false};this.setCurrentLayer=function(o){(o=s().setCurrentLayer(svgedit.utilities.toXml(o)))&&Ea();return o};this.renameCurrentLayer=function(o){var q=s();if(q.current_layer){var u=q.current_layer;if(!f.setCurrentLayer(o)){for(var F=new Da("Rename Layer"),C=0;C<q.getNumLayers();++C)if(q.all_layers[C][1]==
u)break;var K=q.getLayerName(C);q.all_layers[C][0]=svgedit.utilities.toXml(o);var G=u.childNodes.length;for(C=0;C<G;++C){var A=u.childNodes.item(C);if(A&&A.tagName=="title"){for(;A.firstChild;)A.removeChild(A.firstChild);A.textContent=o;F.addSubCommand(new Ka(A,{"#text":K}));xa(F);P("changed",[u]);return true}}}q.current_layer=u}return false};this.setCurrentLayerPosition=function(o){var q=s();if(q.current_layer&&o>=0&&o<q.getNumLayers()){for(var u=0;u<q.getNumLayers();++u)if(q.all_layers[u][1]==q.current_layer)break;
if(u==q.getNumLayers())return false;if(u!=o){var F=null,C=q.current_layer.nextSibling;if(o>u){if(o<q.getNumLayers()-1)F=q.all_layers[o+1][1]}else F=q.all_layers[o][1];k.insertBefore(q.current_layer,F);xa(new Ca(q.current_layer,C,k));xb();f.setCurrentLayer(q.getLayerName(o));return true}}return false};this.setLayerVisibility=function(o,q){var u=s(),F=u.getLayerVisibility(o),C=u.setLayerVisibility(o,q);if(C)xa(new Ka(C,{display:F?"inline":"none"},"Layer Visibility"));else return false;if(C==u.getCurrentLayer()){Ea();
Ma.clear()}return true};this.moveSelectedToLayer=function(o){for(var q=null,u=s(),F=0;F<u.getNumLayers();++F)if(u.getLayerName(F)==o){q=u.all_layers[F][1];break}if(!q)return false;o=new Da("Move Elements to Layer");u=I;for(F=u.length;F--;){var C=u[F];if(C){var K=C.nextSibling,G=C.parentNode;q.appendChild(C);o.addSubCommand(new Ca(C,K,G))}}xa(o);return true};this.mergeLayer=function(o){var q=new Da("Merge Layer"),u=s(),F=$(u.current_layer).prev()[0];if(F){for(q.addSubCommand(new qa(u.current_layer,
u.current_layer.nextSibling,k));u.current_layer.firstChild;){var C=u.current_layer.firstChild;if(C.localName=="title"){q.addSubCommand(new qa(C,C.nextSibling,u.current_layer));u.current_layer.removeChild(C)}else{var K=C.nextSibling;F.appendChild(C);q.addSubCommand(new Ca(C,K,u.current_layer))}}k.removeChild(u.current_layer);if(!o){Ea();xb();P("changed",[k]);xa(q)}u.current_layer=F;return q}};this.mergeAllLayers=function(){var o=new Da("Merge all Layers"),q=s();for(q.current_layer=q.all_layers[q.getNumLayers()-
1][1];$(k).children("g").length>1;)o.addSubCommand(f.mergeLayer(true));Ea();xb();P("changed",[k]);xa(o)};var Eb=this.leaveContext=function(){var o=za.length;if(o){for(var q=0;q<o;q++){var u=za[q],F=cb(u,"orig_opac");F!==1?u.setAttribute("opacity",F):u.removeAttribute("opacity");u.setAttribute("style","pointer-events: inherit")}za=[];Ea(true);P("contextset",null)}B=null},Kb=this.setContext=function(o){Eb();if(typeof o==="string")o=pa(o);B=o;$(o).parentsUntil("#svgcontent").andSelf().siblings().each(function(){var q=
this.getAttribute("opacity")||1;cb(this,"orig_opac",q);this.setAttribute("opacity",q*0.33);this.setAttribute("style","pointer-events: none");za.push(this)});Ea();P("contextset",B)};this.clear=function(){Ma.clear();Ea();f.clearSvgContentElement();f.current_drawing_=new svgedit.draw.Drawing(k);f.createLayer("Layer 1");f.undoMgr.resetUndoStack();sa.initGroup();wa=sa.getRubberBandBox();P("cleared")};this.linkControlPoints=Ma.linkControlPoints;this.getContentElem=function(){return k};this.getRootElem=
function(){return c};this.getSelectedElems=function(){return I};var zb=this.getResolution=function(){var o=k.getAttribute("width")/n,q=k.getAttribute("height")/n;return{w:o,h:q,zoom:n}};this.getZoom=function(){return n};this.getVersion=function(){return"svgcanvas.js ($Rev: 2082 $)"};this.setUiStrings=function(o){$.extend(kb,o.notification)};this.setConfig=function(o){$.extend(g,o)};this.getTitle=function(o){if(o=o||I[0]){o=$(o).data("gsvg")||$(o).data("symbol")||o;o=o.childNodes;for(var q=0;q<o.length;q++)if(o[q].nodeName==
"title")return o[q].textContent;return""}};this.setGroupTitle=function(o){var q=I[0];q=$(q).data("gsvg")||q;var u=$(q).children("title"),F=new Da("Set Label");if(o.length)if(u.length){u=u[0];F.addSubCommand(new Ka(u,{"#text":u.textContent}));u.textContent=o}else{u=b.createElementNS(d,"title");u.textContent=o;$(q).prepend(u);F.addSubCommand(new ya(u))}else{F.addSubCommand(new qa(u[0],u.nextSibling,q));u.remove()}xa(F)};this.getDocumentTitle=function(){return f.getTitle(k)};this.setDocumentTitle=function(o){for(var q=
k.childNodes,u=false,F="",C=new Da("Change Image Title"),K=0;K<q.length;K++)if(q[K].nodeName=="title"){u=q[K];F=u.textContent;break}if(!u){u=b.createElementNS(d,"title");k.insertBefore(u,k.firstChild)}if(o.length)u.textContent=o;else u.parentNode.removeChild(u);C.addSubCommand(new Ka(u,{"#text":F}));xa(C)};this.getEditorNS=function(o){o&&k.setAttribute("xmlns:se","http://svg-edit.googlecode.com");return"http://svg-edit.googlecode.com"};this.setResolution=function(o,q){var u=zb(),F=u.w;u=u.h;var C;
if(o=="fit"){var K=getStrokedBBox();if(K){C=new Da("Fit Canvas to Content");var G=pb();qb(G);var A=[],J=[];$.each(G,function(){A.push(K.x*-1);J.push(K.y*-1)});G=f.moveSelectedElements(A,J,true);C.addSubCommand(G);Ea();o=Math.round(K.width);q=Math.round(K.height)}else return false}if(o!=F||q!=u){G=c.suspendRedraw(1E3);C||(C=new Da("Change Image Dimensions"));o=ua("width",o);q=ua("height",q);k.setAttribute("width",o);k.setAttribute("height",q);this.contentW=o;this.contentH=q;C.addSubCommand(new Ka(k,
{width:F,height:u}));k.setAttribute("viewBox",[0,0,o/n,q/n].join(" "));C.addSubCommand(new Ka(k,{viewBox:["0 0",F,u].join(" ")}));xa(C);c.unsuspendRedraw(G);if(background=document.getElementById("canvas_background")){background.setAttribute("x",-1);background.setAttribute("y",-1);background.setAttribute("width",o+2);background.setAttribute("height",q+2)}P("changed",[k])}return[o,q]};this.getOffset=function(){return $(k).attr(["x","y"])};this.setBBoxZoom=function(o,q,u){var F=0.85,C=function(K){if(!K)return false;
var G=Math.min(Math.round(q/K.width*100*F)/100,Math.round(u/K.height*100*F)/100);f.setZoom(G);return{zoom:G,bbox:K}};if(typeof o=="object"){o=o;if(o.width==0||o.height==0){f.setZoom(o.zoom?o.zoom:n*o.factor);return{zoom:n,bbox:o}}return C(o)}switch(o){case "selection":if(!I[0])return;o=$.map(I,function(K){if(K)return K});o=getStrokedBBox(o);break;case "canvas":o=zb();F=0.95;o={width:o.w,height:o.h,x:0,y:0};break;case "content":o=getStrokedBBox();break;case "layer":o=getStrokedBBox(pb(s().getCurrentLayer()));
break;default:return}return C(o)};this.setZoom=function(o){var q=zb();k.setAttribute("viewBox","0 0 "+q.w/o+" "+q.h/o);n=o;$.each(I,function(u,F){F&&sa.requestSelector(F).resize()});Ma.zoomChange();ib("zoomChanged",o)};this.getMode=function(){return Ja};this.setMode=function(o){Ma.clear();bb.clear();$("#workarea").attr("class",o);Xa=I[0]&&I[0].nodeName=="text"?Ua:E;Ja=o};this.getColor=function(o){return Xa[o]};this.setColor=function(o,q,u){E[o]=q;Xa[o+"_paint"]={type:"solidColor"};for(var F=[],C=
I.length;C--;){var K=I[C];if(K)if(K.tagName=="g")svgedit.utilities.walkTree(K,function(G){G.nodeName!="g"&&F.push(G)});else if(o=="fill")K.tagName!="polyline"&&K.tagName!="line"&&F.push(K);else F.push(K)}if(F.length>0)if(u)Ab(o,q,F);else{Ya(o,q,F);P("changed",F)}};var gb=function(){var o=k.getElementsByTagNameNS(d,"defs");if(o.length>0)o=o[0];else{o=b.createElementNS(d,"defs");k.firstChild?k.insertBefore(o,k.firstChild.nextSibling):k.appendChild(o)}return o},Nb=this.setGradient=function(o){if(!(!Xa[o+
"_paint"]||Xa[o+"_paint"].type=="solidColor")){var q=f[o+"Grad"],u=Mb(q),F=gb();if(u)q=u;else{q=F.appendChild(b.importNode(q,true));q.id=na()}f.setColor(o,"url(#"+q.id+")");if(o=="canvas")(o=document.getElementById("canvas_background"))&&o.setAttribute("fill","url(#"+q.id+")")}},Mb=function(o){var q=gb();q=$(q).find("linearGradient, radialGradient");for(var u=q.length,F=["r","cx","cy","fx","fy"];u--;){var C=q[u];if(o.tagName=="linearGradient"){if(o.getAttribute("x1")!=C.getAttribute("x1")||o.getAttribute("y1")!=
C.getAttribute("y1")||o.getAttribute("x2")!=C.getAttribute("x2")||o.getAttribute("y2")!=C.getAttribute("y2"))continue}else{var K=$(o).attr(F),G=$(C).attr(F),A=false;$.each(F,function(H,L){if(K[L]!=G[L])A=true});if(A)continue}var J=o.getElementsByTagNameNS(d,"stop"),p=C.getElementsByTagNameNS(d,"stop");if(J.length==p.length){for(var v=J.length;v--;){var w=J[v],z=p[v];if(w.getAttribute("offset")!=z.getAttribute("offset")||w.getAttribute("stop-opacity")!=z.getAttribute("stop-opacity")||w.getAttribute("stop-color")!=
z.getAttribute("stop-color"))break}if(v==-1)return C}}return null};this.setPaint=function(o,q){var u=new $.jGraduate.Paint(q);this.setPaintOpacity(o,u.alpha/100,true);Xa[o+"_paint"]=u;switch(u.type){case "solidColor":if(u.solidColor!="none"&&u.solidColor!="#none")this.setColor(o,"#"+u.solidColor);else{this.setColor(o,"none");document.querySelector(o=="fill"?"#fill_color rect":"#stroke_color rect").setAttribute("fill","none")}break;case "linearGradient":case "radialGradient":f[o+"Grad"]=u[u.type];
Nb(o)}};this.getStrokeWidth=function(){return Xa.stroke_width};this.setStrokeWidth=function(o){if(o==0&&["line","path"].indexOf(Ja)>=0)f.setStrokeWidth(1);else{Xa.stroke_width=o;for(var q=[],u=I.length;u--;){var F=I[u];if(F)F.tagName=="g"?svgedit.utilities.walkTree(F,function(C){C.nodeName!="g"&&q.push(C)}):q.push(F)}if(q.length>0){Ya("stroke-width",o,q);P("changed",I)}}};this.setStrokeAttr=function(o,q){E[o.replace("-","_")]=q;for(var u=[],F=I.length;F--;){var C=I[F];if(C)C.tagName=="g"?svgedit.utilities.walkTree(C,
function(K){K.nodeName!="g"&&u.push(K)}):u.push(C)}if(u.length>0){Ya(o,q,u);P("changed",I)}};this.getStyle=function(){return E};this.getOpacity=function(){return E.opacity};this.setOpacity=function(o){E.opacity=o;Ya("opacity",o)};this.getFillOpacity=function(){return E.fill_opacity};this.getStrokeOpacity=function(){return E.stroke_opacity};this.setPaintOpacity=function(o,q,u){E[o+"_opacity"]=q;u?Ab(o+"-opacity",q):Ya(o+"-opacity",q)};this.getBlur=function(o){var q=0;if(o)if(o.getAttribute("filter"))if(o=
pa(o.id+"_blur"))q=o.firstChild.getAttribute("stdDeviation");return q};(function(){function o(){var C=f.undoMgr.finishUndoableChange();q.addSubCommand(C);xa(q);u=q=null}var q=null,u=null,F=false;f.setBlurNoUndo=function(C){if(u)if(C===0){Ab("filter","");F=true}else{var K=I[0];F&&Ab("filter","url(#"+K.id+"_blur)");if(svgedit.browser.isWebkit()){K.removeAttribute("filter");K.setAttribute("filter","url(#"+K.id+"_blur)")}Ab("stdDeviation",C,[u.firstChild]);f.setBlurOffsets(u,C)}else f.setBlur(C)};f.setBlurOffsets=
function(C,K){if(K>3)ma(C,{x:"-50%",y:"-50%",width:"200%",height:"200%"},100);else if(!svgedit.browser.isWebkit()){C.removeAttribute("x");C.removeAttribute("y");C.removeAttribute("width");C.removeAttribute("height")}};f.setBlur=function(C,K){if(q)o();else{var G=I[0],A=G.id;u=pa(A+"_blur");C-=0;var J=new Da;if(u){if(C===0)u=null}else{var p=Q({element:"feGaussianBlur",attr:{"in":"SourceGraphic",stdDeviation:C}});u=Q({element:"filter",attr:{id:A+"_blur"}});u.appendChild(p);gb().appendChild(u);J.addSubCommand(new ya(u))}p=
{filter:G.getAttribute("filter")};if(C===0){G.removeAttribute("filter");J.addSubCommand(new Ka(G,p))}else{Ya("filter","url(#"+A+"_blur)");J.addSubCommand(new Ka(G,p));f.setBlurOffsets(u,C);q=J;f.undoMgr.beginUndoableChange("stdDeviation",[u?u.firstChild:null]);if(K){f.setBlurNoUndo(C);o()}}}}})();this.getBold=function(){var o=true;I.filter(Boolean).forEach(function(q){if(q.getAttribute("font-weight")!="bold")o=false});return o};this.setBold=function(o){var q=I.filter(Boolean);q.forEach(function(u){if(u!=
null&&u.tagName=="text")Ya("font-weight",o?"bold":"normal")});q[0].textContent||bb.setCursor()};this.getItalic=function(){var o=true;I.filter(Boolean).forEach(function(q){if(q.getAttribute("font-style")!="italic")o=false});return o};this.setItalic=function(o){var q=I.filter(Boolean);q.forEach(function(u){if(u!=null&&u.tagName=="text")Ya("font-style",o?"italic":"normal")});q[0].textContent||bb.setCursor()};this.getFontFamily=function(){return Ua.font_family};this.setFontFamily=function(o){Ua.font_family=
o;Ya("font-family",o);I[0]&&!I[0].textContent&&bb.setCursor()};this.setFontColor=function(o){Ua.fill=o;Ya("fill",o)};this.getFontSize=function(){return Ua.fill};this.getFontSize=function(){return Ua.font_size};this.setFontSize=function(o){Ua.font_size=o;Ya("font-size",o);I[0].textContent||bb.setCursor()};this.getText=function(){var o=I[0];if(o==null)return"";return o.textContent};this.setTextContent=function(o){Ya("#text",o);bb.init(o);bb.setCursor()};this.setImageURL=function(o){var q=I[0];if(q){var u=
$(q).attr(["width","height"]);u=!u.width||!u.height;var F=ca(q);if(F!==o)u=true;else if(!u)return;var C=new Da("Change Image URL");V(q,o);C.addSubCommand(new Ka(q,{"#href":F}));u?$(new Image).load(function(){var K=$(q).attr(["width","height"]);$(q).attr({width:this.width,height:this.height});sa.requestSelector(q).resize();C.addSubCommand(new Ka(q,K));xa(C);P("changed",[q])}).attr("src",o):xa(C)}};this.setLinkURL=function(o){var q=I[0];if(q){if(q.tagName!=="a"){q=$(q).parents("a");if(q.length)q=q[0];
else return}var u=ca(q);if(u!==o){var F=new Da("Change Link URL");V(q,o);F.addSubCommand(new Ka(q,{"#href":u}));xa(F)}}};this.elementsAreSame=function(o){return!o.length||o[0]==null?null:I.every(function(q){return q&&I[0]?q.nodeName==I[0].nodeName:null})};this.setRectRadius=function(o){f.elementsAreSame(I)&&I[0].tagName=="rect"&&I.forEach(function(q){var u=q.getAttribute("rx");if(u!=o){q.setAttribute("rx",o);q.setAttribute("ry",o);xa(new Ka(q,{rx:u,ry:u},"Radius"));P("changed",[q])}})};this.makeHyperlink=
function(o){f.groupSelectedElements("a",o)};this.removeHyperlink=function(){f.ungroupSelectedElement()};this.setSegType=function(o){Ma.setSegType(o)};this.convertToPath=function(o,q){if(o==null)$.each(I,function(ea,W){W&&f.convertToPath(W)});else{if(!q)var u=new Da("Convert element to Path");var F=q?{}:{fill:E.fill,"fill-opacity":E.fill_opacity,stroke:E.stroke,"stroke-width":E.stroke_width,"stroke-dasharray":E.stroke_dasharray,"stroke-linejoin":E.stroke_linejoin,"stroke-linecap":E.stroke_linecap,
"stroke-opacity":E.stroke_opacity,opacity:E.opacity,visibility:"hidden"};$.each(["marker-start","marker-end","marker-mid","filter","clip-path"],function(){if(o.getAttribute(this))F[this]=o.getAttribute(this)});var C=Q({element:"path",attr:F}),K=o.getAttribute("transform");K&&C.setAttribute("transform",K);var G=o.id,A=o.parentNode;o.nextSibling?A.insertBefore(C,o):A.appendChild(C);var J="",p=function(ea){$.each(ea,function(W,ha){var ja=ha[1];J+=ha[0];for(var X=0;X<ja.length;X+=2)J+=ja[X]+","+ja[X+
1]+" "})},v=1.81;switch(o.tagName){case "ellipse":case "circle":var w=$(o).attr(["rx","ry","cx","cy"]),z=w.cx,H=w.cy,L=w.rx;w=w.ry;if(o.tagName=="circle")L=w=$(o).attr("r");p([["M",[z-L,H]],["C",[z-L,H-w/v,z-L/v,H-w,z,H-w]],["C",[z+L/v,H-w,z+L,H-w/v,z+L,H]],["C",[z+L,H+w/v,z+L/v,H+w,z,H+w]],["C",[z-L/v,H+w,z-L,H+w/v,z-L,H]],["Z",[]]]);break;case "path":J=o.getAttribute("d");break;case "line":w=$(o).attr(["x1","y1","x2","y2"]);J="M"+w.x1+","+w.y1+"L"+w.x2+","+w.y2;break;case "polyline":case "polygon":J=
"M"+o.getAttribute("points");break;case "rect":w=$(o).attr(["rx","ry"]);L=w.rx;w=w.ry;var M=o.getBBox();z=M.x;H=M.y;var R=M.width;M=M.height;v=4-v;if(!L&&!w)p([["M",[z,H]],["L",[z+R,H]],["L",[z+R,H+M]],["L",[z,H+M]],["L",[z,H]],["Z",[]]]);else{w||(w=L);p([["M",[z,H+w]],["C",[z,H+w/v,z+L/v,H,z+L,H]],["L",[z+R-L,H]],["C",[z+R-L/v,H,z+R,H+w/v,z+R,H+w]],["L",[z+R,H+M-w]],["C",[z+R,H+M-w/v,z+R-L/v,H+M,z+R-L,H+M]],["L",[z+L,H+M]],["C",[z+L/v,H+M,z,H+M-w/v,z,H+M-w]],["L",[z,H+w]],["Z",[]]])}break;default:C.parentNode.removeChild(C)}J&&
C.setAttribute("d",J);if(q){Ma.resetOrientation(C);u=false;try{u=C.getBBox()}catch(Z){}C.parentNode.removeChild(C);return u}else{if(K){K=O(C);ga(K)&&Ma.resetOrientation(C)}u.addSubCommand(new qa(o,o.nextSibling,A));u.addSubCommand(new ya(C));Ea();o.parentNode.removeChild(o);C.setAttribute("id",G);C.removeAttribute("visibility");qb([C],true);xa(u)}}};var Ab=this.changeSelectedAttributeNoUndo=function(o,q,u){var F=c.suspendRedraw(1E3);Ja=="pathedit"&&Ma.moveNode(o,q);u=u||I;for(var C=u.length,K=["g",
"polyline","path"];C--;){var G=u[C];if(G!=null){Ja==="textedit"&&o!=="#text"&&G.textContent.length&&bb.toSelectMode(G);if((o==="x"||o==="y")&&K.indexOf(G.tagName)>=0){var A=getStrokedBBox([G]);f.moveSelectedElements((o==="x"?q-A.x:0)*n,(o==="y"?q-A.y:0)*n,true)}else{A=o==="#text"?G.textContent:G.getAttribute(o);if(A==null)A="";if(A!==String(q)){if(o=="#text"){svgedit.utilities.getBBox(G);G.textContent=q}else o=="#href"?V(G,q):G.setAttribute(o,q);I.indexOf(G)>=0&&setTimeout(function(){G.parentNode&&
sa.requestSelector(G).resize()},0);A=oa(G);if(A!=0&&o!="transform")for(var J=O(G),p=J.numberOfItems;p--;)if(J.getItem(p).type==4){J.removeItem(p);var v=svgedit.utilities.getBBox(G),w=N(v.x+v.width/2,v.y+v.height/2,T(J).matrix);v=w.x;w=w.y;var z=c.createSVGTransform();z.setRotate(A,v,w);J.insertItemBefore(z,p);break}}}}}c.unsuspendRedraw(F)},Ya=this.changeSelectedAttribute=function(o,q,u){u=u||I;f.undoMgr.beginUndoableChange(o,u);Ab(o,q,u);o=f.undoMgr.finishUndoableChange();o.isEmpty()||xa(o)};this.deleteSelectedElements=
function(){for(var o=new Da("Delete Elements"),q=I.length,u=[],F=0;F<q;++F){var C=I[F];if(C==null)break;var K=C.parentNode,G=C;sa.releaseSelector(G);svgedit.path.removePath_(G.id);if(K.tagName==="a"&&K.childNodes.length===1){G=K;K=K.parentNode}var A=G.nextSibling;G=K.removeChild(G);u.push(C);I[F]=null;o.addSubCommand(new qa(G,A,K))}o.isEmpty()||xa(o);P("changed",u);Ea()};this.cutSelectedElements=function(){for(var o=new Da("Cut Elements"),q=I.length,u=[],F=0;F<q;++F){var C=I[F];if(C==null)break;var K=
C.parentNode,G=C;sa.releaseSelector(G);svgedit.path.removePath_(G.id);var A=G.nextSibling;G=K.removeChild(G);u.push(C);I[F]=null;o.addSubCommand(new qa(G,A,K))}o.isEmpty()||xa(o);P("changed",u);Ea();f.clipBoard=u};this.copySelectedElements=function(){f.clipBoard=$.merge([],I)};this.pasteElements=function(){var o=f.clipBoard,q=o.length;if(q){for(var u=[],F=new Da("Paste elements");q--;){var C=o[q];if(C){var K=la(C);if(!pa(C.id))K.id=C.id;u.push(K);(B||s().getCurrentLayer()).appendChild(K);F.addSubCommand(new ya(K))}}svgCanvas.clearSelection();
setTimeout(function(){rb(u)},100);xa(F);P("changed",u)}};this.groupSelectedElements=function(o){o||(o="g");var q="";switch(o){case "a":q="Make hyperlink";var u="";if(arguments.length>1)u=arguments[1];break;default:o="g";q="Group Elements"}q=new Da(q);var F=Q({element:o,attr:{id:na()}});o==="a"&&V(F,u);q.addSubCommand(new ya(F));for(u=I.length;u--;){var C=I[u];if(C!=null){if(C.parentNode.tagName==="a"&&C.parentNode.childNodes.length===1)C=C.parentNode;var K=C.nextSibling,G=C.parentNode;F.appendChild(C);
q.addSubCommand(new Ca(C,K,G))}}q.isEmpty()||xa(q);rb([F],true)};var Db=this.pushGroupProperties=function(o,q){var u=o.childNodes,F=u.length,C=o.getAttribute("transform"),K=O(o),G=T(K).matrix,A=new Da("Push group properties"),J=0,p=oa(o),v=$(o).attr(["filter","opacity"]),w,z;for(J=0;J<F;J++){var H=u[J];if(H.nodeType===1){if(v.opacity!==null&&v.opacity!==1){H.getAttribute("opacity");var L=Math.round((H.getAttribute("opacity")||1)*v.opacity*100)/100;Ya("opacity",L,[H])}if(v.filter){var M=L=this.getBlur(H);
z||(z=this.getBlur(o));if(L)L=z-0+(L-0);else if(L===0)L=z;if(M)w=S(H.getAttribute("filter"));else if(w){w=la(w);gb().appendChild(w)}else w=S(v.filter);w.id=H.id+"_"+(w.firstChild.tagName==="feGaussianBlur"?"blur":"filter");Ya("filter","url(#"+w.id+")",[H]);if(L){Ya("stdDeviation",L,[w.firstChild]);f.setBlurOffsets(w,L)}}L=O(H);if(~H.tagName.indexOf("Gradient"))L=null;if(L)if(H.tagName!=="defs")if(K.numberOfItems){if(p&&K.numberOfItems==1){var R=K.getItem(0).matrix,Z=c.createSVGMatrix();if(M=oa(H))Z=
L.getItem(0).matrix;var ea=svgedit.utilities.getBBox(H),W=T(L).matrix,ha=N(ea.x+ea.width/2,ea.y+ea.height/2,W);ea=p+M;W=c.createSVGTransform();W.setRotate(ea,ha.x,ha.y);R=aa(R,Z,W.matrix.inverse());M&&L.removeItem(0);if(ea)L.numberOfItems?L.insertItemBefore(W,0):L.appendItem(W);if(R.e||R.f){M=c.createSVGTransform();M.setTranslate(R.e,R.f);L.numberOfItems?L.insertItemBefore(M,0):L.appendItem(M)}}else{M=H.getAttribute("transform");R={};R.transform=M?M:"";M=c.createSVGTransform();R=T(L).matrix;Z=R.inverse();
R=aa(Z,G,R);M.setMatrix(R);L.appendItem(M)}(H=Ra(H))&&A.addSubCommand(H)}}}if(C){R={};R.transform=C;o.setAttribute("transform","");o.removeAttribute("transform");A.addSubCommand(new Ka(o,R))}if(q&&!A.isEmpty())return A};this.ungroupSelectedElement=function(){var o=I[0];if($(o).data("gsvg")||$(o).data("symbol"))Lb(o);else if(o.tagName==="use"){var q=pa(ca(o).substr(1));$(o).data("symbol",q).data("ref",q);Lb(o)}else{q=$(o).parents("a");if(q.length)o=q[0];if(o.tagName==="g"||o.tagName==="a"){q=new Da("Ungroup Elements");
var u=Db(o,true);u&&q.addSubCommand(u);u=o.parentNode;for(var F=o.nextSibling,C=Array(o.childNodes.length),K=0;o.firstChild;){var G=o.firstChild,A=G.nextSibling,J=G.parentNode;if(G.tagName==="title"){q.addSubCommand(new qa(G,G.nextSibling,J));J.removeChild(G)}else{C[K++]=G=u.insertBefore(G,F);q.addSubCommand(new Ca(G,A,J))}}Ea();F=o.nextSibling;o=u.removeChild(o);q.addSubCommand(new qa(o,F,u));q.isEmpty()||xa(q);qb(C)}}};this.moveToTopSelectedElement=function(){var o=I.filter(Boolean).reverse(),q=
new Da("Move to top");o.forEach(function(u){u=u;var F=u.parentNode,C=u.nextSibling;u=u.parentNode.appendChild(u);if(C!=u.nextSibling){q.addSubCommand(new Ca(u,C,F,"top"));P("changed",[u])}q.isEmpty()||xa(q)})};this.moveToBottomSelectedElement=function(){var o=I.filter(Boolean).reverse(),q=new Da("Move to top");o.forEach(function(u){u=u;var F=u.parentNode,C=u.nextSibling,K=u.parentNode.firstChild;if(K.tagName=="title")K=K.nextSibling;if(K.tagName=="defs")K=K.nextSibling;u=u.parentNode.insertBefore(u,
K);if(C!=u.nextSibling){q.addSubCommand(new Ca(u,C,F,"bottom"));P("changed",[u])}});q.isEmpty()||xa(q)};this.moveUpDownSelected=function(o){var q=I.filter(Boolean);o=="Down"&&q.reverse();var u=new Da("Move "+o);q.forEach(function(F){hb=[];var C,K,G=$(ob(getStrokedBBox([F]))).toArray();o=="Down"&&G.reverse();$.each(G,function(){if(K){C=this;return false}else if(this==F)K=true});if(C){G=F.parentNode;var A=F.nextSibling;$(C)[o=="Down"?"before":"after"](F);if(A!=F.nextSibling){u.addSubCommand(new Ca(F,
A,G,"Move "+o));P("changed",[F])}}});u.isEmpty()||xa(u)};this.moveSelectedElements=function(o,q,u){if(o.constructor!=Array){o/=n;q/=n}u=u||true;for(var F=new Da("position"),C=I.length;C--;){var K=I[C];if(K!=null){var G=c.createSVGTransform(),A=O(K);o.constructor==Array?G.setTranslate(o[C],q[C]):G.setTranslate(o,q);A.numberOfItems?A.insertItemBefore(G,0):A.appendItem(G);(G=Ra(K))&&F.addSubCommand(G);sa.requestSelector(K).resize()}}if(!F.isEmpty()){u&&xa(F);P("changed",I);return F}};this.cloneSelectedElements=
function(o,q,u){for(var F=new Da("Clone Elements"),C=I.length,K=0;K<C;++K){var G=I[K];if(G==null)break}C=I.slice(0,K);this.clearSelection(true);K=C.length;for(clones=[];K--;){G=C[K];var A=la(C[K]),J=B||s().getCurrentLayer();if(u){tlist=O(A);tlist.removeItem(u);Ra(A);J.insertBefore(A,G)}else J.appendChild(A);clones.push(A);F.addSubCommand(new ya(A))}if(!F.isEmpty()){qb(C.reverse());u||this.moveSelectedElements(o,q,false);xa(F)}return clones};this.alignSelectedElements=function(o,q){var u=[],F=Number.MAX_VALUE,
C=Number.MIN_VALUE,K=Number.MAX_VALUE,G=Number.MIN_VALUE,A=Number.MIN_VALUE,J=Number.MIN_VALUE,p=I.length;if(p){for(var v=0;v<p;++v){if(I[v]==null)break;u[v]=getStrokedBBox([I[v]]);switch(q){case "smallest":if((o=="l"||o=="c"||o=="r")&&(A==Number.MIN_VALUE||A>u[v].width)||(o=="t"||o=="m"||o=="b")&&(J==Number.MIN_VALUE||J>u[v].height)){F=u[v].x;K=u[v].y;C=u[v].x+u[v].width;G=u[v].y+u[v].height;A=u[v].width;J=u[v].height}break;case "largest":if((o=="l"||o=="c"||o=="r")&&(A==Number.MIN_VALUE||A<u[v].width)||
(o=="t"||o=="m"||o=="b")&&(J==Number.MIN_VALUE||J<u[v].height)){F=u[v].x;K=u[v].y;C=u[v].x+u[v].width;G=u[v].y+u[v].height;A=u[v].width;J=u[v].height}break;default:if(u[v].x<F)F=u[v].x;if(u[v].y<K)K=u[v].y;if(u[v].x+u[v].width>C)C=u[v].x+u[v].width;if(u[v].y+u[v].height>G)G=u[v].y+u[v].height}}if(q=="page"){K=F=0;C=f.contentW;G=f.contentH}A=Array(p);J=Array(p);for(v=0;v<p;++v){if(I[v]==null)break;var w=u[v];A[v]=0;J[v]=0;switch(o){case "l":A[v]=F-w.x;break;case "c":A[v]=(F+C)/2-(w.x+w.width/2);break;
case "r":A[v]=C-(w.x+w.width);break;case "t":J[v]=K-w.y;break;case "m":J[v]=(K+G)/2-(w.y+w.height/2);break;case "b":J[v]=G-(w.y+w.height)}}this.moveSelectedElements(A,J)}};this.contentW=zb().w;this.contentH=zb().h;this.updateCanvas=function(o,q){c.setAttribute("width",o);c.setAttribute("height",q);var u=$("#canvasBackground")[0],F=k.getAttribute("x"),C=k.getAttribute("y"),K=o/2-this.contentW*n/2,G=q/2-this.contentH*n/2;ma(k,{width:this.contentW*n,height:this.contentH*n,x:K,y:G,viewBox:"0 0 "+this.contentW+
" "+this.contentH});ma(u,{width:k.getAttribute("width"),height:k.getAttribute("height"),x:K,y:G});(u=pa("background_image"))&&ma(u,{width:"100%",height:"100%"});sa.selectorParentGroup.setAttribute("transform","translate("+K+","+G+")");return{x:K,y:G,old_x:F,old_y:C,d_x:K-F,d_y:G-C}};this.setBackground=function(o,q){var u=pa("canvasBackground"),F=$(u).find("rect")[0],C=pa("background_image");F.setAttribute("fill",o);if(q){if(!C){C=b.createElementNS(d,"image");ma(C,{id:"background_image",width:"100%",
height:"100%",preserveAspectRatio:"xMinYMin",style:"pointer-events:none"})}V(C,q);u.appendChild(C)}else C&&C.parentNode.removeChild(C)};this.cycleElement=function(o){var q=I[0],u=false,F=pb(B||s().getCurrentLayer());if(F.length){if(q==null){o=o?F.length-1:0;u=F[o]}else for(var C=F.length;C--;)if(F[C]==q){o=o?C-1:C+1;if(o>=F.length)o=0;else if(o<0)o=F.length-1;u=F[o];break}rb([u],true);P("selected",I)}};this.clear();this.getPrivateMethods=function(){return{addCommandToHistory:xa,setGradient:Nb,addSvgElementFromJson:Q,
assignAttributes:ma,BatchCommand:Da,call:P,ChangeElementCommand:Ka,copyElem:la,ffClone:fa,findDefs:gb,findDuplicateGradient:Mb,getElem:pa,getId:da,getIntersectionList:ob,getMouseTarget:Bb,getNextId:na,getPathBBox:Y,getUrlFromAttr:ia,hasMatrixTransform:ga,identifyLayers:xb,InsertElementCommand:ya,isIdentity:svgedit.math.isIdentity,logMatrix:Wa,matrixMultiply:aa,MoveElementCommand:Ca,preventClickDefault:Fb,recalculateAllSelectedDimensions:Ha,recalculateDimensions:Ra,remapElement:Za,RemoveElementCommand:qa,
removeUnusedDefElems:yb,round:ab,runExtensions:ib,sanitizeSvg:ra,SVGEditTransformList:svgedit.transformlist.SVGTransformList,toString:toString,transformBox:svgedit.math.transformBox,transformListToTransform:T,transformPoint:N,walkTree:svgedit.utilities.walkTree}}};(function(){document.addEventListener("touchstart",touchHandler,true);document.addEventListener("touchmove",touchHandler,true);document.addEventListener("touchend",touchHandler,true);document.addEventListener("touchcancel",touchHandler,true);if(!window.methodDraw)window.methodDraw=function(a){function h(c,k){var m=e.setSvgString(c)!==false;k=k||a.noop;m?k(true):a.alert(uiStrings.notification.errorLoadingSVG,function(){k(false)})}var e,d={},g=false;curConfig={canvas_expansion:1,dimensions:[580,400],
initFill:{color:"fff",opacity:1},initStroke:{width:1.5,color:"000",opacity:1},initOpacity:1,imgPath:"images/",extPath:"extensions/",jGraduatePath:"jgraduate/images/",extensions:[],initTool:"select",wireframe:false,colorPickerCSS:false,gridSnapping:false,gridColor:"#000",baseUnit:"px",snappingStep:10,showRulers:svgedit.browser.isTouch()?false:true,show_outside_canvas:false,no_save_warning:true,initFont:"Helvetica, Arial, sans-serif"};uiStrings=d.uiStrings={common:{ok:"OK",cancel:"Cancel",key_up:"Up",
key_down:"Down",key_backspace:"Backspace",key_del:"Del"},layers:{layer:"Layer"},notification:{invalidAttrValGiven:"Invalid value given",noContentToFitTo:"No content to fit to",dupeLayerName:"There is already a layer named that!",enterUniqueLayerName:"Please enter a unique layer name",enterNewLayerName:"Please enter the new layer name",layerHasThatName:"Layer already has that name",QmoveElemsToLayer:'Move selected elements to layer "%s"?',QwantToClear:"<strong>Do you want to clear the drawing?</strong>\nThis will also erase your undo history",
QwantToOpen:"Do you want to open a new file?\nThis will also erase your undo history",QerrorsRevertToSource:"There were parsing errors in your SVG source.\nRevert back to original SVG source?",QignoreSourceChanges:"Ignore changes made to SVG source?",featNotSupported:"Feature not supported",enterNewImgURL:"Enter the new image URL",defsFailOnSave:"NOTE: Due to a bug in your browser, this image may appear wrong (missing gradients or elements). It will however appear correct once actually saved.",loadingImage:"Loading image, please wait...",
saveFromBrowser:'Select "Save As..." in your browser to save this image as a %s file.',noteTheseIssues:"Also note the following issues: ",unsavedChanges:"There are unsaved changes.",enterNewLinkURL:"Enter the new hyperlink URL",errorLoadingSVG:"Error: Unable to load SVG data",URLloadFail:"Unable to load from URL",retrieving:'Retrieving "%s" ...'}};var l={},f={};d.curConfig=curConfig;d.tool_scale=1;d.setConfig=function(c){a.extend(true,curConfig,c);if(c.extensions)curConfig.extensions=c.extensions};
d.setCustomHandlers=function(c){d.ready(function(){if(c.open){a('#tool_open > input[type="file"]').remove();a("#tool_open").show();e.open=c.open}if(c.save){d.show_save_warning=false;e.bind("saved",c.save)}c.pngsave&&e.bind("exported",c.pngsave);f=c})};d.randomizeIds=function(){e.randomizeIds(arguments)};d.init=function(){(function(){var p=window.opener;if(p)try{var v=p.document.createEvent("Event");v.initEvent("methodDrawReady",true,true);p.document.documentElement.dispatchEvent(v)}catch(w){}})();
(function(){a("body").toggleClass("touch",svgedit.browser.isTouch());var p=a.deparam.querystring(true);if(!a.isEmptyObject(p)){if(p.dimensions)p.dimensions=p.dimensions.split(",");if(p.extensions)p.extensions=p.extensions.split(",");if(p.bkgd_color)p.bkgd_color="#"+p.bkgd_color;methodDraw.setConfig(p);var v=p.source,w=a.param.querystring();if(!v)if(w.indexOf("source=data:")>=0)v=w.match(/source=(data:[^&]*)/)[1];if(v)if(v.indexOf("data:")===0){v=v.replace(/ /g,"+");d.loadFromDataURI(v)}else d.loadFromString(v);
else if(w.indexOf("paramurl=")!==-1)methodDraw.loadFromURL(w.substr(9));else p.url&&methodDraw.loadFromURL(p.url)}})();a("#canvas_width").val(curConfig.dimensions[0]);a("#canvas_height").val(curConfig.dimensions[1]);var c=function(){a.each(curConfig.extensions,function(){var p=this;a.getScript(curConfig.extPath+p,function(v){if(!v){v=document.createElement("script");v.src=curConfig.extPath+p;document.querySelector("head").appendChild(v)}})})};document.location.protocol==="file:"?setTimeout(c,100):
c();a.svgIcons(curConfig.imgPath+"svg_edit_icons.svg",{w:27,h:27,id_match:false,no_img:true,fallback_path:curConfig.imgPath,fallback:{logo:"logo.png",select:"select.png",select_node:"select_node.png",pencil:"pencil.png",pen:"line.png",rect:"square.png",ellipse:"ellipse.png",path:"path.png",text:"text.png",image:"image.png",zoom:"zoom.png","delete":"delete.png",spapelib:"shapelib.png",node_delete:"node_delete.png",align_left:"align-left.png",align_center:"align-center.png",align_right:"align-right.png",
align_top:"align-top.png",align_middle:"align-middle.png",align_bottom:"align-bottom.png",arrow_right:"flyouth.png",arrow_down:"dropdown.gif"},placement:{"#logo":"logo","#tool_select":"select","#tool_fhpath":"pencil","#tool_line":"pen","#tool_rect,#tools_rect_show":"rect","#tool_ellipse,#tools_ellipse_show":"ellipse","#tool_path":"path","#tool_text,#layer_rename":"text","#tool_image":"image","#tool_zoom":"zoom","#tool_node_clone":"node_clone","#tool_node_delete":"node_delete","#tool_add_subpath":"add_subpath",
"#tool_openclose_path":"open_path","#tool_alignleft, #tool_posleft":"align_left","#tool_aligncenter, #tool_poscenter":"align_center","#tool_alignright, #tool_posright":"align_right","#tool_aligntop, #tool_postop":"align_top","#tool_alignmiddle, #tool_posmiddle":"align_middle","#tool_alignbottom, #tool_posbottom":"align_bottom","#cur_position":"align","#zoomLabel":"zoom"},resize:{"#logo .svg_icon":15,".flyout_arrow_horiz .svg_icon":5,"#fill_bg .svg_icon, #stroke_bg .svg_icon":svgedit.browser.isTouch()?
24:24,".palette_item:first .svg_icon":svgedit.browser.isTouch()?30:16,"#zoomLabel .svg_icon":16,"#zoom_dropdown .svg_icon":7},callback:function(){a(".toolbar_button button > svg, .toolbar_button button > img").each(function(){a(this).parent().prepend(this)});a(".tool_button, .tool_button_current").addClass("loaded");var p=a("#tools_left");if(p.length!=0){p.offset();p.outerHeight()}a(".tools_flyout").each(function(){var v=a("#"+this.id+"_show"),w=v.attr("data-curopt");if(!v.children("svg, img").length){w=
a(w).children().clone();if(w.length){w[0].removeAttribute("style");v.append(w)}}});methodDraw.runCallbacks();setTimeout(function(){a(".flyout_arrow_horiz:empty").each(function(){a(this).append(a.getSvgIcon("arrow_right").width(5).height(5))})},1)}});a("#rulers").on("dblclick",function(p){a("#base_unit_container").css({top:p.pageY-10,left:p.pageX-50,display:"block"})});a("#base_unit_container").on("mouseleave mouseenter",function(){t=setTimeout(function(){a("#base_unit_container").fadeOut(500)},200);
event.type=="mouseover"&&clearTimeout(t)});a("#base_unit").on("change",function(){savePreferences()});d.canvas=e=new a.SvgCanvas(document.getElementById("svgcanvas"),curConfig);d.show_save_warning=false;d.paintBox={fill:null,stroke:null,canvas:null};c=navigator.platform.indexOf("Mac")>=0;var k=navigator.userAgent.indexOf("AppleWebKit")>=0,m=c?"meta+":"ctrl+",s=e.pathActions,n=e.undoMgr,B=svgedit.utilities,D=curConfig.imgPath+"placeholder.svg",E=a("#workarea"),I=a("#cmenu_canvas"),Q=null,O=1,N="toolbars",
aa="";c||a(".shortcut").each(function(){var p=a(this).text();a(this).text(p.split("\u2318").join("Ctrl+"))});(function(){a("#dialog_container").draggable({cancel:"#dialog_content, #dialog_buttons *",containment:"window"});var p=a("#dialog_box"),v=a("#dialog_buttons"),w=function(z,H,L,M){a("#dialog_content").html("<p>"+H.replace(/\n/g,"</p><p>")+"</p>").toggleClass("prompt",z=="prompt");v.empty();var R=a('<input type="button" value="'+uiStrings.common.ok+'">').appendTo(v);z!="alert"&&a('<input type="button" value="'+
uiStrings.common.cancel+'">').appendTo(v).on("click touchstart",function(){p.hide();L(false)});if(z=="prompt"){var Z=a('<input type="text">').prependTo(v);Z.val(M||"");Z.bind("keydown","return",function(){R.trigger("click touchstart")})}z=="process"&&R.hide();p.show();R.on("click touchstart",function(){p.hide();var ea=z=="prompt"?Z.val():true;L&&L(ea)}).focus();z=="prompt"&&Z.focus()};a.alert=function(z,H){w("alert",z,H)};a.confirm=function(z,H){w("confirm",z,H)};a.process_cancel=function(z,H){w("process",
z,H)};a.prompt=function(z,H,L){w("prompt",z,L,H)}})();var ga=function(){var p=a(".tool_button_current");if(p.length&&p[0].id!=="tool_select"){p.removeClass("tool_button_current").addClass("tool_button");a("#tool_select").addClass("tool_button_current").removeClass("tool_button")}e.setMode("select")},T=null,U=false,ba=false,ua="",ia=function(p,v){var w=e.getResolution(),z=E;a("#svgcanvas").position();if(z=e.setBBoxZoom(v,z.width()-15,z.height()-15)){var H=z.zoom;z=z.bbox;if(H<0.001)xa({value:0.1});
else{typeof animatedZoom!="undefined"&&p.cancelAnimationFrame(animatedZoom);var L=Date.now(),M=H-w.zoom;a("#zoom");var R=w.zoom,Z=function(){var ea=(Date.now()-L)/500;ea=Math.pow(ea-1,3)+1;e.setZoom(R+M*ea);K();if(ea<1&&ea>-0.9)p.animatedZoom=requestAnimationFrame(Z);else{a("#zoom").val(parseInt(H*100));a("option","#zoom_select").removeAttr("selected");a("option[value="+parseInt(H*100)+"]","#zoom_select").attr("selected","selected")}};Z();e.getMode()=="zoom"&&z.width&&ga();xb()}}};a("#cur_context_panel").delegate("a",
"click",function(){var p=a(this);p.attr("data-root")?e.leaveContext():e.setContext(p.text());e.clearSelection();return false});var ca=function(){d.paintBox.fill.prep();d.paintBox.stroke.prep()},V={},Y=function(p){a.each(p,function(v,w){var z=a(v).children(),H=v+"_show",L=a(H),M=false;z.addClass("tool_button").unbind("click mousedown mouseup").each(function(ea){var W=w[ea];V[W.sel]=W.fn;if(W.isDefault)M=ea;ea=function(ha){var ja=W;if(ha.type==="keydown"){var X=a(ja.parent+"_show").hasClass("tool_button_current"),
ta=a(ja.parent+"_show").attr("data-curopt");a.each(p[W.parent],function(Fa,Ga){if(Ga.sel==ta)ja=!ha.shiftKey||!X?Ga:p[W.parent][Fa+1]||p[W.parent][0]})}if(a(this).hasClass("disabled"))return false;sa(H)&&ja.fn();var Aa=ja.icon?a.getSvgIcon(ja.icon,true):a(ja.sel).children().eq(0).clone();Aa[0].setAttribute("width",L.width());Aa[0].setAttribute("height",L.height());L.children(":not(.flyout_arrow_horiz)").remove();L.append(Aa).attr("data-curopt",ja.sel)};a(this).mouseup(ea);W.key&&a(document).bind("keydown",
W.key[0]+" shift+"+W.key[0],ea)});if(M)L.attr("data-curopt",w[M].sel);else L.attr("data-curopt")||L.attr("data-curopt",w[0].sel);var R,Z=a(H).position();a(v).css({left:Z.left+34,top:Z.top+77});L.mousedown(function(ea){a("#workarea").one("mousedown",function(){a("#tools_shapelib").hide()});a("#tools_shapelib").is(":visible")&&sa(H,false);if(L.hasClass("disabled"))return false;var W=a(v),ha=Z.left+34,ja=W.width()*-1,X=W.data("shown_popop")?200:0;R=setTimeout(function(){L.data("isLibrary")?W.css("left",
ha).show():W.css("left",ja).show().animate({left:ha},50);W.data("shown_popop",true)},X);ea.preventDefault()}).mouseup(function(){clearTimeout(R);var ea=a(this).attr("data-curopt");if(L.data("isLibrary")&&a(H.replace("_show","")).is(":visible"))sa(H,true);else sa(H)&&ea in V&&V[ea]()})});ma()},oa=function(p,v){return a("<div>",{"class":"tools_flyout",id:p}).appendTo("#svg_editor").append(v)},pa=function(){a(".tools_flyout").each(function(){var p=a("#"+this.id+"_show"),v=p.offset();p=p.outerWidth();
a(this).css({left:(v.left+p)*O,top:v.top})})},ma=function(){a(".tools_flyout").each(function(){var p=a("#"+this.id+"_show");if(!p.data("isLibrary")){var v=[];a(this).children().each(function(){v.push(this.title)});p[0].title=v.join(" / ")}})},ka,Ba=function(p,v,w){var z=null;if(p.indexOf("url(#")===0){p=(p=e.getRefElem(p))?p.cloneNode(true):a("#"+w+"_color defs *")[0];z={alpha:v};z[p.tagName]=p}else z=p.indexOf("#")===0?{alpha:v,solidColor:p.substr(1)}:{alpha:v,solidColor:"none"};return new a.jGraduate.Paint(z)},
ra=e.getResolution();if(curConfig.baseUnit!=="px"){ra.w=svgedit.units.convertUnit(ra.w)+curConfig.baseUnit;ra.h=svgedit.units.convertUnit(ra.h)+curConfig.baseUnit}var Ca=function(p){e.createLayer("background");cur_shape=e.addSvgElementFromJson({element:"rect",attr:{x:-1,y:-1,width:ra.w+2,height:ra.h+2,stroke:"none",id:"canvas_background",opacity:1,fill:p||"#fff",style:"pointer-events:none"}});e.setCurrentLayer("Layer 1");e.setCurrentLayerPosition("1")};document.getElementById("canvas_background")||
Ca();document.getElementById("canvas_background").getAttribute("fill");var ya=d.setImageURL=function(p){p||(p=D);e.setImageURL(p);a("#image_url").val(p)},qa=function(){var p=T;if(p!=null&&!p.parentNode)p=null;if(U&&U[0]!=null&&!U[0].parentNode)U=false;var v=e.getCurrentDrawing().getCurrentLayerName(),w=e.getMode(),z=curConfig.baseUnit!=="px"?curConfig.baseUnit:null,H=w=="pathedit";if(H){a(".context_panel").hide();a("#path_node_panel").show();a("#stroke_panel").hide();v=s.getNodePoint();a("#tool_add_subpath").removeClass("push_button_pressed").addClass("tool_button");
a("#tool_node_delete").toggleClass("disabled",!s.canDeleteNodes);zb("#tool_openclose_path",s.closed_subpath?"open_path":"close_path");if(v){H=a("#seg_type");if(z){v.x=svgedit.units.convertUnit(v.x);v.y=svgedit.units.convertUnit(v.y)}a("#path_node_x").val(Math.round(v.x));a("#path_node_y").val(Math.round(v.y));if(v.type){H.val(v.type).removeAttr("disabled");a("#seg_type_label").html(v.type==4?"Straight":"Curve")}else H.val(4).attr("disabled","disabled")}a("#tools_top").removeClass("multiselected");
a("#stroke_panel").hide();a("#canvas_panel").hide()}else{var L=a("#cmenu_canvas li");a(".context_panel").hide();a(".menu_item","#edit_menu").addClass("disabled");a(".menu_item","#object_menu").addClass("disabled");if(U){U=U.filter(Boolean);(p=e.elementsAreSame(U)?U[0]:null)&&a("#tools_top").addClass("multiselected")}if(!p&&!U){a("#tools_top").removeClass("multiselected");a("#stroke_panel").hide();a("#canvas_panel").show()}if(p!=null){a("#stroke_panel").show();var M=p.nodeName,R=e.getRotationAngle(p);
a("#angle").val(Math.round(R));R=e.getBlur(p);a("#blur").val(R);if(!H&&w!="pathedit"){a("#selected_panel").show();a(".action_selected").removeClass("disabled");var Z,ea;if(["g","polyline","path"].indexOf(M)>=0)if(w=e.getStrokedBBox([p])){Z=w.x;ea=w.y}if(z){Z=svgedit.units.convertUnit(Z);ea=svgedit.units.convertUnit(ea)}a("#"+M+"_x").val(Math.round(Z));a("#"+M+"_y").val(Math.round(ea));if(M==="polyline"){a("#path_x").val(Math.round(Z));a("#path_y").val(Math.round(ea))}["image","text","path","g","use"].indexOf(M)==
-1&&a(".action_path_convert_selected").removeClass("disabled");M==="path"&&a(".action_path_selected").removeClass("disabled")}z=null;if(W==="a"){z=e.getHref(p);a("#g_panel").show()}if(p.parentNode.tagName==="a")if(!a(p).siblings().length){a("#a_panel").show();z=e.getHref(p.parentNode)}a("#tool_make_link, #tool_make_link").toggle(!z);z&&a("#link_url").val(z);z={g:[],a:[],rect:["rx","width","height","x","y"],image:["width","height","x","y"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],line:["x1",
"y1","x2","y2"],text:["x","y"],use:[],path:[]};var W=p.tagName;a(p).data("gsvg")&&a("#g_panel").show();if(W=="path"||W=="polyline")a("#path_panel").show();if(z[W]){z=z[W];a("#"+W+"_panel").show();W=="rect"?a("#cornerRadiusLabel").show():a("#cornerRadiusLabel").hide();a.each(z,function(ha,ja){var X=p.getAttribute(ja);if(curConfig.baseUnit!=="px"&&p[ja])X=svgedit.units.convertUnit(p[ja].baseVal.value);var ta=document.getElementById(W+"_"+ja);ta.value=Math.round(X)||0;ta.getAttribute("data-cursor")===
"true"&&a.fn.dragInput.updateCursor(ta)});if(W=="text"){z=p.getAttribute("font-family");document.getElementById("font_family_dropdown").selectedIndex=3;a("#text_panel").css("display","inline");a("#tool_italic").toggleClass("active",e.getItalic());a("#tool_bold").toggleClass("active",e.getBold());a("#font_family").val(z);a("#font_size").val(p.getAttribute("font-size"));a("#text").val(p.textContent);a("#preview_font").text(z.split(",")[0].replace(/'/g,"")).css("font-family",z);e.addedNew&&setTimeout(function(){a("#text").focus().select()},
100)}else if(W=="image")ya(e.getHref(p));else if(W==="g"||W==="use"){a("#container_panel").show();a(".action_group_selected").removeClass("disabled");e.getTitle()}}L[(W==="g"?"en":"dis")+"ableContextMenuItems"]("#ungroup");L[(W==="g"||!U?"dis":"en")+"ableContextMenuItems"]("#group")}if(U){a("#multiselected_panel").show();a(".action_multi_selected").removeClass("disabled");L.enableContextMenuItems("#group").disableContextMenuItems("#ungroup")}p||L.disableContextMenuItems("#delete,#cut,#copy,#group,#ungroup,#move_front,#move_up,#move_down,#move_back");
n.getUndoStackSize()>0?a("#tool_undo").removeClass("disabled"):a("#tool_undo").addClass("disabled");n.getRedoStackSize()>0?a("#tool_redo").removeClass("disabled"):a("#tool_redo").addClass("disabled");e.addedNew=false;if(p&&!H||U){a("#selLayerNames").removeAttr("disabled").val(v);I.enableContextMenuItems("#delete,#cut,#copy,#move_front,#move_up,#move_down,#move_back")}}};a("#text").on("focus",function(){});a("#text").on("blur",function(){});e.bind("selected",function(p,v){var w=e.getMode();w==="select"&&
ga();if(w==="pathedit")return qa();T=v.length==1||v[1]==null?v[0]:null;v=v.filter(Boolean);U=v.length>=2?v:false;if(e.elementsAreSame(U))T=U[0];if(T!=null){a("#multiselected_panel").hide();if(T!=null)switch(T.tagName){case "use":a(".context_panel").hide();a("#use_panel").show();break;case "image":a(".context_panel").hide();a("#image_panel").show();break;case "foreignObject":a(".context_panel").hide();break;case "g":case "a":w=null;for(var z=T.getElementsByTagName("*"),H=0,L=z.length;H<L;H++){var M=
z[H].getAttribute("stroke-width");if(H===0)w=M;else if(w!==M)w=null}a("#stroke_width").val(w===null?"0":w);qa();break;default:a("#stroke_width").val(T.getAttribute("stroke-width")||0);w=T.getAttribute("stroke-dasharray")||"none";a("option","#stroke_style").removeAttr("selected");a('#stroke_style option[value="'+w+'"]').attr("selected","selected");a("#stroke_style").trigger("change");a.fn.dragInput.updateCursor(a("#stroke_width")[0]);a.fn.dragInput.updateCursor(a("#blur")[0])}if(T!=null){w=(T.getAttribute("opacity")||
1)*100;a("#group_opacity").val(w);a.fn.dragInput.updateCursor(a("#group_opacity")[0])}U.length&&a("#tools_top").addClass("multiselected")}else if(U.length){a(".context_panel").hide();a("#tools_top").removeClass("multiselected");a("#multiselected_panel").show()}else{a(".context_panel").hide();a("#canvas_panel").show();a("#tools_top").removeClass("multiselected")}e.runExtensions("selectedChanged",{elems:v,selectedElement:T,multiselected:U})});e.bind("transition",function(p,v){var w=e.getMode(),z=v[0];
if(z){U=v.length>=2&&v[1]!=null?v:null;if(!U)switch(w){case "rotate":w=e.getRotationAngle(z);a("#angle").val(Math.round(w));rotateCursor(w);a("#tool_reorient").toggleClass("disabled",w==0)}e.runExtensions("elementTransition",{elems:v})}});e.bind("changed",function(p,v){var w=e.getMode();w==="select"&&ga();for(var z=0;z<v.length;++z){var H=v[z];if(H&&H.tagName==="svg")K();else if(H&&T&&T.parentNode==null)T=H}d.show_save_warning=true;qa();if(T&&w==="select"){d.paintBox.fill.update();d.paintBox.stroke.update()}e.runExtensions("elementChanged",
{elems:v})});e.bind("saved",function(p,v){d.show_save_warning=false;v='<?xml version="1.0"?>\n'+v;var w=navigator.userAgent;if(~w.indexOf("MSIE"))Eb(0,true);else{var z=p.open("data:image/svg+xml;base64,"+B.encode64(v)),H=a.pref("save_notice_done");if(H!=="all"){var L=uiStrings.notification.saveFromBrowser.replace("%s","SVG");if(w.indexOf("Gecko/")!==-1)if(v.indexOf("<defs")!==-1){L+="\n\n"+uiStrings.notification.defsFailOnSave;a.pref("save_notice_done","all");H="all"}else a.pref("save_notice_done",
"part");else a.pref("save_notice_done","all");H!=="part"&&z.alert(L)}}});e.bind("exported",function(p,v){var w=v.issues;a("#export_canvas").length||a("<canvas>",{id:"export_canvas"}).hide().appendTo("body");var z=a("#export_canvas")[0];z.width=e.contentW;z.height=e.contentH;canvg(z,v.svg,{renderCallback:function(){var H=z.toDataURL("image/png");Q.location.href=H;if(a.pref("export_notice_done")!=="all"){H=uiStrings.notification.saveFromBrowser.replace("%s","PNG");if(w.length)H+="\n\n"+uiStrings.notification.noteTheseIssues+
"\n \u2022 "+w.join("\n \u2022 ");a.pref("export_notice_done","all");Q.alert(H)}}})});e.bind("zoomed",ia);e.bind("contextset",function(p,v){var w="";if(v){var z="";w='<a href="#" data-root="y">'+e.getCurrentDrawing().getCurrentLayerName()+"</a>";a(v).parentsUntil("#svgcontent > g").andSelf().each(function(){if(this.id){z+=" > "+this.id;w+=this!==v?' > <a href="#">'+this.id+"</a>":" > "+this.id}});ua=z}else ua=null;a("#cur_context_panel").toggle(!!v).html(w)});e.bind("extension_added",function(p,v){function w(){if(ka){clearTimeout(ka);
ka=null}H||(ka=setTimeout(function(){H=true;Mb(l.iconsize)},50))}var z=false,H=false,L=true,M=function(){if(v.callback&&!z&&L){z=true;v.callback()}},R=[];v.context_tools&&a.each(v.context_tools,function(ja,X){var ta=X.container_id?' id="'+X.container_id+'"':"",Aa=a("#"+X.panel);Aa.length||(Aa=a("<div>",{id:X.panel}).appendTo("#tools_top").hide());switch(X.type){case "tool_button":var Fa='<div class="tool_button">'+X.id+"</div>",Ga=a(Fa).appendTo(Aa);X.events&&a.each(X.events,function(Na,jb){a(Ga).bind(Na,
jb)});break;case "select":Fa="<label"+ta+'><select id="'+X.id+'">';a.each(X.options,function(Na,jb){Fa+='<option value="'+Na+'"'+(Na==X.defval?" selected":"")+">"+jb+"</option>"});Fa+="</select></label>";var Pa=a(Fa).appendTo(Aa).find("select");a.each(X.events,function(Na,jb){a(Pa).bind(Na,jb)});break;case "button-select":Fa='<div id="'+X.id+'" class="dropdown toolset" title="'+X.title+'"><div id="cur_'+X.id+'" class="icon_label"></div><button></button></div>';ta=a('<ul id="'+X.id+'_opts"></ul>').appendTo("#option_lists");
X.colnum&&ta.addClass("optcols"+X.colnum);a(Fa).appendTo(Aa).children();R.push({elem:"#"+X.id,list:"#"+X.id+"_opts",title:X.title,callback:X.events.change,cur:"#cur_"+X.id});break;case "input":Fa="<label"+ta+'><span id="'+X.id+'_label">'+X.label+':</span><input id="'+X.id+'" title="'+X.title+'" size="'+(X.size||"4")+'" value="'+(X.defval||"")+'" type="text"/></label>';var Qa=a(Fa).appendTo(Aa).find("input");X.spindata&&Qa.SpinButton(X.spindata);X.events&&a.each(X.events,function(Na,jb){Qa.bind(Na,
jb)})}});if(v.buttons){var Z={},ea={},W=v.svgicons,ha={};a.each(v.buttons,function(ja,X){for(var ta,Aa=X.id,Fa=ja;a("#"+Aa).length;)Aa=X.id+"_"+ ++Fa;if(W){Z[Aa]=X.icon;Fa=X.svgicon?X.svgicon:X.id;if(X.type=="app_menu")ea["#"+Aa+" > div"]=Fa;else ea["#"+Aa]=Fa}else ta=X.type=="menu"?"":a('<img src="'+X.icon+'">');var Ga,Pa;switch(X.type){case "mode_flyout":case "mode":Ga="tool_button";if(X.cls)Ga+=" "+X.cls;Pa="#tools_left";break;case "context":Ga="tool_button";Pa="#"+X.panel;a(Pa).length||a("<div>",
{id:X.panel}).appendTo("#tools_top");break;case "menu":Ga="menu_item tool_button";Pa="#"+(X.after||X.panel);break;case "app_menu":Ga="";Pa=X.parent||"#main_menu ul";a(Pa).length||a("<div>",{id:X.panel}).appendTo("#tools_top")}var Qa=a(X.list||X.type=="app_menu"?"<li/>":"<div/>").attr("id",Aa).attr("title",X.title).addClass(Ga);if(!X.includeWith&&!X.list){if("position"in X)a(Pa).children().eq(X.position).before(Qa);else X.type!="menu"||!X.after?Qa.appendTo(Pa):a(Pa).after(Qa);if(X.type=="mode_flyout"){Fa=
a(Qa);Ga=Fa.parent();if(!Fa.parent().hasClass("tools_flyout")){var Na=Fa[0].id.replace("tool_","tools_"),jb=Fa.clone().attr("id",Na+"_show").append(a("<div>",{"class":"flyout_arrow_horiz"}));Fa.before(jb);Ga=oa(Na,Fa);Ga.data("isLibrary",true);jb.data("isLibrary",true)}ea["#"+Na+"_show"]=X.id;Aa=ha["#"+Ga[0].id]=[{sel:"#"+Aa,fn:X.events.click,icon:X.id,isDefault:true},ub]}else if(X.type=="app_menu"||X.type=="menu")Qa.append(X.title)}else if(X.list){Qa.addClass("push_button");a("#"+X.list+"_opts").append(Qa);
if(X.isDefault){a("#cur_"+X.list).append(Qa.children().clone());Fa=X.svgicon?X.svgicon:X.id;ea["#cur_"+X.list]=Fa}}else if(X.includeWith){Pa=X.includeWith;Fa=a(Pa.button);Ga=Fa.parent();if(!Fa.parent().hasClass("tools_flyout")){Na=Fa[0].id.replace("tool_","tools_");jb=Fa.clone().attr("id",Na+"_show").append(a("<div>",{"class":"flyout_arrow_horiz"}));Fa.before(jb);Ga=oa(Na,Fa)}var ub=F.getButtonData(Pa.button);if(Pa.isDefault)ea["#"+Na+"_show"]=X.id;Aa=ha["#"+Ga[0].id]=[{sel:"#"+Aa,fn:X.events.click,
icon:X.id,key:X.key,isDefault:X.includeWith?X.includeWith.isDefault:0},ub];Na="position"in Pa?Pa.position:"last";ub=Ga.children().length;if(!isNaN(Na)&&Na>=0&&Na<ub)Ga.children().eq(Na).before(Qa);else{Ga.append(Qa);Aa.reverse()}}W||Qa.append(ta);X.list||a.each(X.events,function(Cb,Jb){if(Cb=="click")if(X.type=="mode"){X.includeWith?Qa.bind(Cb,Jb):Qa.bind(Cb,function(){sa(Qa)&&Jb()});if(X.key){a(document).bind("keydown",X.key,Jb);X.title&&Qa.attr("title",X.title+" ["+X.key+"]")}}else Qa.bind(Cb,Jb);
else Qa.bind(Cb,Jb)});Y(ha)});a.each(R,function(){vb(this.elem,this.list,this.callback,{seticon:true})});if(W)L=false;a.svgIcons(W,{w:27,h:27,id_match:false,no_img:!k,fallback:Z,placement:ea,callback:function(){l.iconsize&&l.iconsize!="m"&&w();L=true;M()}})}M()});e.textActions.setInputElem(a("#text")[0]);var Ka='<div class="palette_item transparent" data-rgb="none"></div>\t\t\t\t\t\t\t\t<div class="palette_item black" data-rgb="#000000"></div>\t\t\t\t\t\t\t\t<div class="palette_item white" data-rgb="#ffffff"></div>';
["#444444","#482816","#422C10","#3B2F0E","#32320F","#293414","#1F361B","#153723","#0C372C","#083734","#0E353B","#1A333F","#273141","#332D40","#3E2A3C","#462735","#4B252D","#4D2425","#4C261D","#666666","#845335","#7B572D","#6F5C2A","#62612C","#546433","#46673D","#396849","#306856","#2D6862","#33666C","#426373","#535F75","#645A73","#74556D","#805064","#884D58","#8B4D4B","#894F3F","#999999","#C48157","#B8874D","#A98E49","#97944B","#849854","#729C62","#619E73","#559E84","#529D94","#5B9BA2","#6D97AB",
"#8391AE","#9A8AAB","#AF84A3","#BF7E96","#C97A86","#CE7975","#CC7C65","#BBBBBB","#FFB27C","#FABA6F","#E6C36A","#CFCA6D","#B8D078","#A0D58A","#8CD79F","#7DD8B5","#7AD6CA","#84D3DB","#9ACEE6","#B6C7EA","#D3BEE7","#EDB6DC","#FFAFCC","#FFAAB8","#FFA9A2","#FFAC8D","#DDDDDD","#FFE7A2","#FFF093","#FFFA8D","#FFFF91","#EEFF9F","#D1FFB4","#B9FFCE","#A8FFE9","#A4FFFF","#B1FFFF","#CBFFFF","#EDFFFF","#FFF5FF","#FFEBFF","#FFE2FF","#FFDCEC","#FFDBD2","#FFDFB8"].forEach(function(p){Ka+='<div class="palette_item" style="background-color: '+
p+';" data-rgb="'+p+'"></div>'});a("#palette").append(Ka);var Da=a("#tool_angle_indicator");a("#tool_reorient");rotateCursor=function(p){p="rotate("+p+"deg)";Da.css({"-webkit-transform":p,"-moz-transform":p,"-o-transform":p,"-ms-transform":p,transform:p})};var xa=function(p){var v=p.value/100;if(v<0.001)p.value=0.1;else{p=e.getZoom();var w=E;ia(window,{width:0,height:0,x:(w[0].scrollLeft+w.width()/2)/p,y:(w[0].scrollTop+w.height()/2)/p,zoom:v},true)}};a("#stroke_style").change(function(){e.setStrokeAttr("stroke-dasharray",
a(this).val());a("#stroke_style_label").html(this.options[this.selectedIndex].text);window.opera&&a("<p/>").hide().appendTo("body").remove()});a("#seg_type").change(function(){e.setSegType(a(this).val());a("#seg_type_label").html(this.options[this.selectedIndex].text)});a("select").change(function(){a(this).blur()});a("#font_family").change(function(){e.setFontFamily(this.value)});a("#text").keyup(function(){e.setTextContent(this.value)});changeAttribute=function(p){var v=p.getAttribute("data-attr"),
w=p.getAttribute("data-multiplier")||1;w=parseFloat(w);w=p.value*w;if(!svgedit.units.isValidUnit(v,w,T)){a.alert(uiStrings.notification.invalidAttrValGiven);p.value=T.getAttribute(v);return false}e.changeSelectedAttributeNoUndo(v,w)};picking=false;a(document).on("mouseup",function(){picking=false});a("#palette").on("mousemove mousedown touchstart touchmove",".palette_item",function(p){p.preventDefault();if(p.type=="mousedown")picking=true;if(picking){var v=a("#tool_stroke").hasClass("active"),w=v?
"stroke":"fill",z=a(this).attr("data-rgb"),H=null,L=true;if(p.type=="mousedown")L=false;if(z==="transparent"||z==="initial"||z==="#none"){z="none";H=new a.jGraduate.Paint}else H=new a.jGraduate.Paint({alpha:100,solidColor:z.substr(1)});d.paintBox[w].setPaint(H);if(v){e.setColor("stroke",z,L);z!="none"&&e.getStrokeOpacity()!=1&&e.setPaintOpacity("stroke",1)}else{e.setColor("fill",z,L);z!="none"&&e.getFillOpacity()!=1&&e.setPaintOpacity("fill",1)}}}).bind("contextmenu",function(p){p.preventDefault()});
a("#toggle_stroke_tools").toggle(function(){a(".stroke_tool").css("display","table-cell");a(this).addClass("expanded");Db()},function(){a(".stroke_tool").css("display","none");a(this).removeClass("expanded");Db()});var sa=function(p,v){if(a(p).hasClass("disabled"))return false;if(a(p).parent().hasClass("tools_flyout"))return true;var w=w||"normal";v||a(".tools_flyout").fadeOut(w);a("#styleoverrides").text("");a(".tool_button_current").removeClass("tool_button_current").addClass("tool_button");a(p).addClass("tool_button_current").removeClass("tool_button");
return true};(function(){var p=null,v=null,w=E[0],z=false,H=false;a("#svgcanvas").on("mousemove mouseup touchend",function(L){if(z!==false){w.scrollLeft-=L.clientX-p;w.scrollTop-=L.clientY-v;p=L.clientX;v=L.clientY;if(L.type==="mouseup"||L.type==="touchend")z=false;return false}}).on("mousedown touchmove",function(L){if(L.button===1||H===true||L.originalEvent.touches&&L.originalEvent.touches.length>=2){z=true;p=L.clientX;v=L.clientY;return false}});a(window).mouseup(function(){z=false});a(document).bind("keydown",
"space",function(L){L.preventDefault();e.spaceKey=H=true}).bind("keyup","space",function(L){L.preventDefault();e.spaceKey=H=false}).bind("keydown","alt",function(){e.getMode()==="zoom"&&E.addClass("out")}).bind("keyup","alt",function(){e.getMode()==="zoom"&&E.removeClass("out")})})();var va=a(".menu"),kb=function(p){p.target.style.background="#fff";setTimeout(function(){p.target.style.background="#ddd"},50);setTimeout(function(){p.target.style.background="#fff"},150);setTimeout(function(){p.target.style.background=
"#ddd"},200);setTimeout(function(){p.target.style.background=""},200);setTimeout(function(){a("#menu_bar").removeClass("active")},220);return false};a(".menu_item").on("mousedown touchstart",function(p){kb(p)});a("svg, body").on("mousedown  touchstart",function(p){if(!(p.target.nodeName&&p.target.nodeName.toLowerCase()==="input"))if(!a(p.target).hasClass("menu_title")&&!a(p.target).parent().hasClass("menu_title"))!a(p.target).hasClass("disabled")&&a(p.target).hasClass("menu_item")?kb(p):a("#menu_bar").removeClass("active")});
a("#workarea").on("mousewheel",function(p,v,w,z){if(p.altKey){p.preventDefault();zoom=parseInt(a("#zoom").val());a("#zoom").val(parseInt(zoom+z*10)).change()}});a(".menu_title").on("mousedown",function(){a("#tools_shapelib").hide();a("#menu_bar").toggleClass("active");va.removeClass("open");a(this).parent().addClass("open")}).on("mouseover",function(){va.removeClass("open");a(this).parent().addClass("open")});d.addDropDown=function(p,v,w){if(a(p).length!=0){var z=a(p).find("button"),H=a(p).find("ul").attr("id",
a(p)[0].id+"-list");w||a("#option_lists").append(H);var L=false;w&&a(p).addClass("dropup");H.find("li").bind("mouseup",v);a(window).mouseup(function(){if(!L){z.removeClass("down");H.hide()}L=false});z.bind("mousedown",function(){if(z.hasClass("down")){z.removeClass("down");H.hide()}else{z.addClass("down");if(!w){var M=a(p).offset();H.css({top:M.top,left:M.left-110})}H.show();L=true}}).hover(function(){L=true}).mouseout(function(){L=false})}};var vb=function(p,v,w,z){var H=a(p);v=a(v);var L=false,
M=z.dropUp;M&&a(p).addClass("dropup");v.find("li").bind("mouseup",function(){if(z.seticon){zb("#cur_"+H[0].id,a(this).children());a(this).addClass("current").siblings().removeClass("current")}w.apply(this,arguments)});a(window).mouseup(function(){if(!L){H.removeClass("down");v.hide();v.css({top:0,left:0})}L=false});v.height();a(p).bind("mousedown",function(){var R=a(p).offset();if(M){R.top-=v.height();R.left+=8}else R.top+=a(p).height();a(v).offset(R);if(H.hasClass("down")){H.removeClass("down");
v.hide();v.css({top:0,left:0})}else{H.addClass("down");v.show();L=true;return false}}).hover(function(){L=true}).mouseout(function(){L=false});z.multiclick&&v.mousedown(function(){L=true})};a("#font_family_dropdown").change(function(){var p=this.options[this.selectedIndex].value,v=this.options[this.selectedIndex].text;a("#preview_font").html(v).css("font-family",p);a("#font_family").val(p).change()});a("div","#position_opts").each(function(){this.addEventListener("mouseup",function(){var p=this.id.replace("tool_pos",
"").charAt(0);e.alignSelectedElements(p,"page")})});(function(){var p,v=function(){a(p).blur()};a("#svg_editor").find("button, select, input:not(#text)").focus(function(){p=this;N="toolbars";E.mousedown(v)}).blur(function(){N="canvas";E.unbind("mousedown",v);e.getMode()=="textedit"&&a("#text").focus()})})();var cb=function(){sa("#tool_select")&&e.setMode("select")},Ta=function(){sa("#tool_fhpath")&&e.setMode("fhpath")},Va=function(){sa("#tool_line")&&e.setMode("line")},Ia=function(){sa("#tool_rect")&&
e.setMode("rect")},za=function(){sa("#tool_ellipse")&&e.setMode("ellipse")},$a=function(){sa("#tool_image")&&e.setMode("image")},La=function(){sa("#tool_zoom")&&e.setMode("zoom")},Sa=function(){if(sa("#tool_zoom")){yb();ga()}},Ja=function(){sa("#tool_text")&&e.setMode("text")},db=function(){sa("#tool_path")&&e.setMode("path")},lb=function(){if(T!=null||U)e.deleteSelectedElements();s.getNodePoint()&&s.deletePathNode()},Ua=function(){if(T!=null||U){Ea(a("#edit_menu"));e.cutSelectedElements()}},Xa=function(){if(T!=
null||U){Ea(a("#edit_menu"));e.copySelectedElements()}},wb=function(){Ea(a("#edit_menu"));var p=e.getZoom(),v=(E[0].scrollLeft+E.width()/2)/p-e.contentW;p=(E[0].scrollTop+E.height()/2)/p-e.contentH;e.pasteElements("point",v,p)},wa=function(){if(T!=null){Ea(a("#object_menu"));e.moveToTopSelectedElement()}},hb=function(){if(T!=null){Ea(a("#object_menu"));e.moveToBottomSelectedElement()}},eb=function(){if(T!=null){Ea(a("#object_menu"));e.moveUpDownSelected("Up")}},sb=function(){if(T!=null){Ea(a("#object_menu"));
e.moveUpDownSelected("Down")}},ib=function(p){if(T!=null){Ea(a("#object_menu"));e.moveUpDownSelected(p)}},ab=function(){if(T!=null){e.convertToPath();var p=e.getSelectedElems();e.selectorManager.requestSelector(p[0]).reset(p[0]);e.selectorManager.requestSelector(p[0]).selectorRect.setAttribute("display","none");e.setMode("pathedit");s.toEditMode(p[0]);e.clearSelection();qa()}},ob=function(){T!=null&&s.reorient()},pb=function(){if(T!=null||U)a.prompt(uiStrings.notification.enterNewLinkURL,"http://",
function(p){p&&e.makeHyperlink(p)})},fb=function(p,v){if(T!=null||U){if(curConfig.gridSnapping){var w=e.getZoom()*curConfig.snappingStep;p*=w;v*=w}a("input").blur();e.moveSelectedElements(p,v)}},tb=function(){},la=function(){s.getNodePoint()&&s.clonePathNode()},da=function(){s.getNodePoint()&&s.deletePathNode()},na=function(){var p=a("#tool_add_subpath"),v=!p.hasClass("push_button_pressed");v?p.addClass("push_button_pressed").removeClass("tool_button"):p.removeClass("push_button_pressed").addClass("tool_button");
s.addSubPath(v)},P=function(){s.opencloseSubPath()},S=function(){e.cycleElement(1)},fa=function(){e.cycleElement(0)},Ha=function(p,v){if(!(T==null||U)){p||(v*=-1);var w=a("#angle").val()*1+v;e.setRotationAngle(w);qa()}},Oa=function(){var p=curConfig.dimensions;a.confirm(uiStrings.notification.QwantToClear,function(v){if(v){ga();e.clear();e.setResolution(p[0],p[1]);K(true);yb();qa();ca();e.runExtensions("onNewDocument")}})},Wa=function(){e.setBold(!e.getBold());qa()},Za=function(){e.setItalic(!e.getItalic());
qa()},nb=function(){if(!f.pngsave){var p=uiStrings.notification.loadingImage;Q=window.open("data:text/html;charset=utf-8,<title>"+p+"</title><h1>"+p+"</h1>")}window.canvg?e.rasterExport():a.getScript("canvg/rgbcolor.js",function(){a.getScript("canvg/canvg.js",function(){e.rasterExport()})})},Ra=function(){e.open()},mb=function(){},Ea=function(p){var v=p.prev();v.css({background:"white",color:"black"});setTimeout(function(){v.removeAttr("style")},200)},qb=function(){if(n.getUndoStackSize()>0){Ea(a("#edit_menu"));
n.undo()}},rb=function(){if(n.getRedoStackSize()>0){Ea(a("#edit_menu"));n.redo()}},Bb=function(){if(U){Ea(a("#object_menu"));e.groupSelectedElements()}else if(T){Ea(a("#object_menu"));e.ungroupSelectedElement()}},Fb=function(){Ea(a("#edit_menu"));e.cloneSelectedElements(20,20)},bb=function(){var p=this.id.replace("tool_align","").charAt(0);e.alignSelectedElements(p,a("#align_relative_to").val())},Ma=function(){var p=document.querySelector("#tool_stroke rect");a("#tool_stroke").toggleClass("active");
a("#tool_fill").toggleClass("active");var v=document.querySelector("#tool_fill rect"),w=v.getAttribute("fill"),z=p.getAttribute("fill");p=parseFloat(p.getAttribute("stroke-opacity"));if(isNaN(p))p=100;v=parseFloat(v.getAttribute("fill-opacity"));if(isNaN(v))v=100;z=Ba(z,p,"stroke");w=Ba(w,v,"fill");d.paintBox.fill.setPaint(z,true);d.paintBox.stroke.setPaint(w,true)},yb=function(p){var v=e.getResolution();p=p?v.zoom*p:1;a("#zoom").val(p*100);e.setZoom(p);xb();K(true)},Gb=function(){Ea(a("#view_menu"));
!a("#tool_wireframe").hasClass("push_button_pressed")?a("#tool_wireframe").addClass("push_button_pressed"):a("#tool_wireframe").removeClass("push_button_pressed");E.toggleClass("wireframe");if(!q){var p=a("#wireframe_rules");p.length?p.empty():a('<style id="wireframe_rules"></style>').appendTo("head");xb()}},Hb=function(){Ea(a("#view_menu"));var p=!a("#tool_snap").hasClass("push_button_pressed");p?a("#tool_snap").addClass("push_button_pressed"):a("#tool_snap").removeClass("push_button_pressed");curConfig.gridSnapping=
p},Ib=function(){window.self!=window.top&&top.exit_fullscreen()},Lb=function(){Ea(a("#view_menu"));if(a("#tool_rulers").hasClass("push_button_pressed")){a("#tool_rulers").removeClass("push_button_pressed");a("#show_rulers").attr("checked",false);curConfig.showRulers=false}else{a("#tool_rulers").addClass("push_button_pressed");a("#show_rulers").attr("checked",true);curConfig.showRulers=true}a("#rulers").toggle(!!curConfig.showRulers)},xb=function(){if(!q){var p="#workarea.wireframe #svgcontent * { stroke-width: "+
1/e.getZoom()+"px; }";a("#wireframe_rules").text(E.hasClass("wireframe")?p:"")}},Eb=function(p,v){if(!ba){Ea(a("#view_menu"));ba=true;a("#save_output_btns").toggle(!!v);a("#tool_source_back").toggle(!v);var w=aa=e.getSvgString();a("#svg_source_textarea").val(w);a("#svg_source_editor").fadeIn();a("#svg_source_textarea").focus().select()}},Kb=function(){if(ba){if(e.setSvgString(a("#svg_source_textarea").val())){e.clearSelection();Ya();yb();ca()}else a.confirm(uiStrings.notification.QerrorsRevertToSource,
function(p){if(!p)return false;e.clearSelection();Ya();yb();ca()});ga()}},zb=d.setIcon=function(p,v){var w=typeof v==="string"?a.getSvgIcon(v,true):v.clone();w?a(p).find("img").replaceWith(w):console.log("NOTE: Icon image missing: "+v)},gb;gb=function(){var p=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/,v=document.getElementsByTagName("script")[0],w;for(w in v.style)if(p.test(w))return w.match(p)[0];if("WebkitOpacity"in v.style)return"Webkit";if("KhtmlOpacity"in v.style)return"Khtml";return""}();var Nb=
function(p,v){gb.toLowerCase();var w=["top","left","bottom","right"];p.each(function(){for(var z=a(this),H=z.outerWidth()*(v-1),L=z.outerHeight()*(v-1),M=0;M<4;M++){var R=w[M],Z=z.data("orig_margin-"+R);if(Z==null){Z=parseInt(z.css("margin-"+R));z.data("orig_margin-"+R,Z)}Z=Z*v;if(R==="right")Z+=H;else if(R==="bottom")Z+=L;z.css("margin-"+R,Z)}})},Mb=d.setIconSize=function(p,v){if(!(p==l.size&&!v)){var w=a("#tools_top .toolset, #editor_panel > *, #history_panel > *,\t\t\t\t#main_button, #tools_left > *, #path_node_panel > *, #multiselected_panel > *,\t\t\t\t#g_panel > *, #tool_font_size > *, .tools_flyout"),
z=1;z=typeof p=="number"?p:{s:0.75,m:1,l:1.25,xl:1.5}[p];d.tool_scale=O=z;pa();var H=w.parents(":hidden");H.css("visibility","hidden").show();Nb(w,z);H.css("visibility","visible").hide();w=a("#tool_size_rules");if(w.length)w.empty();else w=a('<style id="tool_size_rules"></style>').appendTo("head");if(p!="m"){var L="";a.each(cssResizeRules,function(M,R){M="#svg_editor "+M.replace(/,/g,", #svg_editor");L+=M+"{";a.each(R,function(Z,ea){if(typeof ea==="number")var W=ea*z+"px";else if(ea[p]||ea.all)W=
ea[p]||ea.all;L+=Z+":"+W+";"});L+="}"});H="-"+gb.toLowerCase()+"-";L+="#tools_top .toolset, #editor_panel > *, #history_panel > *,\t\t\t\t#main_button, #tools_left > *, #path_node_panel > *, #multiselected_panel > *,\t\t\t\t#g_panel > *, #tool_font_size > *, .tools_flyout{"+H+"transform: scale("+z+");} #svg_editor div.toolset .toolset {"+H+"transform: scale(1); margin: 1px !important;} #svg_editor .ui-slider {"+H+"transform: scale("+1/z+");}";w.text(L)}pa()}},Ab=function(){a("#dialog_box").hide();
if(ba){if(ba)aa!==a("#svg_source_textarea").val()?a.confirm(uiStrings.notification.QignoreSourceChanges,function(p){p&&Ya()}):Ya();Db()}else ua&&e.leaveContext()},Ya=function(){a("#svg_source_editor").hide();ba=false;a("#svg_source_textarea").blur()};a(window).width();a(window).height();var Db=a.noop;a(window).resize(function(){K()});(function(){E.scroll(function(){if(a("#ruler_x").length!=0)a("#ruler_x")[0].scrollLeft=E[0].scrollLeft;if(a("#ruler_y").length!=0)a("#ruler_y")[0].scrollTop=E[0].scrollTop})})();
a("#url_notice").click(function(){a.alert(this.title)});a("#change_image_url").click(function(){var p=e.getHref(T);p=p.indexOf("data:")===0?"":p;a.prompt(uiStrings.notification.enterNewImgURL,p,function(v){v&&ya(v)})});var o=function(p){var v=p[0].id=="stroke_color"?"stroke":"fill",w=p[0].id=="canvas_color";if(w)v="canvas";var z=d.paintBox[v].paint;p=v=="stroke"?"Pick a Stroke Paint and Opacity":"Pick a Fill Paint and Opacity";w=w?{right:175,top:50}:{left:50,bottom:50};a("#color_picker").draggable({cancel:".jGraduate_tabs, .jGraduate_colPick, .jGraduate_gradPick, .jPicker",
containment:"window"}).removeAttr("style").css(w).jGraduate({paint:z,window:{pickerTitle:p},images:{clientPath:curConfig.jGraduatePath},newstop:"inverse"},function(H){z=new a.jGraduate.Paint(H);d.paintBox[v].setPaint(z);e.setPaint(v,z);a("#color_picker").hide()},function(){a("#color_picker").hide()})};c=function(p,v){var w=document.getElementById("canvas_background"),z={color:"fff",opacity:1};if(v=="stroke")z=curConfig.initStroke;if(v=="fill")z=curConfig.initFill;if(v=="canvas"&&w)if(w=w.getAttribute("fill").match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))z=
{color:("0"+parseInt(w[1],10).toString(16)).slice(-2)+("0"+parseInt(w[2],10).toString(16)).slice(-2)+("0"+parseInt(w[3],10).toString(16)).slice(-2),opacity:1};w=(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg"><rect width="100%" height="100%"\t\t\t\t\tfill="#'+z.color+'" opacity="'+z.opacity+'"/>\t\t\t\t\t<defs><linearGradient id="gradbox_"/></defs></svg>',"text/xml").documentElement;w=a(p)[0].appendChild(document.importNode(w,true));v==="canvas"?w.setAttribute("width",60.5):
w.setAttribute("width","100%");this.rect=w.firstChild;this.defs=w.getElementsByTagName("defs")[0];this.grad=this.defs.firstChild;this.paint=new a.jGraduate.Paint({solidColor:z.color});this.type=v;this.setPaint=function(H,L){this.paint=H;var M="none",R=H.type,Z=H.alpha/100;switch(R){case "solidColor":M=H[R]=="none"||H[R]=="one"?"none":"#"+H[R];break;case "linearGradient":case "radialGradient":this.defs.removeChild(this.grad);this.grad=this.defs.appendChild(H[R]);M="url(#"+(this.grad.id="gradbox_"+
this.type)+")"}this.rect.setAttribute("fill",M);this.rect.setAttribute("opacity",Z);if(this.type=="canvas")if(R=document.getElementById("canvas_background")){ra=e.getResolution();R.setAttribute("x",-1);R.setAttribute("y",-1);R.setAttribute("width",ra.w+2);R.setAttribute("height",ra.h+2);M.indexOf("url")==-1&&R.setAttribute("fill",M)}else Ca(M);if(L){e.setColor(this.type,M,true);e.setPaintOpacity(this.type,Z,true)}};this.update=function(H){if(T){var L=this.type;switch(T.tagName){case "use":case "image":case "foreignObject":return;
case "g":case "a":for(var M=null,R=T.getElementsByTagName("*"),Z=0,ea=R.length;Z<ea;Z++){var W=R[Z].getAttribute(L);if(Z===0)M=W;else if(M!==W){M=null;break}}if(M===null){R=null;return}R=M;M=1;break;default:M=parseFloat(T.getAttribute(L+"-opacity"));if(isNaN(M))M=1;R=L==="fill"?"black":"none";R=T.getAttribute(L)||R}if(H){e.setColor(L,R,true);e.setPaintOpacity(L,M,true)}M*=100;this.setPaint(Ba(R,M,L))}};this.prep=function(){switch(this.paint.type){case "linearGradient":case "radialGradient":var H=
new a.jGraduate.Paint({copy:this.paint});e.setPaint(v,H)}}};d.paintBox.fill=new c("#fill_color","fill");d.paintBox.stroke=new c("#stroke_color","stroke");d.paintBox.canvas=new c("#canvas_color","canvas");a("#stroke_width").val(curConfig.initStroke.width);a("#group_opacity").val(curConfig.initOpacity*100);c=d.paintBox.fill.rect.cloneNode(false);c.setAttribute("style","vector-effect:non-scaling-stroke");var q=c.style.vectorEffect==="non-scaling-stroke";c.removeAttribute("style");c=d.paintBox.fill.rect.ownerDocument.createElementNS("http://www.w3.org/2000/svg",
"feGaussianBlur");typeof c.stdDeviationX==="undefined"&&a("#tool_blur").hide();a(c).remove();setTimeout(function(){e.embedImage("images/placeholder.svg",function(p){if(!p){a("#image_save_opts [value=embed]").attr("disabled","disabled");a("#image_save_opts input").val(["ref"]);l.img_save="ref";a("#image_opt_embed").css("color","#666").attr("title",uiStrings.notification.featNotSupported)}})},1E3);a("#tool_fill").click(function(){if(a("#tool_fill").hasClass("active"))o(a("#fill_color"));else{a("#tool_fill").addClass("active");
a("#tool_stroke").removeClass("active")}});a("#tool_stroke").on("click",function(){if(a("#tool_stroke").hasClass("active"))o(a("#stroke_color"));else{a("#tool_stroke").addClass("active");a("#tool_fill").removeClass("active")}});a("#tool_canvas").on("click touchstart",function(){o(a("#canvas_color"))});a("#tool_stroke").on("touchstart",function(){a("#tool_stroke").addClass("active");a("#tool_fill").removeClass("active");o(a("#stroke_color"))});a("#tool_fill").on("touchstart",function(){a("#tool_fill").addClass("active");
a("#tool_stroke").removeClass("active");o(a("#fill_color"))});a("#zoom_select").on("change",function(){var p=this.options[this.selectedIndex].text;p=p.split("%")[0];a("#zoom").val(p).trigger("change")});a(".push_button").mousedown(function(){a(this).hasClass("disabled")||a(this).addClass("push_button_pressed").removeClass("push_button")}).mouseout(function(){a(this).removeClass("push_button_pressed").addClass("push_button")}).mouseup(function(){a(this).removeClass("push_button_pressed").addClass("push_button")});
a(window).bind("load resize",function(){E.css("line-height",E.height()+"px")});var u=function(){var p=a("#canvas_width"),v=a("#canvas_height"),w=p.val(),z=v.val();if(w!="fit"&&!svgedit.units.isValidUnit("width",w)){a.alert(uiStrings.notification.invalidAttrValGiven);p.parent().addClass("error");return false}p.parent().removeClass("error");if(z!="fit"&&!svgedit.units.isValidUnit("height",z)){a.alert(uiStrings.notification.invalidAttrValGiven);v.parent().addClass("error");return false}v.parent().removeClass("error");
if(!e.setResolution(w,z)){a.alert(uiStrings.notification.noContentToFitTo);w=e.getResolution();p.val(w.w);v.val(w.h);return false}K()};a("#resolution").change(function(){var p=a("#canvas_width")[0],v=a("#canvas_height")[0];if(this.selectedIndex)if(this.value=="content"){p.value="fit";v.value="fit";u();var w=e.getResolution();p.value=w.w;v.value=w.h}else{var z=this.value.split("x");z[0]=parseInt(z[0]);z[1]=parseInt(z[1]);var H=z[0]-p.value,L=z[1]-v.value,M=Date.now(),R=function(){var Z=(Date.now()-
M)/1E3;Z=Math.pow(Z-1,3)+1;p.value=(z[0]-H+Z*H).toFixed(0);v.value=(z[1]-L+Z*L).toFixed(0);u();if(Z>=1){Z=e.getResolution();a("#canvas_width").val(Z.w.toFixed());a("#canvas_height").val(Z.h.toFixed());a("#resolution_label").html("<div class='pull'>"+Z.w+"<span>\u00d7</span></br>"+Z.h+"</div>")}else requestAnimationFrame(R)};R()}else{a("#resolution_label").html("Custom");p.removeAttribute("readonly");p.focus();p.select();if(p.value=="fit"){p.value=100;v.value=100}}});a("#zoom").change(function(){xa(this)});
a("input,select").attr("autocomplete","off");var F=function(){var p=[{sel:"#tool_select",fn:cb,evt:"click",key:["V",true]},{sel:"#tool_fhpath",fn:Ta,evt:"click",key:["Q",true]},{sel:"#tool_line",fn:Va,evt:"click",key:["L",true]},{sel:"#tool_rect",fn:Ia,evt:"click",key:["R",true],icon:"rect"},{sel:"#tool_ellipse",fn:za,evt:"mouseup",key:["C",true],icon:"ellipse"},{sel:"#tool_path",fn:db,evt:"click",key:["P",true]},{sel:"#tool_text",fn:Ja,evt:"click",key:["T",true]},{sel:"#tool_image",fn:$a,evt:"mouseup"},
{sel:"#tool_zoom",fn:La,evt:"mouseup",key:["Z",true]},{sel:"#tool_clear",fn:Oa,evt:"mouseup",key:[m+"N",true]},{sel:"#tool_save",fn:function(){if(ba)Kb();else{Ea(a("#file_menu"));e.save({images:l.img_save,round_digits:6})}},evt:"mouseup",key:[m+"S",true]},{sel:"#tool_export",fn:nb,evt:"mouseup"},{sel:"#tool_open",fn:Ra,evt:"mouseup"},{sel:"#tool_import",fn:mb,evt:"mouseup"},{sel:"#tool_source",fn:Eb,evt:"click",key:[m+"U",true]},{sel:"#tool_wireframe",fn:Gb,evt:"click"},{sel:"#tool_snap",fn:Hb,evt:"click"},
{sel:"#tool_rulers",fn:Lb,evt:"click"},{sel:"#tool_source_cancel,#svg_source_overlay,#tool_docprops_cancel,#tool_prefs_cancel",fn:Ab,evt:"click",key:["esc",false,false],hidekey:true},{sel:"#tool_source_save",fn:Kb,evt:"click"},{sel:"#tool_delete,#tool_delete_multi",fn:lb,evt:"click",key:["del/backspace",true]},{sel:"#tool_reorient",fn:ob,evt:"click"},{sel:"#tool_node_link",fn:tb,evt:"change"},{sel:"#tool_node_clone",fn:la,evt:"click"},{sel:"#tool_node_delete",fn:da,evt:"click"},{sel:"#tool_openclose_path",
fn:P,evt:"click"},{sel:"#tool_add_subpath",fn:na,evt:"click"},{sel:"#tool_move_top",fn:wa,evt:"click",key:m+"shift+up"},{sel:"#tool_move_bottom",fn:hb,evt:"click",key:m+"shift+down"},{sel:"#tool_move_up",fn:eb,evt:"click",key:[m+"up",true]},{sel:"#tool_move_down",fn:sb,evt:"click",key:[m+"down",true]},{sel:"#tool_topath",fn:ab,evt:"click"},{sel:"#tool_make_link,#tool_make_link_multi",fn:pb,evt:"click"},{sel:"#tool_clone,#tool_clone_multi",fn:Fb,evt:"click",key:[m+"D",true]},{sel:"#tool_group",fn:Bb,
evt:"click",key:[m+"G",true]},{sel:"#tool_ungroup",fn:Bb,evt:"click",key:m+"shift+G"},{sel:"#tool_unlink_use",fn:Bb,evt:"click"},{sel:"[id^=tool_align]",fn:bb,evt:"click"},{sel:"#tool_undo",fn:qb,evt:"click",key:m+"z"},{sel:"#tool_redo",fn:rb,evt:"click",key:["y",true]},{sel:"#tool_cut",fn:Ua,evt:"click",key:[m+"x",true]},{sel:"#tool_copy",fn:Xa,evt:"click",key:m+"c"},{sel:"#tool_paste",fn:wb,evt:"click",key:m+"v"},{sel:"#tool_switch",fn:Ma,evt:"click",key:["x",true]},{sel:"#tool_bold",fn:Wa,evt:"mousedown",
key:[m+"B",true]},{sel:"#tool_italic",fn:Za,evt:"mousedown",key:[m+"I",true]},{sel:"#copy_save_done",fn:Ab,evt:"click"},{key:"ctrl+left",fn:function(){Ha(0,1)}},{key:"ctrl+right",fn:function(){Ha(1,1)}},{key:"ctrl+shift+left",fn:function(){Ha(0,5)}},{key:"ctrl+shift+right",fn:function(){Ha(1,5)}},{key:"shift+O",fn:fa},{key:"shift+P",fn:S},{key:[m+"+",true],fn:function(){yb(2)}},{key:[m+"-",true],fn:function(){yb(0.5)}},{key:["up",true],fn:function(){fb(0,-1)}},{key:["down",true],fn:function(){fb(0,
1)}},{key:["left",true],fn:function(){fb(-1,0)}},{key:["right",true],fn:function(){fb(1,0)}},{key:"shift+up",fn:function(){fb(0,-10)}},{key:"shift+down",fn:function(){fb(0,10)}},{key:"shift+left",fn:function(){fb(-10,0)}},{key:"shift+right",fn:function(){fb(10,0)}},{key:["alt+up",true],fn:function(){e.cloneSelectedElements(0,-1)}},{key:["alt+down",true],fn:function(){e.cloneSelectedElements(0,1)}},{key:["alt+left",true],fn:function(){e.cloneSelectedElements(-1,0)}},{key:["alt+right",true],fn:function(){e.cloneSelectedElements(1,
0)}},{key:["alt+shift+up",true],fn:function(){e.cloneSelectedElements(0,-10)}},{key:["alt+shift+down",true],fn:function(){e.cloneSelectedElements(0,10)}},{key:["alt+shift+left",true],fn:function(){e.cloneSelectedElements(-10,0)}},{key:["alt+shift+right",true],fn:function(){e.cloneSelectedElements(10,0)}},{key:m+"A",fn:function(){e.selectAllInCurrentLayer()}},{key:"I",fn:function(){var w=a(".tool_button_current");if(w.length&&w[0].id!=="tool_eyedropper"){w.removeClass("tool_button_current").addClass("tool_button");
a("#tool_eyedropper").addClass("tool_button_current").removeClass("tool_button")}e.setMode("eyedropper")}},{key:m+"shift+z",fn:rb},{key:"esc",fn:Ib}],v={"4/Shift+4":"#tools_rect_show","5/Shift+5":"#tools_ellipse_show"};return{setAll:function(){var w={};a.each(p,function(z,H){if(H.sel){var L=a(H.sel);if(L.length==0)return true;if(H.evt){if(svgedit.browser.isTouch()&&H.evt==="click")H.evt="mousedown";L[H.evt](H.fn)}if(H.parent&&a(H.parent+"_show").length!=0){var M=a(H.parent);M.length||(M=oa(H.parent.substr(1)));
M.append(L);a.isArray(w[H.parent])||(w[H.parent]=[]);w[H.parent].push(H)}}if(H.key){var R=H.fn,Z=false;if(a.isArray(H.key)){M=H.key[0];if(H.key.length>1)Z=H.key[1]}else M=H.key;M+="";svgedit.browser.isMac&&M.indexOf("+")!=-1&&M.split("+")[0]=="ctrl"&&M.replace("ctrl","cmd");a.each(M.split("/"),function(W,ha){a(document).bind("keydown",ha,function(ja){R();Z&&ja.preventDefault();return false})});if(H.sel&&!H.hidekey&&L.attr("title")){var ea=L.attr("title").split("[")[0]+" ("+M+")";v[M]=H.sel;L.parents("#main_menu").length||
L.attr("title",ea)}}});Y(w);a(window).bind("keydown","tab",function(z){if(N==="canvas"){z.preventDefault();S()}}).bind("keydown","shift+tab",function(z){if(N==="canvas"){z.preventDefault();fa()}});a("#tool_zoom").dblclick(Sa)},setTitles:function(){a.each(v,function(w,z){var H=a(z).parents("#main_menu").length;a(z).each(function(){var L=H?a(this).text().split(" [")[0]:this.title.split(" [")[0],M="";a.each(w.split("/"),function(R,Z){var ea=Z.split("+"),W="";if(ea.length>1){W=ea[0]+"+";Z=ea[1]}M+=(R?
"/":"")+W+(uiStrings["key_"+Z]||Z)});if(H)this.lastChild.textContent=L+" ["+M+"]";else this.title=L+" ["+M+"]"})})},getButtonData:function(w){var z;a.each(p,function(H,L){if(L.sel===w)z=L});return z}}}();F.setAll();d.ready(function(){var p=curConfig.initTool,v=a("#tools_left, #svg_editor .tools_flyout"),w=v.find("#tool_"+p);p=v.find("#"+p);(w.length?w:p.length?p:a("#tool_select")).click().mouseup();curConfig.wireframe&&a("#tool_wireframe").click();curConfig.showlayers&&toggleSidePanel();a("#rulers").toggle(!!curConfig.showRulers)});
a("#canvas_height").dragInput({min:10,max:null,step:10,callback:u,cursor:false,dragAdjust:0.1});a("#canvas_width").dragInput({min:10,max:null,step:10,callback:u,cursor:false,dragAdjust:0.1});a("#rect_width").dragInput({min:1,max:null,step:1,callback:changeAttribute,cursor:false});a("#rect_height").dragInput({min:1,max:null,step:1,callback:changeAttribute,cursor:false});a("#ellipse_cx").dragInput({min:1,max:null,step:1,callback:changeAttribute,cursor:false});a("#ellipse_cy").dragInput({min:1,max:null,
step:1,callback:changeAttribute,cursor:false});a("#ellipse_rx").dragInput({min:1,max:null,step:1,callback:changeAttribute,cursor:false});a("#ellipse_ry").dragInput({min:1,max:null,step:1,callback:changeAttribute,cursor:false});a("#image_height").dragInput({min:1,max:null,step:1,callback:changeAttribute,cursor:false});a("#circle_cx").dragInput({min:1,max:null,step:1,callback:changeAttribute,cursor:false});a("#circle_cy").dragInput({min:1,max:null,step:1,callback:changeAttribute,cursor:false});a("#circle_r").dragInput({min:1,
max:null,step:1,callback:changeAttribute,cursor:false});a("#image_height").dragInput({min:0,max:null,step:1,callback:changeAttribute,cursor:false});a("#selected_x").dragInput({min:null,max:null,step:1,callback:changeAttribute,cursor:false});a("#selected_y").dragInput({min:null,max:null,step:1,callback:changeAttribute,cursor:false});a("#path_node_x").dragInput({min:null,max:null,step:1,callback:changeAttribute,cursor:false});a("#path_node_y").dragInput({min:null,max:null,step:1,callback:changeAttribute,
cursor:false});a("#image_width").dragInput({min:null,max:null,step:1,callback:changeAttribute,cursor:false});a("#line_x1").dragInput({min:null,max:null,step:1,callback:changeAttribute,cursor:false});a("#line_x2").dragInput({min:null,max:null,step:1,callback:changeAttribute,cursor:false});a("#line_y1").dragInput({min:null,max:null,step:1,callback:changeAttribute,cursor:false});a("#line_y2").dragInput({min:null,max:null,step:1,callback:changeAttribute,cursor:false});a("#path_x").dragInput({min:null,
max:null,step:1,callback:changeAttribute,cursor:false});a("#path_y").dragInput({min:null,max:null,step:1,callback:changeAttribute,cursor:false});a("#rect_x").dragInput({min:null,max:null,step:1,callback:changeAttribute,cursor:false});a("#rect_y").dragInput({min:null,max:null,step:1,callback:changeAttribute,cursor:false});a("#g_x").dragInput({min:null,max:null,step:1,callback:changeAttribute,cursor:false});a("#g_y").dragInput({min:null,max:null,step:1,callback:changeAttribute,cursor:false});a("#image_x").dragInput({min:null,
max:null,step:1,callback:changeAttribute,cursor:false});a("#text_y").dragInput({min:null,max:null,step:1,callback:changeAttribute,cursor:false});a("#text_x").dragInput({min:null,max:null,step:1,callback:changeAttribute,cursor:false});a("#image_y").dragInput({min:null,max:null,step:1,callback:changeAttribute,cursor:false});a("#rect_rx").dragInput({min:0,max:100,step:1,callback:changeAttribute,cursor:true});a("#stroke_width").dragInput({min:0,max:99,step:1,callback:function(p){var v=p.value;if(v==0&&
T&&["line","polyline"].indexOf(T.nodeName)>=0)v=p.value=1;e.setStrokeWidth(v)},cursor:true,smallStep:0.1,start:1.5});a("#angle").dragInput({min:-180,max:180,step:1,callback:function(p){e.setRotationAngle(p.value,true);rotateCursor(p.value);a("#tool_reorient").toggleClass("disabled",p.value==0)},cursor:false,dragAdjust:0.5});a("#font_size").dragInput({min:1,max:250,step:1,callback:function(p){e.setFontSize(p.value)},cursor:true,stepfunc:function(p,v){var w=p.value-0,z=w+v,H=z>=w;if(v===0)return w;
return w>=24?H?Math.round(w*1.1):Math.round(w/1.1):w<=1?H?w*2:w/2:z},dragAdjust:0.15});a("#group_opacity").dragInput({min:0,max:100,step:5,callback:changeAttribute,cursor:true,start:100});a("#blur").dragInput({min:0,max:10,step:0.1,callback:function(p,v){val=p.value;a("#blur").val(val);v?e.setBlur(val,true):e.setBlurNoUndo(val)},cursor:true,start:0});a("#zoom").val(e.getZoom()*100);a("#workarea").contextMenu({menu:"cmenu_canvas",inSpeed:0},function(p){switch(p){case "delete":lb();break;case "cut":Ua();
break;case "copy":Xa();break;case "paste":e.pasteElements();break;case "paste_in_place":e.pasteElements("in_place");break;case "group":e.groupSelectedElements();break;case "ungroup":e.ungroupSelectedElement();break;case "move_front":wa();break;case "move_up":ib("Up");break;case "move_down":ib("Down");break;case "move_back":hb();break;default:svgedit.contextmenu&&svgedit.contextmenu.hasCustomHandler(p)&&svgedit.contextmenu.getCustomHandler(p).call()}});a(".contextMenu li").mousedown(function(p){p.preventDefault()});
a("#cmenu_canvas li").disableContextMenu();I.enableContextMenuItems("#delete,#cut,#copy");window.onbeforeunload=function(){if(n.getUndoStackSize()===0)d.show_save_warning=false;if(!curConfig.no_save_warning&&d.show_save_warning)return uiStrings.notification.unsavedChanges};d.openPrep=function(p){a("#main_menu").hide();n.getUndoStackSize()===0?p(true):a.confirm(uiStrings.notification.QwantToOpen,p)};if(window.FileReader){c=function(p){p.stopPropagation();p.preventDefault();a("#workarea").removeAttr("style");
a("#main_menu").hide();var v=null;if(v=p.type=="drop"?p.dataTransfer.files[0]:this.files[0])if(v.type.indexOf("image")!=-1)if(v.type.indexOf("svg")!=-1){p=new FileReader;p.onloadend=function(w){e.importSvgString(w.target.result,true);e.ungroupSelectedElement();e.ungroupSelectedElement();e.groupSelectedElements();e.alignSelectedElements("m","page");e.alignSelectedElements("c","page")};p.readAsText(v)}else{p=new FileReader;p.onloadend=function(w){insertNewImage=function(M,R){var Z=e.addSvgElementFromJson({element:"image",
attr:{x:0,y:0,width:M,height:R,id:e.getNextId(),style:"pointer-events:inherit"}});e.setHref(Z,w.target.result);e.selectOnly([Z]);e.alignSelectedElements("m","page");e.alignSelectedElements("c","page");qa()};var z=100,H=100,L=new Image;L.src=w.target.result;document.body.appendChild(L);L.onload=function(){z=L.offsetWidth;H=L.offsetHeight;insertNewImage(z,H);document.body.removeChild(L)}};p.readAsDataURL(v)}};E=a("#workarea");E[0].addEventListener("dragenter",function(p){p.stopPropagation();p.preventDefault();
E.css({"-webkit-transform":"scale3d(1.1,1.1,1)","-moz-transform":"scale3d(1.1,1.1,1)","-o-transform":"scale(1.1)","-ms-transform":"scale3d(1.1,1.1,1)",transform:"scale3d(1.1,1.1,1)"})},false);E[0].addEventListener("dragover",function(p){p.stopPropagation();p.preventDefault()},false);E[0].addEventListener("dragleave",function(p){E.removeAttr("style");p.stopPropagation();p.preventDefault()},false);E[0].addEventListener("drop",c,false);var C=a('<input type="file">').change(function(){var p=this;d.openPrep(function(v){if(v){e.clear();
if(p.files.length==1){v=new FileReader;v.onloadend=function(w){h(w.target.result);K()};v.readAsText(p.files[0])}}})});a("#tool_open").show().prepend(C);c=a('<input type="file">').change(c);a("#tool_import").show().prepend(c)}var K=d.updateCanvas=function(p,v){var w=E.width(),z=E.height(),H=w,L=z,M=e.getZoom(),R=E,Z=a("#svgcanvas"),ea={x:R[0].scrollLeft+H/2,y:R[0].scrollTop+L/2},W=curConfig.canvas_expansion;w=Math.max(H,e.contentW*M*W);z=Math.max(L,e.contentH*M*W);w==H&&z==L?E.css("overflow","hidden"):
E.css("overflow","scroll");W=Z.height()/2;var ha=Z.width()/2;Z.width(w).height(z);var ja=z/2,X=w/2,ta=e.updateCanvas(w,z),Aa=X/ha;w=w/2-H/2;z=z/2-L/2;if(v){v.x+=ta.x;v.y+=ta.y}else v={x:X+(ea.x-ha)*Aa,y:ja+(ea.y-W)*Aa};if(p)if(e.contentW>R.width()){E[0].scrollLeft=ta.x-10;E[0].scrollTop=ta.y-10}else{R[0].scrollLeft=w;R[0].scrollTop=z}else{R[0].scrollLeft=v.x-H/2;R[0].scrollTop=v.y-L/2}if(curConfig.showRulers){H=Z;M=M;document.getElementById("workarea");document.getElementById("title_show");M||(M=
e.getZoom());H||(H=a("#svgcanvas"));L=e.getContentElem();R=svgedit.units.getTypeMap()[curConfig.baseUnit];for(Z=0;Z<2;Z++){ha=(ea=Z===0)?"x":"y";Aa=ea?"width":"height";W=L.getAttribute(ha)-0;ha=a("#ruler_"+ha+" canvas:first");$hcanv=ha.clone();ha.replaceWith($hcanv);w=$hcanv[0];ja=ha=H[Aa]()*2;w.parentNode.style[Aa]=ja+"px";X=0;var Fa;ta=w.getContext("2d");ta.fillStyle="rgb(200,0,0)";ta.fillRect(0,0,w.width,w.height);$hcanv.siblings().remove();if(ha>=3E4){var Ga=parseInt(ha/3E4)+1;Fa=Array(Ga);Fa[0]=
ta;for(z=1;z<Ga;z++){w[Aa]=3E4;var Pa=w.cloneNode(true);w.parentNode.appendChild(Pa);Fa[z]=Pa.getContext("2d")}Pa[Aa]=ha%3E4;ha=3E4}w[Aa]=ha;Aa=R*M;var Qa=50/Aa;w=1;for(z=0;z<G.length;z++){w=Ga=G[z];if(Qa<=Ga)break}Qa=w*Aa;ta.font="normal 9px 'Lucida Grande', sans-serif";ta.fillStyle="#777";for(var Na=W/Aa%w*Aa,jb=Na-Qa;Na<ja;Na+=Qa){jb+=Qa;z=Math.round(Na)+0.5;if(ea){ta.moveTo(z,15);ta.lineTo(z,0)}else{ta.moveTo(15,z);ta.lineTo(0,z)}Ga=(jb-W)/Aa;if(w>=1)z=Math.round(Ga);else{z=(w+"").split(".")[1].length;
z=Ga.toFixed(z)-0}if(z!==0&&z!==1E3&&z%1E3===0)z=z/1E3+"K";if(ea){ta.fillText(z,Na+2,8);ta.fillStyle="#777"}else{Ga=(z+"").split("");for(z=0;z<Ga.length;z++){ta.fillText(Ga[z],1,Na+9+z*9);ta.fillStyle="#777"}}Ga=Qa/10;for(z=1;z<10;z++){var ub=Math.round(Na+Ga*z)+0.5;if(Fa&&ub>ha){X++;ta.stroke();if(X>=Fa.length){z=10;Na=ja;continue}ta=Fa[X];Na-=3E4;ub=Math.round(Na+Ga*z)+0.5}var Cb=z%2?12:10;if(ea){ta.moveTo(ub,15);ta.lineTo(ub,Cb)}else{ta.moveTo(15,ub);ta.lineTo(Cb,ub)}}}ta.strokeStyle="#666";ta.stroke()}E.scroll()}},
G=[];for(c=0.1;c<1E5;c*=10){G.push(1*c);G.push(2*c);G.push(5*c)}K(true);try{var A=function(p){if(window.JSON&&JSON.stringify)return JSON.stringify(p);var v=arguments.callee;if(typeof p=="boolean"||typeof p=="number")return p+"";else if(typeof p=="string")return'"'+p.replace(/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,function(H){return"\\u"+("0000"+H.charCodeAt(0).toString(16)).slice(-4)})+'"';else if(p.length){for(var w=
0;w<p.length;w++)p[w]=v(p[w]);return"["+p.join(",")+"]"}else{w=[];for(var z in p)w.push(v(z)+":"+v(p[z]));return"{"+w.join(",")+"}"}};window.addEventListener("message",function(p){var v=parseInt(p.data.substr(0,p.data.indexOf(";")));try{p.source.postMessage("SVGe"+v+";"+A(eval(p.data)),"*")}catch(w){p.source.postMessage("SVGe"+v+";error:"+w.message,"*")}},false)}catch(J){window.embed_error=J}a(function(){window.svgCanvas=e;e.ready=methodDraw.ready});d.setLang=function(p,v){a.pref("lang",p);a("#lang_select").val(p);
if(v){e.runExtensions("langChanged",p);ma();a.each({"#stroke_color":"#tool_stroke .icon_label, #tool_stroke .color_block","#fill_color":"#tool_fill label, #tool_fill .color_block","#linejoin_miter":"#cur_linejoin","#linecap_butt":"#cur_linecap"},function(w,z){a(z).attr("title",a(w)[0].title)});a("#multiselected_panel div[id^=tool_align]").each(function(){a("#tool_pos"+this.id.substr(10))[0].title=this.title})}}};var b=[];d.ready=function(c){g?c():b.push(c)};d.runCallbacks=function(){a.each(b,function(){this()});
g=true};d.loadFromString=function(c){d.ready(function(){h(c)})};d.loadFromURL=function(c,k){k||(k={});var m=k.cache,s=k.callback;d.ready(function(){a.ajax({url:c,dataType:"text",cache:!!m,success:function(n){h(n,s)},error:function(n,B,D){n.status!=404&&n.responseText?h(n.responseText,s):a.alert(uiStrings.notification.URLloadFail+": \n"+D+"",s)}})})};d.loadFromDataURI=function(c){d.ready(function(){var k=c.substring(26);h(svgedit.utilities.decode64(k))})};d.addExtension=function(){var c=arguments;
a(function(){e&&e.addExtension.apply(this,c)})};return d}(jQuery);$(methodDraw.init)})();$.fn.dragInput=function(a){return this.each(function(){this.repeating=false;this.dragCfg={min:a&&!isNaN(parseFloat(a.min))?Number(a.min):null,max:a&&!isNaN(parseFloat(a.max))?Number(a.max):null,step:a&&Number(a.step)?a.step:1,stepfunc:a&&a.stepfunc?a.stepfunc:false,dragAdjust:a&&a.dragAdjust?a.dragAdjust:1,height:70,cursor:a&&a.cursor?Boolean(a.cursor):false,start:a&&a.start?Number(a.start):0,_btn_width:20,_direction:null,_delay:null,_repeat:null,callback:a&&a.callback?a.callback:null};this.dragCfg.smallStep=
a&&a.smallStep?a.smallStep:this.dragCfg.step/2;var h=this.dragCfg.dragAdjust,e=$(this).parent(),d=$(this),g=this.dragCfg.height,l=this.dragCfg.min,f=this.dragCfg.max,b=this.dragCfg.step,c=f-l>0?(f-l)/b:200,k=c/g*b,m=0,s=this.getAttribute("data-attr"),n=methodDraw.canvas,B=svgedit.browser.isTouch(),D=true,E=c&&this.dragCfg.cursor?$("<div class='draginput_cursor' />").appendTo(e):false;d.attr("readonly","readonly");E&&!isNaN(this.dragCfg.start)&&E.css("top",this.dragCfg.start*-1/k+g);this.adjustValue=
function(I,Q){var O;I=parseFloat(I);O=isNaN(this.value)?this.dragCfg.reset:$.isFunction(this.dragCfg.stepfunc)?this.dragCfg.stepfunc(this,I):Number((Number(this.value)+Number(I)).toFixed(5));if(f!==null)O=Math.min(O,f);if(l!==null)O=Math.max(O,l);E&&this.updateCursor(O);this.value=O;e.attr("data-value",O);$.isFunction(this.dragCfg.callback)&&this.dragCfg.callback(this,Q)};e.toggleClass("draginput",e.is("label"));this.move=function(I,Q,O){if(B)I=I.originalEvent.touches[0];if(m===0)m=Q;Q=(I.pageY-m)*
-1;m=I.pageY;O=Q*k*h;this.adjustValue(O.toFixed(b<1?1:0))};this.stop=function(){var I=n.getSelectedElems();$("body").removeClass("dragging");e.removeClass("active");D=true;$(window).unbind("mousemove.draginput touchmove.draginput mouseup.draginput touchend.draginput");m=0;if(I[0]){I=n.undoMgr.finishUndoableChange();I.isEmpty()||n.undoMgr.addCommandToHistory(I)}this.adjustValue(0,D)};this.updateCursor=function(){var I=parseFloat(this.value)*-1/k+g;E.css("top",I)};this.launch=function(I){var Q=n.getSelectedElems();
if(B)I=I.originalEvent.touches[0];var O=I.pageY,N=this.value,aa=this;n.undoMgr.beginUndoableChange(s,Q);$("body").addClass("dragging");e.addClass("active");$(window).bind("mousemove.draginput touchmove.draginput",function(ga){aa.move(ga,O,parseFloat(N))});$(window).bind("mouseup.draginput touchend.draginput",function(){aa.stop()})};$(this).attr("readonly","readonly").attr("data-scale",k).attr("data-domain",g).attr("data-cursor",E!=false).bind("mousedown touchstart",function(I){this.blur();this.launch(I)}).bind("dblclick taphold",
function(){this.removeAttribute("readonly","readonly");this.focus();this.select()}).keydown(function(I){switch(I.keyCode){case 13:this.adjustValue(0);this.blur()}}).focus(function(){this.getAttribute("readonly")==="readonly"&&this.blur()}).blur(function(){this.setAttribute("readonly","readonly")}).bind("mousewheel",function(I,Q,O,N){Q=n.getSelectedElems();D&&n.undoMgr.beginUndoableChange(s,Q);D=false;clearTimeout(window.undoTimeout);window.undoTimeout=setTimeout(function(){aa.stop()},200);var aa=
this;if(N>0)this.adjustValue(this.dragCfg.step);else N<0&&this.adjustValue(-this.dragCfg.step);I.preventDefault()})})};$.fn.dragInput.updateCursor=function(a){var h=parseFloat(a.value),e=parseFloat(a.getAttribute("data-scale")),d=parseFloat(a.getAttribute("data-domain"));h=h*-1/e+d+"px";a=a.parentNode.lastChild;if(a.className=="draginput_cursor")a.style.top=h};svgedit=svgedit||{};
(function(){var a=this;if(!svgedit.contextmenu)svgedit.contextmenu={};a.contextMenuExtensions={};methodDraw.ready(function(){for(menuItem in contextMenuExtensions){var h=contextMenuExtensions[menuItem];Object.keys(a.contextMenuExtensions).length==0&&$("#cmenu_canvas").append("<li class='separator'>");var e=h.shortcut||"";$("#cmenu_canvas").append("<li class='disabled'><a href='#"+h.id+"'>"+h.label+"<span class='shortcut'>"+e+"</span></a></li>")}});svgedit.contextmenu.resetCustomMenus=function(){a.contextMenuExtensions=
{}};svgedit.contextmenu.add=function(h){if(h&&h.id&&h.label&&h.action&&typeof h.action=="function")if(h.id in a.contextMenuExtensions)console.error('Cannot add extension "'+h.id+'", an extension by that name already exists"');else{console.log("Registed contextmenu item: {id:"+h.id+", label:"+h.label+"}");a.contextMenuExtensions[h.id]=h}else console.error("Menu items must be defined and have at least properties: id, label, action, where action must be a function")};svgedit.contextmenu.hasCustomHandler=
function(h){return a.contextMenuExtensions[h]&&true};svgedit.contextmenu.getCustomHandler=function(h){return a.contextMenuExtensions[h].action}})();(function(a,h){function e(g,l){var f=g.nodeName.toLowerCase();if("area"===f){f=g.parentNode;var b=f.name;if(!g.href||!b||f.nodeName.toLowerCase()!=="map")return false;f=a("img[usemap=#"+b+"]")[0];return!!f&&d(f)}return(/input|select|textarea|button|object/.test(f)?!g.disabled:"a"==f?g.href||l:l)&&d(g)}function d(g){return!a(g).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(!a.ui.version){a.extend(a.ui,{version:"1.8.24",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(g,l){return typeof g==="number"?this.each(function(){var f=
this;setTimeout(function(){a(f).focus();l&&l.call(f)},g)}):this._focus.apply(this,arguments)},scrollParent:function(){var g;g=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,
"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!g.length?a(document):g},zIndex:function(g){if(g!==h)return this.css("zIndex",g);if(this.length){g=a(this[0]);for(var l;g.length&&g[0]!==document;){l=g.css("position");if(l==="absolute"||l==="relative"||l==="fixed"){l=parseInt(g.css("zIndex"),10);if(!isNaN(l)&&l!==0)return l}g=g.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(g){g.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(g,l){function f(m,s,n,B){a.each(b,function(){s-=parseFloat(a.curCSS(m,"padding"+this,true))||0;if(n)s-=parseFloat(a.curCSS(m,"border"+this+"Width",true))||0;if(B)s-=parseFloat(a.curCSS(m,"margin"+this,true))||0});return s}var b=l==="Width"?["Left","Right"]:["Top","Bottom"],c=l.toLowerCase(),
k={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+l]=function(m){if(m===h)return k["inner"+l].call(this);return this.each(function(){a(this).css(c,f(this,m)+"px")})};a.fn["outer"+l]=function(m,s){if(typeof m!=="number")return k["outer"+l].call(this,m);return this.each(function(){a(this).css(c,f(this,m,true,s)+"px")})}});a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(g){return function(l){return!!a.data(l,
g)}}):function(g,l,f){return!!a.data(g,f[3])},focusable:function(g){return e(g,!isNaN(a.attr(g,"tabindex")))},tabbable:function(g){var l=a.attr(g,"tabindex"),f=isNaN(l);return(f||l>=0)&&e(g,!f)}});a(function(){var g=document.body,l=g.appendChild(l=document.createElement("div"));a.extend(l.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=l.offsetHeight===100;a.support.selectstart="onselectstart"in l;g.removeChild(l).style.display="none"});if(!a.curCSS)a.curCSS=a.css;
a.extend(a.ui,{plugin:{add:function(g,l,f){g=a.ui[g].prototype;for(var b in f){g.plugins[b]=g.plugins[b]||[];g.plugins[b].push([l,f[b]])}},call:function(g,l,f){if((l=g.plugins[l])&&g.element[0].parentNode)for(var b=0;b<l.length;b++)g.options[l[b][0]]&&l[b][1].apply(g.element,f)}},contains:function(g,l){return document.compareDocumentPosition?g.compareDocumentPosition(l)&16:g!==l&&g.contains(l)},hasScroll:function(g,l){if(a(g).css("overflow")==="hidden")return false;var f=l&&l==="left"?"scrollLeft":
"scrollTop",b=false;if(g[f]>0)return true;g[f]=1;b=g[f]>0;g[f]=0;return b},isOverAxis:function(g,l,f){return g>l&&g<l+f},isOver:function(g,l,f,b,c,k){return a.ui.isOverAxis(g,f,c)&&a.ui.isOverAxis(l,b,k)}})}})(jQuery);
(function(a,h){if(a.cleanData){var e=a.cleanData;a.cleanData=function(g){for(var l=0,f;(f=g[l])!=null;l++)try{a(f).triggerHandler("remove")}catch(b){}e(g)}}else{var d=a.fn.remove;a.fn.remove=function(g,l){return this.each(function(){if(!l)if(!g||a.filter(g,[this]).length)a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(f){}});return d.call(a(this),g,l)})}}a.widget=function(g,l,f){var b=g.split(".")[0],c;g=g.split(".")[1];c=b+"-"+g;if(!f){f=l;l=a.Widget}a.expr[":"][c]=
function(k){return!!a.data(k,g)};a[b]=a[b]||{};a[b][g]=function(k,m){arguments.length&&this._createWidget(k,m)};l=new l;l.options=a.extend(true,{},l.options);a[b][g].prototype=a.extend(true,l,{namespace:b,widgetName:g,widgetEventPrefix:a[b][g].prototype.widgetEventPrefix||g,widgetBaseClass:c},f);a.widget.bridge(g,a[b][g])};a.widget.bridge=function(g,l){a.fn[g]=function(f){var b=typeof f==="string",c=Array.prototype.slice.call(arguments,1),k=this;f=!b&&c.length?a.extend.apply(null,[true,f].concat(c)):
f;if(b&&f.charAt(0)==="_")return k;b?this.each(function(){var m=a.data(this,g),s=m&&a.isFunction(m[f])?m[f].apply(m,c):m;if(s!==m&&s!==h){k=s;return false}}):this.each(function(){var m=a.data(this,g);m?m.option(f||{})._init():a.data(this,g,new l(f,this))});return k}};a.Widget=function(g,l){arguments.length&&this._createWidget(g,l)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(g,l){a.data(l,this.widgetName,this);this.element=a(l);this.options=
a.extend(true,{},this.options,this._getCreateOptions(),g);var f=this;this.element.bind("remove."+this.widgetName,function(){f.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(g,l){var f=g;if(arguments.length===0)return a.extend({},this.options);if(typeof g==="string"){if(l===h)return this.options[g];f={};f[g]=l}this._setOptions(f);return this},_setOptions:function(g){var l=this;a.each(g,function(f,b){l._setOption(f,b)});return this},_setOption:function(g,l){this.options[g]=l;if(g==="disabled")this.widget()[l?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
l);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(g,l,f){var b,c=this.options[g];f=f||{};l=a.Event(l);l.type=(g===this.widgetEventPrefix?g:this.widgetEventPrefix+g).toLowerCase();l.target=this.element[0];if(g=l.originalEvent)for(b in g)b in l||(l[b]=g[b]);this.element.trigger(l,f);return!(a.isFunction(c)&&c.call(this.element[0],l,f)===false||l.isDefaultPrevented())}}})(jQuery);
(function(a){var h=false;a(document).mouseup(function(){h=false});a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(d){return e._mouseDown(d)}).bind("click."+this.widgetName,function(d){if(true===a.data(d.target,e.widgetName+".preventClickEvent")){a.removeData(d.target,e.widgetName+".preventClickEvent");d.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName);this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!h){this._mouseStarted&&this._mouseUp(e);this._mouseDownEvent=e;var d=this,g=e.which==1,l=typeof this.options.cancel=="string"&&e.target.nodeName?a(e.target).closest(this.options.cancel).length:false;if(!g||l||!this._mouseCapture(e))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=
setTimeout(function(){d.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)){this._mouseStarted=this._mouseStart(e)!==false;if(!this._mouseStarted){e.preventDefault();return true}}true===a.data(e.target,this.widgetName+".preventClickEvent")&&a.removeData(e.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(f){return d._mouseMove(f)};this._mouseUpDelegate=function(f){return d._mouseUp(f)};a(document).bind("mousemove."+this.widgetName,
this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);e.preventDefault();return h=true}},_mouseMove:function(e){if(a.browser.msie&&!(document.documentMode>=9)&&!e.button)return this._mouseUp(e);if(this._mouseStarted){this._mouseDrag(e);return e.preventDefault()}if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==false)?this._mouseDrag(e):this._mouseUp(e);return!this._mouseStarted},_mouseUp:function(e){a(document).unbind("mousemove."+
this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;e.target==this._mouseDownEvent.target&&a.data(e.target,this.widgetName+".preventClickEvent",true);this._mouseStop(e)}return false},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},
_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
(function(a){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper==
"original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position="relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable")){this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this}},_mouseCapture:function(h){var e=
this.options;if(this.helper||e.disabled||a(h.target).is(".ui-resizable-handle"))return false;this.handle=this._getHandle(h);if(!this.handle)return false;if(e.iframeFix)a(e.iframeFix===true?"iframe":e.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(a(this).offset()).appendTo("body")});return true},_mouseStart:function(h){var e=this.options;
this.helper=this._createHelper(h);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();if(a.ui.ddmanager)a.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:h.pageX-this.offset.left,top:h.pageY-this.offset.top},parent:this._getParentOffset(),
relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(h);this.originalPageX=h.pageX;this.originalPageY=h.pageY;e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt);e.containment&&this._setContainment();if(this._trigger("start",h)===false){this._clear();return false}this._cacheHelperProportions();a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,h);this._mouseDrag(h,true);a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,h);return true},_mouseDrag:function(h,
e){this.position=this._generatePosition(h);this.positionAbs=this._convertPositionTo("absolute");if(!e){var d=this._uiHash();if(this._trigger("drag",h,d)===false){this._mouseUp({});return false}this.position=d.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";a.ui.ddmanager&&a.ui.ddmanager.drag(this,h);return false},_mouseStop:function(h){var e=false;
if(a.ui.ddmanager&&!this.options.dropBehaviour)e=a.ui.ddmanager.drop(this,h);if(this.dropped){e=this.dropped;this.dropped=false}for(var d=this.element[0],g=false;d&&(d=d.parentNode);)if(d==document)g=true;if(!g&&this.options.helper==="original")return false;if(this.options.revert=="invalid"&&!e||this.options.revert=="valid"&&e||this.options.revert===true||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,e)){var l=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,
10),function(){l._trigger("stop",h)!==false&&l._clear()})}else this._trigger("stop",h)!==false&&this._clear();return false},_mouseUp:function(h){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,h);return a.ui.mouse.prototype._mouseUp.call(this,h)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(h){var e=!this.options.handle||!a(this.options.handle,
this.element).length?true:false;a(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==h.target)e=true});return e},_createHelper:function(h){var e=this.options;h=a.isFunction(e.helper)?a(e.helper.apply(this.element[0],[h])):e.helper=="clone"?this.element.clone().removeAttr("id"):this.element;h.parents("body").length||h.appendTo(e.appendTo=="parent"?this.element[0].parentNode:e.appendTo);h[0]!=this.element[0]&&!/(fixed|absolute)/.test(h.css("position"))&&h.css("position",
"absolute");return h},_adjustOffsetFromHelper:function(h){if(typeof h=="string")h=h.split(" ");if(a.isArray(h))h={left:+h[0],top:+h[1]||0};if("left"in h)this.offset.click.left=h.left+this.margins.left;if("right"in h)this.offset.click.left=this.helperProportions.width-h.right+this.margins.left;if("top"in h)this.offset.click.top=h.top+this.margins.top;if("bottom"in h)this.offset.click.top=this.helperProportions.height-h.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();
var h=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){h.left+=this.scrollParent.scrollLeft();h.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)h={top:0,left:0};return{top:h.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:h.left+(parseInt(this.offsetParent.css("borderLeftWidth"),
10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var h=this.element.position();return{top:h.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:h.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),
10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var h=this.options;if(h.containment=="parent")h.containment=this.helper[0].parentNode;if(h.containment=="document"||h.containment=="window")this.containment=[h.containment=="document"?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,h.containment=="document"?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,
(h.containment=="document"?0:a(window).scrollLeft())+a(h.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(h.containment=="document"?0:a(window).scrollTop())+(a(h.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(h.containment)&&h.containment.constructor!=Array){h=a(h.containment);var e=h[0];if(e){h.offset();var d=a(e).css("overflow")!=
"hidden";this.containment=[(parseInt(a(e).css("borderLeftWidth"),10)||0)+(parseInt(a(e).css("paddingLeft"),10)||0),(parseInt(a(e).css("borderTopWidth"),10)||0)+(parseInt(a(e).css("paddingTop"),10)||0),(d?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(a(e).css("borderLeftWidth"),10)||0)-(parseInt(a(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(d?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(a(e).css("borderTopWidth"),
10)||0)-(parseInt(a(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=h}}else if(h.containment.constructor==Array)this.containment=h.containment},_convertPositionTo:function(h,e){if(!e)e=this.position;var d=h=="absolute"?1:-1,g=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=/(html|body)/i.test(g[0].tagName);return{top:e.top+
this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():l?0:g.scrollTop())*d),left:e.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():l?0:g.scrollLeft())*d)}},_generatePosition:function(h){var e=this.options,d=this.cssPosition=="absolute"&&
!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(d[0].tagName),l=h.pageX,f=h.pageY;if(this.originalPosition){var b;if(this.containment){if(this.relative_container){b=this.relative_container.offset();b=[this.containment[0]+b.left,this.containment[1]+b.top,this.containment[2]+b.left,this.containment[3]+b.top]}else b=this.containment;if(h.pageX-this.offset.click.left<b[0])l=b[0]+this.offset.click.left;
if(h.pageY-this.offset.click.top<b[1])f=b[1]+this.offset.click.top;if(h.pageX-this.offset.click.left>b[2])l=b[2]+this.offset.click.left;if(h.pageY-this.offset.click.top>b[3])f=b[3]+this.offset.click.top}if(e.grid){f=e.grid[1]?this.originalPageY+Math.round((f-this.originalPageY)/e.grid[1])*e.grid[1]:this.originalPageY;f=b?!(f-this.offset.click.top<b[1]||f-this.offset.click.top>b[3])?f:!(f-this.offset.click.top<b[1])?f-e.grid[1]:f+e.grid[1]:f;l=e.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/
e.grid[0])*e.grid[0]:this.originalPageX;l=b?!(l-this.offset.click.left<b[0]||l-this.offset.click.left>b[2])?l:!(l-this.offset.click.left<b[0])?l-e.grid[0]:l+e.grid[0]:l}}return{top:f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:d.scrollTop()),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<
526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(h,e,d){d=d||this._uiHash();a.ui.plugin.call(this,h,[e,d]);if(h=="drag")this.positionAbs=this._convertPositionTo("absolute");return a.Widget.prototype._trigger.call(this,h,e,
d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.extend(a.ui.draggable,{version:"1.8.24"});a.ui.plugin.add("draggable","connectToSortable",{start:function(h,e){var d=a(this).data("draggable"),g=d.options,l=a.extend({},e,{item:d.element});d.sortables=[];a(g.connectToSortable).each(function(){var f=a.data(this,"sortable");if(f&&!f.options.disabled){d.sortables.push({instance:f,shouldRevert:f.options.revert});
f.refreshPositions();f._trigger("activate",h,l)}})},stop:function(h,e){var d=a(this).data("draggable"),g=a.extend({},e,{item:d.element});a.each(d.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;d.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(h);this.instance.options.helper=this.instance.options._helper;d.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=
false;this.instance._trigger("deactivate",h,g)}})},drag:function(h,e){var d=a(this).data("draggable"),g=this;a.each(d.sortables,function(){this.instance.positionAbs=d.positionAbs;this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=a(g).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",true);
this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return e.helper[0]};h.target=this.instance.currentItem[0];this.instance._mouseCapture(h,true);this.instance._mouseStart(h,true,true);this.instance.offset.click.top=d.offset.click.top;this.instance.offset.click.left=d.offset.click.left;this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top;
d._trigger("toSortable",h);d.dropped=this.instance.element;d.currentItem=d.element;this.instance.fromOutside=d}this.instance.currentItem&&this.instance._mouseDrag(h)}else if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",h,this.instance._uiHash(this.instance));this.instance._mouseStop(h,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();this.instance.placeholder&&
this.instance.placeholder.remove();d._trigger("fromSortable",h);d.dropped=false}})}});a.ui.plugin.add("draggable","cursor",{start:function(){var h=a("body"),e=a(this).data("draggable").options;if(h.css("cursor"))e._cursor=h.css("cursor");h.css("cursor",e.cursor)},stop:function(){var h=a(this).data("draggable").options;h._cursor&&a("body").css("cursor",h._cursor)}});a.ui.plugin.add("draggable","opacity",{start:function(h,e){var d=a(e.helper),g=a(this).data("draggable").options;if(d.css("opacity"))g._opacity=
d.css("opacity");d.css("opacity",g.opacity)},stop:function(h,e){var d=a(this).data("draggable").options;d._opacity&&a(e.helper).css("opacity",d._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(){var h=a(this).data("draggable");if(h.scrollParent[0]!=document&&h.scrollParent[0].tagName!="HTML")h.overflowOffset=h.scrollParent.offset()},drag:function(h){var e=a(this).data("draggable"),d=e.options,g=false;if(e.scrollParent[0]!=document&&e.scrollParent[0].tagName!="HTML"){if(!d.axis||d.axis!=
"x")if(e.overflowOffset.top+e.scrollParent[0].offsetHeight-h.pageY<d.scrollSensitivity)e.scrollParent[0].scrollTop=g=e.scrollParent[0].scrollTop+d.scrollSpeed;else if(h.pageY-e.overflowOffset.top<d.scrollSensitivity)e.scrollParent[0].scrollTop=g=e.scrollParent[0].scrollTop-d.scrollSpeed;if(!d.axis||d.axis!="y")if(e.overflowOffset.left+e.scrollParent[0].offsetWidth-h.pageX<d.scrollSensitivity)e.scrollParent[0].scrollLeft=g=e.scrollParent[0].scrollLeft+d.scrollSpeed;else if(h.pageX-e.overflowOffset.left<
d.scrollSensitivity)e.scrollParent[0].scrollLeft=g=e.scrollParent[0].scrollLeft-d.scrollSpeed}else{if(!d.axis||d.axis!="x")if(h.pageY-a(document).scrollTop()<d.scrollSensitivity)g=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed);else if(a(window).height()-(h.pageY-a(document).scrollTop())<d.scrollSensitivity)g=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed);if(!d.axis||d.axis!="y")if(h.pageX-a(document).scrollLeft()<d.scrollSensitivity)g=a(document).scrollLeft(a(document).scrollLeft()-
d.scrollSpeed);else if(a(window).width()-(h.pageX-a(document).scrollLeft())<d.scrollSensitivity)g=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)}g!==false&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(e,h)}});a.ui.plugin.add("draggable","snap",{start:function(){var h=a(this).data("draggable"),e=h.options;h.snapElements=[];a(e.snap.constructor!=String?e.snap.items||":data(draggable)":e.snap).each(function(){var d=a(this),g=d.offset();this!=h.element[0]&&h.snapElements.push({item:this,
width:d.outerWidth(),height:d.outerHeight(),top:g.top,left:g.left})})},drag:function(h,e){for(var d=a(this).data("draggable"),g=d.options,l=g.snapTolerance,f=e.offset.left,b=f+d.helperProportions.width,c=e.offset.top,k=c+d.helperProportions.height,m=d.snapElements.length-1;m>=0;m--){var s=d.snapElements[m].left,n=s+d.snapElements[m].width,B=d.snapElements[m].top,D=B+d.snapElements[m].height;if(s-l<f&&f<n+l&&B-l<c&&c<D+l||s-l<f&&f<n+l&&B-l<k&&k<D+l||s-l<b&&b<n+l&&B-l<c&&c<D+l||s-l<b&&b<n+l&&B-l<k&&
k<D+l){if(g.snapMode!="inner"){var E=Math.abs(B-k)<=l,I=Math.abs(D-c)<=l,Q=Math.abs(s-b)<=l,O=Math.abs(n-f)<=l;if(E)e.position.top=d._convertPositionTo("relative",{top:B-d.helperProportions.height,left:0}).top-d.margins.top;if(I)e.position.top=d._convertPositionTo("relative",{top:D,left:0}).top-d.margins.top;if(Q)e.position.left=d._convertPositionTo("relative",{top:0,left:s-d.helperProportions.width}).left-d.margins.left;if(O)e.position.left=d._convertPositionTo("relative",{top:0,left:n}).left-d.margins.left}var N=
E||I||Q||O;if(g.snapMode!="outer"){E=Math.abs(B-c)<=l;I=Math.abs(D-k)<=l;Q=Math.abs(s-f)<=l;O=Math.abs(n-b)<=l;if(E)e.position.top=d._convertPositionTo("relative",{top:B,left:0}).top-d.margins.top;if(I)e.position.top=d._convertPositionTo("relative",{top:D-d.helperProportions.height,left:0}).top-d.margins.top;if(Q)e.position.left=d._convertPositionTo("relative",{top:0,left:s}).left-d.margins.left;if(O)e.position.left=d._convertPositionTo("relative",{top:0,left:n-d.helperProportions.width}).left-d.margins.left}if(!d.snapElements[m].snapping&&
(E||I||Q||O||N))d.options.snap.snap&&d.options.snap.snap.call(d.element,h,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item}));d.snapElements[m].snapping=E||I||Q||O||N}else{d.snapElements[m].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,h,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item}));d.snapElements[m].snapping=false}}}});a.ui.plugin.add("draggable","stack",{start:function(){var h=a(this).data("draggable").options;h=a.makeArray(a(h.stack)).sort(function(d,g){return(parseInt(a(d).css("zIndex"),
10)||0)-(parseInt(a(g).css("zIndex"),10)||0)});if(h.length){var e=parseInt(h[0].style.zIndex)||0;a(h).each(function(d){this.style.zIndex=e+d});this[0].style.zIndex=e+h.length}}});a.ui.plugin.add("draggable","zIndex",{start:function(h,e){var d=a(e.helper),g=a(this).data("draggable").options;if(d.css("zIndex"))g._zIndex=d.css("zIndex");d.css("zIndex",g.zIndex)},stop:function(h,e){var d=a(this).data("draggable").options;d._zIndex&&a(e.helper).css("zIndex",d._zIndex)}})})(jQuery);
(function(a){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var h=this.options,e=h.accept;this.isover=0;this.isout=1;this.accept=a.isFunction(e)?e:function(d){return d.is(e)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};a.ui.ddmanager.droppables[h.scope]=a.ui.ddmanager.droppables[h.scope]||[];a.ui.ddmanager.droppables[h.scope].push(this);
h.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var h=a.ui.ddmanager.droppables[this.options.scope],e=0;e<h.length;e++)h[e]==this&&h.splice(e,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(h,e){if(h=="accept")this.accept=a.isFunction(e)?e:function(d){return d.is(e)};a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(h){var e=a.ui.ddmanager.current;this.options.activeClass&&
this.element.addClass(this.options.activeClass);e&&this._trigger("activate",h,this.ui(e))},_deactivate:function(h){var e=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);e&&this._trigger("deactivate",h,this.ui(e))},_over:function(h){var e=a.ui.ddmanager.current;if(!(!e||(e.currentItem||e.element)[0]==this.element[0]))if(this.accept.call(this.element[0],e.currentItem||e.element)){this.options.hoverClass&&this.element.addClass(this.options.hoverClass);
this._trigger("over",h,this.ui(e))}},_out:function(h){var e=a.ui.ddmanager.current;if(!(!e||(e.currentItem||e.element)[0]==this.element[0]))if(this.accept.call(this.element[0],e.currentItem||e.element)){this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("out",h,this.ui(e))}},_drop:function(h,e){var d=e||a.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return false;var g=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var l=
a.data(this,"droppable");if(l.options.greedy&&!l.options.disabled&&l.options.scope==d.options.scope&&l.accept.call(l.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(l,{offset:l.element.offset()}),l.options.tolerance)){g=true;return false}});if(g)return false;if(this.accept.call(this.element[0],d.currentItem||d.element)){this.options.activeClass&&this.element.removeClass(this.options.activeClass);this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("drop",
h,this.ui(d));return this.element}return false},ui:function(h){return{draggable:h.currentItem||h.element,helper:h.helper,position:h.position,offset:h.positionAbs}}});a.extend(a.ui.droppable,{version:"1.8.24"});a.ui.intersect=function(h,e,d){if(!e.offset)return false;var g=(h.positionAbs||h.position.absolute).left,l=g+h.helperProportions.width,f=(h.positionAbs||h.position.absolute).top,b=f+h.helperProportions.height,c=e.offset.left,k=c+e.proportions.width,m=e.offset.top,s=m+e.proportions.height;switch(d){case "fit":return c<=
g&&l<=k&&m<=f&&b<=s;case "intersect":return c<g+h.helperProportions.width/2&&l-h.helperProportions.width/2<k&&m<f+h.helperProportions.height/2&&b-h.helperProportions.height/2<s;case "pointer":return a.ui.isOver((h.positionAbs||h.position.absolute).top+(h.clickOffset||h.offset.click).top,(h.positionAbs||h.position.absolute).left+(h.clickOffset||h.offset.click).left,m,c,e.proportions.height,e.proportions.width);case "touch":return(f>=m&&f<=s||b>=m&&b<=s||f<m&&b>s)&&(g>=c&&g<=k||l>=c&&l<=k||g<c&&l>k);
default:return false}};a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(h,e){var d=a.ui.ddmanager.droppables[h.options.scope]||[],g=e?e.type:null,l=(h.currentItem||h.element).find(":data(droppable)").andSelf(),f=0;a:for(;f<d.length;f++)if(!(d[f].options.disabled||h&&!d[f].accept.call(d[f].element[0],h.currentItem||h.element))){for(var b=0;b<l.length;b++)if(l[b]==d[f].element[0]){d[f].proportions.height=0;continue a}d[f].visible=d[f].element.css("display")!="none";if(d[f].visible){g==
"mousedown"&&d[f]._activate.call(d[f],e);d[f].offset=d[f].element.offset();d[f].proportions={width:d[f].element[0].offsetWidth,height:d[f].element[0].offsetHeight}}}},drop:function(h,e){var d=false;a.each(a.ui.ddmanager.droppables[h.options.scope]||[],function(){if(this.options){if(!this.options.disabled&&this.visible&&a.ui.intersect(h,this,this.options.tolerance))d=this._drop.call(this,e)||d;if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],h.currentItem||h.element)){this.isout=
1;this.isover=0;this._deactivate.call(this,e)}}});return d},dragStart:function(h,e){h.element.parents(":not(body,html)").bind("scroll.droppable",function(){h.options.refreshPositions||a.ui.ddmanager.prepareOffsets(h,e)})},drag:function(h,e){h.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(h,e);a.each(a.ui.ddmanager.droppables[h.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var d=a.ui.intersect(h,this,this.options.tolerance);if(d=!d&&this.isover==
1?"isout":d&&this.isover==0?"isover":null){var g;if(this.options.greedy){var l=this.options.scope,f=this.element.parents(":data(droppable)").filter(function(){return a.data(this,"droppable").options.scope===l});if(f.length){g=a.data(f[0],"droppable");g.greedyChild=d=="isover"?1:0}}if(g&&d=="isover"){g.isover=0;g.isout=1;g._out.call(g,e)}this[d]=1;this[d=="isout"?"isover":"isout"]=0;this[d=="isover"?"_over":"_out"].call(this,e);if(g&&d=="isout"){g.isout=0;g.isover=1;g._over.call(g,e)}}}})},dragStop:function(h,
e){h.element.parents(":not(body,html)").unbind("scroll.droppable");h.options.refreshPositions||a.ui.ddmanager.prepareOffsets(h,e)}}})(jQuery);
(function(a){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var d=this,g=this.options;this.element.addClass("ui-resizable");a.extend(this,{_aspectRatio:!!g.aspectRatio,aspectRatio:g.aspectRatio,originalElement:this.element,
_proportionallyResizeElements:[],_helper:g.helper||g.ghost||g.animate?g.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));
this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",
zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=g.handles||(!a(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all")this.handles="n,e,s,w,se,sw,ne,nw";var l=this.handles.split(",");
this.handles={};for(var f=0;f<l.length;f++){var b=a.trim(l[f]),c=a('<div class="ui-resizable-handle '+("ui-resizable-"+b)+'"></div>');c.css({zIndex:g.zIndex});"se"==b&&c.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[b]=".ui-resizable-"+b;this.element.append(c)}}this._renderAxis=function(k){k=k||this.element;for(var m in this.handles){if(this.handles[m].constructor==String)this.handles[m]=a(this.handles[m],this.element).show();if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var s=
a(this.handles[m],this.element),n=0;n=/sw|ne|nw|se|n|s/.test(m)?s.outerHeight():s.outerWidth();s=["padding",/ne|nw|n/.test(m)?"Top":/se|sw|s/.test(m)?"Bottom":/^e$/.test(m)?"Right":"Left"].join("");k.css(s,n);this._proportionallyResize()}a(this.handles[m])}};this._renderAxis(this.element);this._handles=a(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!d.resizing){if(this.className)var k=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);d.axis=
k&&k[1]?k[1]:"se"}});if(g.autoHide){this._handles.hide();a(this.element).addClass("ui-resizable-autohide").hover(function(){if(!g.disabled){a(this).removeClass("ui-resizable-autohide");d._handles.show()}},function(){if(!g.disabled)if(!d.resizing){a(this).addClass("ui-resizable-autohide");d._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();var d=function(l){a(l).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};
if(this.elementIsWrapper){d(this.element);var g=this.element;g.after(this.originalElement.css({position:g.css("position"),width:g.outerWidth(),height:g.outerHeight(),top:g.css("top"),left:g.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);d(this.originalElement);return this},_mouseCapture:function(d){var g=false,l;for(l in this.handles)if(a(this.handles[l])[0]==d.target)g=true;return!this.options.disabled&&g},_mouseStart:function(d){var g=this.options,l=this.element.position(),
f=this.element;this.resizing=true;this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()};if(f.is(".ui-draggable")||/absolute/.test(f.css("position")))f.css({position:"absolute",top:l.top,left:l.left});this._renderProxy();l=h(this.helper.css("left"));var b=h(this.helper.css("top"));if(g.containment){l+=a(g.containment).scrollLeft()||0;b+=a(g.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:l,top:b};this.size=this._helper?{width:f.outerWidth(),
height:f.outerHeight()}:{width:f.width(),height:f.height()};this.originalSize=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()};this.originalPosition={left:l,top:b};this.sizeDiff={width:f.outerWidth()-f.width(),height:f.outerHeight()-f.height()};this.originalMousePosition={left:d.pageX,top:d.pageY};this.aspectRatio=typeof g.aspectRatio=="number"?g.aspectRatio:this.originalSize.width/this.originalSize.height||1;g=a(".ui-resizable-"+this.axis).css("cursor");
a("body").css("cursor",g=="auto"?this.axis+"-resize":g);f.addClass("ui-resizable-resizing");this._propagate("start",d);return true},_mouseDrag:function(d){var g=this.helper,l=this.originalMousePosition,f=this._change[this.axis];if(!f)return false;l=f.apply(this,[d,d.pageX-l.left||0,d.pageY-l.top||0]);this._updateVirtualBoundaries(d.shiftKey);if(this._aspectRatio||d.shiftKey)l=this._updateRatio(l,d);l=this._respectSize(l,d);this._propagate("resize",d);g.css({top:this.position.top+"px",left:this.position.left+
"px",width:this.size.width+"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(l);this._trigger("resize",d,this.ui());return false},_mouseStop:function(d){this.resizing=false;var g=this.options;if(this._helper){var l=this._proportionallyResizeElements,f=l.length&&/textarea/i.test(l[0].nodeName);l=f&&a.ui.hasScroll(l[0],"left")?0:this.sizeDiff.height;f=f?0:this.sizeDiff.width;f={width:this.helper.width()-f,height:this.helper.height()-
l};l=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null;var b=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;g.animate||this.element.css(a.extend(f,{top:b,left:l}));this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!g.animate&&this._proportionallyResize()}a("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",d);this._helper&&this.helper.remove();
return false},_updateVirtualBoundaries:function(d){var g=this.options,l,f,b;g={minWidth:e(g.minWidth)?g.minWidth:0,maxWidth:e(g.maxWidth)?g.maxWidth:Infinity,minHeight:e(g.minHeight)?g.minHeight:0,maxHeight:e(g.maxHeight)?g.maxHeight:Infinity};if(this._aspectRatio||d){d=g.minHeight*this.aspectRatio;f=g.minWidth/this.aspectRatio;l=g.maxHeight*this.aspectRatio;b=g.maxWidth/this.aspectRatio;if(d>g.minWidth)g.minWidth=d;if(f>g.minHeight)g.minHeight=f;if(l<g.maxWidth)g.maxWidth=l;if(b<g.maxHeight)g.maxHeight=
b}this._vBoundaries=g},_updateCache:function(d){this.offset=this.helper.offset();if(e(d.left))this.position.left=d.left;if(e(d.top))this.position.top=d.top;if(e(d.height))this.size.height=d.height;if(e(d.width))this.size.width=d.width},_updateRatio:function(d){var g=this.position,l=this.size,f=this.axis;if(e(d.height))d.width=d.height*this.aspectRatio;else if(e(d.width))d.height=d.width/this.aspectRatio;if(f=="sw"){d.left=g.left+(l.width-d.width);d.top=null}if(f=="nw"){d.top=g.top+(l.height-d.height);
d.left=g.left+(l.width-d.width)}return d},_respectSize:function(d){var g=this._vBoundaries,l=this.axis,f=e(d.width)&&g.maxWidth&&g.maxWidth<d.width,b=e(d.height)&&g.maxHeight&&g.maxHeight<d.height,c=e(d.width)&&g.minWidth&&g.minWidth>d.width,k=e(d.height)&&g.minHeight&&g.minHeight>d.height;if(c)d.width=g.minWidth;if(k)d.height=g.minHeight;if(f)d.width=g.maxWidth;if(b)d.height=g.maxHeight;var m=this.originalPosition.left+this.originalSize.width,s=this.position.top+this.size.height,n=/sw|nw|w/.test(l);
l=/nw|ne|n/.test(l);if(c&&n)d.left=m-g.minWidth;if(f&&n)d.left=m-g.maxWidth;if(k&&l)d.top=s-g.minHeight;if(b&&l)d.top=s-g.maxHeight;if((g=!d.width&&!d.height)&&!d.left&&d.top)d.top=null;else if(g&&!d.top&&d.left)d.left=null;return d},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var d=this.helper||this.element,g=0;g<this._proportionallyResizeElements.length;g++){var l=this._proportionallyResizeElements[g];if(!this.borderDif){var f=[l.css("borderTopWidth"),l.css("borderRightWidth"),
l.css("borderBottomWidth"),l.css("borderLeftWidth")],b=[l.css("paddingTop"),l.css("paddingRight"),l.css("paddingBottom"),l.css("paddingLeft")];this.borderDif=a.map(f,function(c,k){var m=parseInt(c,10)||0,s=parseInt(b[k],10)||0;return m+s})}a.browser.msie&&(a(d).is(":hidden")||a(d).parents(":hidden").length)||l.css({height:d.height()-this.borderDif[0]-this.borderDif[2]||0,width:d.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var d=this.options;this.elementOffset=this.element.offset();
if(this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var g=a.browser.msie&&a.browser.version<7,l=g?1:0;g=g?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+g,height:this.element.outerHeight()+g,position:"absolute",left:this.elementOffset.left-l+"px",top:this.elementOffset.top-l+"px",zIndex:++d.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(d,g){return{width:this.originalSize.width+
g}},w:function(d,g){return{left:this.originalPosition.left+g,width:this.originalSize.width-g}},n:function(d,g,l){return{top:this.originalPosition.top+l,height:this.originalSize.height-l}},s:function(d,g,l){return{height:this.originalSize.height+l}},se:function(d,g,l){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[d,g,l]))},sw:function(d,g,l){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[d,g,l]))},ne:function(d,g,l){return a.extend(this._change.n.apply(this,
arguments),this._change.e.apply(this,[d,g,l]))},nw:function(d,g,l){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[d,g,l]))}},_propagate:function(d,g){a.ui.plugin.call(this,d,[g,this.ui()]);d!="resize"&&this._trigger(d,g,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});a.extend(a.ui.resizable,
{version:"1.8.24"});a.ui.plugin.add("resizable","alsoResize",{start:function(){var d=a(this).data("resizable").options,g=function(l){a(l).each(function(){var f=a(this);f.data("resizable-alsoresize",{width:parseInt(f.width(),10),height:parseInt(f.height(),10),left:parseInt(f.css("left"),10),top:parseInt(f.css("top"),10)})})};if(typeof d.alsoResize=="object"&&!d.alsoResize.parentNode)if(d.alsoResize.length){d.alsoResize=d.alsoResize[0];g(d.alsoResize)}else a.each(d.alsoResize,function(l){g(l)});else g(d.alsoResize)},
resize:function(d,g){var l=a(this).data("resizable"),f=l.options,b=l.originalSize,c=l.originalPosition,k={height:l.size.height-b.height||0,width:l.size.width-b.width||0,top:l.position.top-c.top||0,left:l.position.left-c.left||0},m=function(s,n){a(s).each(function(){var B=a(this),D=a(this).data("resizable-alsoresize"),E={},I=n&&n.length?n:B.parents(g.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(I,function(Q,O){var N=(D[O]||0)+(k[O]||0);if(N&&N>=0)E[O]=N||null});
B.css(E)})};typeof f.alsoResize=="object"&&!f.alsoResize.nodeType?a.each(f.alsoResize,function(s,n){m(s,n)}):m(f.alsoResize)},stop:function(){a(this).removeData("resizable-alsoresize")}});a.ui.plugin.add("resizable","animate",{stop:function(d){var g=a(this).data("resizable"),l=g.options,f=g._proportionallyResizeElements,b=f.length&&/textarea/i.test(f[0].nodeName),c=b&&a.ui.hasScroll(f[0],"left")?0:g.sizeDiff.height;b={width:g.size.width-(b?0:g.sizeDiff.width),height:g.size.height-c};c=parseInt(g.element.css("left"),
10)+(g.position.left-g.originalPosition.left)||null;var k=parseInt(g.element.css("top"),10)+(g.position.top-g.originalPosition.top)||null;g.element.animate(a.extend(b,k&&c?{top:k,left:c}:{}),{duration:l.animateDuration,easing:l.animateEasing,step:function(){var m={width:parseInt(g.element.css("width"),10),height:parseInt(g.element.css("height"),10),top:parseInt(g.element.css("top"),10),left:parseInt(g.element.css("left"),10)};f&&f.length&&a(f[0]).css({width:m.width,height:m.height});g._updateCache(m);
g._propagate("resize",d)}})}});a.ui.plugin.add("resizable","containment",{start:function(){var d=a(this).data("resizable"),g=d.element,l=d.options.containment;if(g=l instanceof a?l.get(0):/parent/.test(l)?g.parent().get(0):l){d.containerElement=a(g);if(/document/.test(l)||l==document){d.containerOffset={left:0,top:0};d.containerPosition={left:0,top:0};d.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}}else{var f=
a(g),b=[];a(["Top","Right","Left","Bottom"]).each(function(m,s){b[m]=h(f.css("padding"+s))});d.containerOffset=f.offset();d.containerPosition=f.position();d.containerSize={height:f.innerHeight()-b[3],width:f.innerWidth()-b[1]};l=d.containerOffset;var c=d.containerSize.height,k=d.containerSize.width;k=a.ui.hasScroll(g,"left")?g.scrollWidth:k;c=a.ui.hasScroll(g)?g.scrollHeight:c;d.parentData={element:g,left:l.left,top:l.top,width:k,height:c}}}},resize:function(d){var g=a(this).data("resizable"),l=g.options,
f=g.containerOffset,b=g.position;d=g._aspectRatio||d.shiftKey;var c={top:0,left:0},k=g.containerElement;if(k[0]!=document&&/static/.test(k.css("position")))c=f;if(b.left<(g._helper?f.left:0)){g.size.width+=g._helper?g.position.left-f.left:g.position.left-c.left;if(d)g.size.height=g.size.width/g.aspectRatio;g.position.left=l.helper?f.left:0}if(b.top<(g._helper?f.top:0)){g.size.height+=g._helper?g.position.top-f.top:g.position.top;if(d)g.size.width=g.size.height*g.aspectRatio;g.position.top=g._helper?
f.top:0}g.offset.left=g.parentData.left+g.position.left;g.offset.top=g.parentData.top+g.position.top;l=Math.abs((g._helper?g.offset.left-c.left:g.offset.left-c.left)+g.sizeDiff.width);f=Math.abs((g._helper?g.offset.top-c.top:g.offset.top-f.top)+g.sizeDiff.height);b=g.containerElement.get(0)==g.element.parent().get(0);c=/relative|absolute/.test(g.containerElement.css("position"));if(b&&c)l-=g.parentData.left;if(l+g.size.width>=g.parentData.width){g.size.width=g.parentData.width-l;if(d)g.size.height=
g.size.width/g.aspectRatio}if(f+g.size.height>=g.parentData.height){g.size.height=g.parentData.height-f;if(d)g.size.width=g.size.height*g.aspectRatio}},stop:function(){var d=a(this).data("resizable"),g=d.options,l=d.containerOffset,f=d.containerPosition,b=d.containerElement,c=a(d.helper),k=c.offset(),m=c.outerWidth()-d.sizeDiff.width;c=c.outerHeight()-d.sizeDiff.height;d._helper&&!g.animate&&/relative/.test(b.css("position"))&&a(this).css({left:k.left-f.left-l.left,width:m,height:c});d._helper&&!g.animate&&
/static/.test(b.css("position"))&&a(this).css({left:k.left-f.left-l.left,width:m,height:c})}});a.ui.plugin.add("resizable","ghost",{start:function(){var d=a(this).data("resizable"),g=d.options,l=d.size;d.ghost=d.originalElement.clone();d.ghost.css({opacity:0.25,display:"block",position:"relative",height:l.height,width:l.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof g.ghost=="string"?g.ghost:"");d.ghost.appendTo(d.helper)},resize:function(){var d=a(this).data("resizable");
d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})},stop:function(){var d=a(this).data("resizable");d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}});a.ui.plugin.add("resizable","grid",{resize:function(){var d=a(this).data("resizable"),g=d.options,l=d.size,f=d.originalSize,b=d.originalPosition,c=d.axis;g.grid=typeof g.grid=="number"?[g.grid,g.grid]:g.grid;var k=Math.round((l.width-f.width)/(g.grid[0]||1))*(g.grid[0]||1);g=Math.round((l.height-f.height)/
(g.grid[1]||1))*(g.grid[1]||1);if(/^(se|s|e)$/.test(c)){d.size.width=f.width+k;d.size.height=f.height+g}else if(/^(ne)$/.test(c)){d.size.width=f.width+k;d.size.height=f.height+g;d.position.top=b.top-g}else{if(/^(sw)$/.test(c)){d.size.width=f.width+k;d.size.height=f.height+g}else{d.size.width=f.width+k;d.size.height=f.height+g;d.position.top=b.top-g}d.position.left=b.left-k}}});var h=function(d){return parseInt(d,10)||0},e=function(d){return!isNaN(parseInt(d,10))}})(jQuery);
(function(a){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch"},_create:function(){var h=this;this.element.addClass("ui-selectable");this.dragged=false;var e;this.refresh=function(){e=a(h.options.filter,h.element[0]);e.addClass("ui-selectee");e.each(function(){var d=a(this),g=d.offset();a.data(this,"selectable-item",{element:this,$element:d,left:g.left,top:g.top,right:g.left+d.outerWidth(),bottom:g.top+d.outerHeight(),startselected:false,
selected:d.hasClass("ui-selected"),selecting:d.hasClass("ui-selecting"),unselecting:d.hasClass("ui-unselecting")})})};this.refresh();this.selectees=e.addClass("ui-selectee");this._mouseInit();this.helper=a("<div class='ui-selectable-helper'></div>")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this},_mouseStart:function(h){var e=
this;this.opos=[h.pageX,h.pageY];if(!this.options.disabled){var d=this.options;this.selectees=a(d.filter,this.element[0]);this._trigger("start",h);a(d.appendTo).append(this.helper);this.helper.css({left:h.clientX,top:h.clientY,width:0,height:0});d.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var g=a.data(this,"selectable-item");g.startselected=true;if(!h.metaKey&&!h.ctrlKey){g.$element.removeClass("ui-selected");g.selected=false;g.$element.addClass("ui-unselecting");
g.unselecting=true;e._trigger("unselecting",h,{unselecting:g.element})}});a(h.target).parents().andSelf().each(function(){var g=a.data(this,"selectable-item");if(g){var l=!h.metaKey&&!h.ctrlKey||!g.$element.hasClass("ui-selected");g.$element.removeClass(l?"ui-unselecting":"ui-selected").addClass(l?"ui-selecting":"ui-unselecting");g.unselecting=!l;g.selecting=l;(g.selected=l)?e._trigger("selecting",h,{selecting:g.element}):e._trigger("unselecting",h,{unselecting:g.element});return false}})}},_mouseDrag:function(h){var e=
this;this.dragged=true;if(!this.options.disabled){var d=this.options,g=this.opos[0],l=this.opos[1],f=h.pageX,b=h.pageY;if(g>f){var c=f;f=g;g=c}if(l>b){c=b;b=l;l=c}this.helper.css({left:g,top:l,width:f-g,height:b-l});this.selectees.each(function(){var k=a.data(this,"selectable-item");if(!(!k||k.element==e.element[0])){var m=false;if(d.tolerance=="touch")m=!(k.left>f||k.right<g||k.top>b||k.bottom<l);else if(d.tolerance=="fit")m=k.left>g&&k.right<f&&k.top>l&&k.bottom<b;if(m){if(k.selected){k.$element.removeClass("ui-selected");
k.selected=false}if(k.unselecting){k.$element.removeClass("ui-unselecting");k.unselecting=false}if(!k.selecting){k.$element.addClass("ui-selecting");k.selecting=true;e._trigger("selecting",h,{selecting:k.element})}}else{if(k.selecting)if((h.metaKey||h.ctrlKey)&&k.startselected){k.$element.removeClass("ui-selecting");k.selecting=false;k.$element.addClass("ui-selected");k.selected=true}else{k.$element.removeClass("ui-selecting");k.selecting=false;if(k.startselected){k.$element.addClass("ui-unselecting");
k.unselecting=true}e._trigger("unselecting",h,{unselecting:k.element})}if(k.selected)if(!h.metaKey&&!h.ctrlKey&&!k.startselected){k.$element.removeClass("ui-selected");k.selected=false;k.$element.addClass("ui-unselecting");k.unselecting=true;e._trigger("unselecting",h,{unselecting:k.element})}}}});return false}},_mouseStop:function(h){var e=this;this.dragged=false;a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting");d.unselecting=
false;d.startselected=false;e._trigger("unselected",h,{unselected:d.element})});a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected");d.selecting=false;d.selected=true;d.startselected=true;e._trigger("selected",h,{selected:d.element})});this._trigger("stop",h);this.helper.remove();return false}});a.extend(a.ui.selectable,{version:"1.8.24"})})(jQuery);
(function(a){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var h=this.options;this.containerCache=
{};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?h.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):false;this.offset=this.element.offset();this._mouseInit();this.ready=true},destroy:function(){a.Widget.prototype.destroy.call(this);this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var h=this.items.length-1;h>=0;h--)this.items[h].item.removeData(this.widgetName+
"-item");return this},_setOption:function(h,e){if(h==="disabled"){this.options[h]=e;this.widget()[e?"addClass":"removeClass"]("ui-sortable-disabled")}else a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(h,e){var d=this;if(this.reverting)return false;if(this.options.disabled||this.options.type=="static")return false;this._refreshItems(h);var g=null,l=this;a(h.target).parents().each(function(){if(a.data(this,d.widgetName+"-item")==l){g=a(this);return false}});if(a.data(h.target,
d.widgetName+"-item")==l)g=a(h.target);if(!g)return false;if(this.options.handle&&!e){var f=false;a(this.options.handle,g).find("*").andSelf().each(function(){if(this==h.target)f=true});if(!f)return false}this.currentItem=g;this._removeCurrentsFromItems();return true},_mouseStart:function(h,e,d){e=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(h);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=
this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:h.pageX-this.offset.left,top:h.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(h);this.originalPageX=h.pageX;this.originalPageY=h.pageY;e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt);
this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();e.containment&&this._setContainment();if(e.cursor){if(a("body").css("cursor"))this._storedCursor=a("body").css("cursor");a("body").css("cursor",e.cursor)}if(e.opacity){if(this.helper.css("opacity"))this._storedOpacity=this.helper.css("opacity");this.helper.css("opacity",e.opacity)}if(e.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=
this.helper.css("zIndex");this.helper.css("zIndex",e.zIndex)}if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML")this.overflowOffset=this.scrollParent.offset();this._trigger("start",h,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!d)for(d=this.containers.length-1;d>=0;d--)this.containers[d]._trigger("activate",h,this._uiHash(this));if(a.ui.ddmanager)a.ui.ddmanager.current=this;a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,
h);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(h);return true},_mouseDrag:function(h){this.position=this._generatePosition(h);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs)this.lastPositionAbs=this.positionAbs;if(this.options.scroll){var e=this.options,d=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-h.pageY<e.scrollSensitivity)this.scrollParent[0].scrollTop=
d=this.scrollParent[0].scrollTop+e.scrollSpeed;else if(h.pageY-this.overflowOffset.top<e.scrollSensitivity)this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-e.scrollSpeed;if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-h.pageX<e.scrollSensitivity)this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+e.scrollSpeed;else if(h.pageX-this.overflowOffset.left<e.scrollSensitivity)this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-e.scrollSpeed}else{if(h.pageY-
a(document).scrollTop()<e.scrollSensitivity)d=a(document).scrollTop(a(document).scrollTop()-e.scrollSpeed);else if(a(window).height()-(h.pageY-a(document).scrollTop())<e.scrollSensitivity)d=a(document).scrollTop(a(document).scrollTop()+e.scrollSpeed);if(h.pageX-a(document).scrollLeft()<e.scrollSensitivity)d=a(document).scrollLeft(a(document).scrollLeft()-e.scrollSpeed);else if(a(window).width()-(h.pageX-a(document).scrollLeft())<e.scrollSensitivity)d=a(document).scrollLeft(a(document).scrollLeft()+
e.scrollSpeed)}d!==false&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,h)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(e=this.items.length-1;e>=0;e--){d=this.items[e];var g=d.item[0],l=this._intersectsWithPointer(d);if(l)if(d.instance===this.currentContainer)if(g!=this.currentItem[0]&&
this.placeholder[l==1?"next":"prev"]()[0]!=g&&!a.ui.contains(this.placeholder[0],g)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],g):true)){this.direction=l==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(d))this._rearrange(h,d);else break;this._trigger("change",h,this._uiHash());break}}this._contactContainers(h);a.ui.ddmanager&&a.ui.ddmanager.drag(this,h);this._trigger("sort",h,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},
_mouseStop:function(h,e){if(h){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,h);if(this.options.revert){var d=this,g=d.placeholder.offset();d.reverting=true;a(this.helper).animate({left:g.left-this.offset.parent.left-d.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:g.top-this.offset.parent.top-d.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(h)})}else this._clear(h,
e);return false}},cancel:function(){if(this.dragging){this._mouseUp({target:null});this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var h=this.containers.length-1;h>=0;h--){this.containers[h]._trigger("deactivate",null,this._uiHash(this));if(this.containers[h].containerCache.over){this.containers[h]._trigger("out",null,this._uiHash(this));this.containers[h].containerCache.over=0}}}if(this.placeholder){this.placeholder[0].parentNode&&
this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove();a.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)}return this},serialize:function(h){var e=this._getItemsAsjQuery(h&&h.connected),d=[];h=h||{};a(e).each(function(){var g=(a(h.item||this).attr(h.attribute||
"id")||"").match(h.expression||/(.+)[-=_](.+)/);if(g)d.push((h.key||g[1]+"[]")+"="+(h.key&&h.expression?g[1]:g[2]))});!d.length&&h.key&&d.push(h.key+"=");return d.join("&")},toArray:function(h){var e=this._getItemsAsjQuery(h&&h.connected),d=[];h=h||{};e.each(function(){d.push(a(h.item||this).attr(h.attribute||"id")||"")});return d},_intersectsWith:function(h){var e=this.positionAbs.left,d=e+this.helperProportions.width,g=this.positionAbs.top,l=g+this.helperProportions.height,f=h.left,b=f+h.width,
c=h.top,k=c+h.height,m=this.offset.click.top,s=this.offset.click.left;m=g+m>c&&g+m<k&&e+s>f&&e+s<b;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>h[this.floating?"width":"height"]?m:f<e+this.helperProportions.width/2&&d-this.helperProportions.width/2<b&&c<g+this.helperProportions.height/2&&l-this.helperProportions.height/2<k},_intersectsWithPointer:function(h){var e=this.options.axis===
"x"||a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,h.top,h.height);h=this.options.axis==="y"||a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,h.left,h.width);e=e&&h;h=this._getDragVerticalDirection();var d=this._getDragHorizontalDirection();if(!e)return false;return this.floating?d&&d=="right"||h=="down"?2:1:h&&(h=="down"?2:1)},_intersectsWithSides:function(h){var e=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,h.top+h.height/2,h.height);h=a.ui.isOverAxis(this.positionAbs.left+
this.offset.click.left,h.left+h.width/2,h.width);var d=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return this.floating&&g?g=="right"&&h||g=="left"&&!h:d&&(d=="down"&&e||d=="up"&&!e)},_getDragVerticalDirection:function(){var h=this.positionAbs.top-this.lastPositionAbs.top;return h!=0&&(h>0?"down":"up")},_getDragHorizontalDirection:function(){var h=this.positionAbs.left-this.lastPositionAbs.left;return h!=0&&(h>0?"right":"left")},refresh:function(h){this._refreshItems(h);
this.refreshPositions();return this},_connectWith:function(){var h=this.options;return h.connectWith.constructor==String?[h.connectWith]:h.connectWith},_getItemsAsjQuery:function(h){var e=[],d=[],g=this._connectWith();if(g&&h)for(h=g.length-1;h>=0;h--)for(var l=a(g[h]),f=l.length-1;f>=0;f--){var b=a.data(l[f],this.widgetName);if(b&&b!=this&&!b.options.disabled)d.push([a.isFunction(b.options.items)?b.options.items.call(b.element):a(b.options.items,b.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),
b])}d.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(h=d.length-1;h>=0;h--)d[h][0].each(function(){e.push(this)});return a(e)},_removeCurrentsFromItems:function(){for(var h=this.currentItem.find(":data("+this.widgetName+"-item)"),e=0;e<this.items.length;e++)for(var d=0;d<h.length;d++)h[d]==this.items[e].item[0]&&this.items.splice(e,
1)},_refreshItems:function(h){this.items=[];this.containers=[this];var e=this.items,d=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],h,{item:this.currentItem}):a(this.options.items,this.element),this]],g=this._connectWith();if(g&&this.ready)for(var l=g.length-1;l>=0;l--)for(var f=a(g[l]),b=f.length-1;b>=0;b--){var c=a.data(f[b],this.widgetName);if(c&&c!=this&&!c.options.disabled){d.push([a.isFunction(c.options.items)?c.options.items.call(c.element[0],h,{item:this.currentItem}):
a(c.options.items,c.element),c]);this.containers.push(c)}}for(l=d.length-1;l>=0;l--){h=d[l][1];g=d[l][0];b=0;for(f=g.length;b<f;b++){c=a(g[b]);c.data(this.widgetName+"-item",h);e.push({item:c,instance:h,width:0,height:0,left:0,top:0})}}},refreshPositions:function(h){if(this.offsetParent&&this.helper)this.offset.parent=this._getParentOffset();for(var e=this.items.length-1;e>=0;e--){var d=this.items[e];if(!(d.instance!=this.currentContainer&&this.currentContainer&&d.item[0]!=this.currentItem[0])){var g=
this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item;if(!h){d.width=g.outerWidth();d.height=g.outerHeight()}g=g.offset();d.left=g.left;d.top=g.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;e>=0;e--){g=this.containers[e].element.offset();this.containers[e].containerCache.left=g.left;this.containers[e].containerCache.top=g.top;this.containers[e].containerCache.width=this.containers[e].element.outerWidth();
this.containers[e].containerCache.height=this.containers[e].element.outerHeight()}return this},_createPlaceholder:function(h){var e=h||this,d=e.options;if(!d.placeholder||d.placeholder.constructor==String){var g=d.placeholder;d.placeholder={element:function(){var l=a(document.createElement(e.currentItem[0].nodeName)).addClass(g||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!g)l.style.visibility="hidden";return l},update:function(l,f){if(!(g&&!d.forcePlaceholderSize)){f.height()||
f.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10));f.width()||f.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10))}}}}e.placeholder=a(d.placeholder.element.call(e.element,e.currentItem));e.currentItem.after(e.placeholder);d.placeholder.update(e,e.placeholder)},_contactContainers:function(h){for(var e=null,d=null,g=this.containers.length-
1;g>=0;g--)if(!a.ui.contains(this.currentItem[0],this.containers[g].element[0]))if(this._intersectsWith(this.containers[g].containerCache)){if(!(e&&a.ui.contains(this.containers[g].element[0],e.element[0]))){e=this.containers[g];d=g}}else if(this.containers[g].containerCache.over){this.containers[g]._trigger("out",h,this._uiHash(this));this.containers[g].containerCache.over=0}if(e)if(this.containers.length===1){this.containers[d]._trigger("over",h,this._uiHash(this));this.containers[d].containerCache.over=
1}else if(this.currentContainer!=this.containers[d]){e=1E4;g=null;for(var l=this.positionAbs[this.containers[d].floating?"left":"top"],f=this.items.length-1;f>=0;f--)if(a.ui.contains(this.containers[d].element[0],this.items[f].item[0])){var b=this.containers[d].floating?this.items[f].item.offset().left:this.items[f].item.offset().top;if(Math.abs(b-l)<e){e=Math.abs(b-l);g=this.items[f];this.direction=b-l>0?"down":"up"}}if(g||this.options.dropOnEmpty){this.currentContainer=this.containers[d];g?this._rearrange(h,
g,null,true):this._rearrange(h,null,this.containers[d].element,true);this._trigger("change",h,this._uiHash());this.containers[d]._trigger("change",h,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[d]._trigger("over",h,this._uiHash(this));this.containers[d].containerCache.over=1}}},_createHelper:function(h){var e=this.options;h=a.isFunction(e.helper)?a(e.helper.apply(this.element[0],[h,this.currentItem])):e.helper=="clone"?this.currentItem.clone():
this.currentItem;h.parents("body").length||a(e.appendTo!="parent"?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(h[0]);if(h[0]==this.currentItem[0])this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};if(h[0].style.width==""||e.forceHelperSize)h.width(this.currentItem.width());if(h[0].style.height==""||e.forceHelperSize)h.height(this.currentItem.height());
return h},_adjustOffsetFromHelper:function(h){if(typeof h=="string")h=h.split(" ");if(a.isArray(h))h={left:+h[0],top:+h[1]||0};if("left"in h)this.offset.click.left=h.left+this.margins.left;if("right"in h)this.offset.click.left=this.helperProportions.width-h.right+this.margins.left;if("top"in h)this.offset.click.top=h.top+this.margins.top;if("bottom"in h)this.offset.click.top=this.helperProportions.height-h.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();
var h=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){h.left+=this.scrollParent.scrollLeft();h.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)h={top:0,left:0};return{top:h.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:h.left+(parseInt(this.offsetParent.css("borderLeftWidth"),
10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var h=this.currentItem.position();return{top:h.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:h.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions=
{width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var h=this.options;if(h.containment=="parent")h.containment=this.helper[0].parentNode;if(h.containment=="document"||h.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(h.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(h.containment=="document"?document:window).height()||
document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(h.containment)){var e=a(h.containment)[0];h=a(h.containment).offset();var d=a(e).css("overflow")!="hidden";this.containment=[h.left+(parseInt(a(e).css("borderLeftWidth"),10)||0)+(parseInt(a(e).css("paddingLeft"),10)||0)-this.margins.left,h.top+(parseInt(a(e).css("borderTopWidth"),10)||0)+(parseInt(a(e).css("paddingTop"),10)||0)-this.margins.top,h.left+(d?Math.max(e.scrollWidth,
e.offsetWidth):e.offsetWidth)-(parseInt(a(e).css("borderLeftWidth"),10)||0)-(parseInt(a(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,h.top+(d?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(a(e).css("borderTopWidth"),10)||0)-(parseInt(a(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(h,e){if(!e)e=this.position;var d=h=="absolute"?1:-1,g=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=
document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=/(html|body)/i.test(g[0].tagName);return{top:e.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():l?0:g.scrollTop())*d),left:e.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():
l?0:g.scrollLeft())*d)}},_generatePosition:function(h){var e=this.options,d=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(d[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]))this.offset.relative=this._getRelativeOffset();var l=h.pageX,f=h.pageY;if(this.originalPosition){if(this.containment){if(h.pageX-
this.offset.click.left<this.containment[0])l=this.containment[0]+this.offset.click.left;if(h.pageY-this.offset.click.top<this.containment[1])f=this.containment[1]+this.offset.click.top;if(h.pageX-this.offset.click.left>this.containment[2])l=this.containment[2]+this.offset.click.left;if(h.pageY-this.offset.click.top>this.containment[3])f=this.containment[3]+this.offset.click.top}if(e.grid){f=this.originalPageY+Math.round((f-this.originalPageY)/e.grid[1])*e.grid[1];f=this.containment?!(f-this.offset.click.top<
this.containment[1]||f-this.offset.click.top>this.containment[3])?f:!(f-this.offset.click.top<this.containment[1])?f-e.grid[1]:f+e.grid[1]:f;l=this.originalPageX+Math.round((l-this.originalPageX)/e.grid[0])*e.grid[0];l=this.containment?!(l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2])?l:!(l-this.offset.click.left<this.containment[0])?l-e.grid[0]:l+e.grid[0]:l}}return{top:f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&
this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:d.scrollTop()),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:d.scrollLeft())}},_rearrange:function(h,e,d,g){d?d[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?e.item[0]:e.item[0].nextSibling);this.counter=
this.counter?++this.counter:1;var l=this,f=this.counter;window.setTimeout(function(){f==l.counter&&l.refreshPositions(!g)},0)},_clear:function(h,e){this.reverting=false;var d=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var g in this._storedCSS)if(this._storedCSS[g]=="auto"||this._storedCSS[g]=="static")this._storedCSS[g]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();
this.fromOutside&&!e&&d.push(function(l){this._trigger("receive",l,this._uiHash(this.fromOutside))});if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!e)d.push(function(l){this._trigger("update",l,this._uiHash())});if(this!==this.currentContainer)if(!e){d.push(function(l){this._trigger("remove",l,this._uiHash())});d.push(function(l){return function(f){l._trigger("receive",f,this._uiHash(this))}}.call(this,
this.currentContainer));d.push(function(l){return function(f){l._trigger("update",f,this._uiHash(this))}}.call(this,this.currentContainer))}for(g=this.containers.length-1;g>=0;g--){e||d.push(function(l){return function(f){l._trigger("deactivate",f,this._uiHash(this))}}.call(this,this.containers[g]));if(this.containers[g].containerCache.over){d.push(function(l){return function(f){l._trigger("out",f,this._uiHash(this))}}.call(this,this.containers[g]));this.containers[g].containerCache.over=0}}this._storedCursor&&
a("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex)this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex);this.dragging=false;if(this.cancelHelperRemoval){if(!e){this._trigger("beforeStop",h,this._uiHash());for(g=0;g<d.length;g++)d[g].call(this,h);this._trigger("stop",h,this._uiHash())}return this.fromOutside=false}e||this._trigger("beforeStop",h,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!e){for(g=0;g<d.length;g++)d[g].call(this,h);this._trigger("stop",h,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===false&&this.cancel()},_uiHash:function(h){var e=h||this;return{helper:e.helper,placeholder:e.placeholder||a([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:h?h.element:null}}});
a.extend(a.ui.sortable,{version:"1.8.24"})})(jQuery);
jQuery.effects||function(a,h){function e(n){var B;if(n&&n.constructor==Array&&n.length==3)return n;if(B=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(n))return[parseInt(B[1],10),parseInt(B[2],10),parseInt(B[3],10)];if(B=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(n))return[parseFloat(B[1])*2.55,parseFloat(B[2])*2.55,parseFloat(B[3])*2.55];if(B=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(n))return[parseInt(B[1],16),
parseInt(B[2],16),parseInt(B[3],16)];if(B=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(n))return[parseInt(B[1]+B[1],16),parseInt(B[2]+B[2],16),parseInt(B[3]+B[3],16)];if(/rgba\(0, 0, 0, 0\)/.exec(n))return c.transparent;return c[a.trim(n).toLowerCase()]}function d(){var n=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,B={},D,E;if(n&&n.length&&n[0]&&n[n[0]])for(var I=n.length;I--;){D=n[I];if(typeof n[D]=="string"){E=D.replace(/\-(\w)/g,function(Q,O){return O.toUpperCase()});
B[E]=n[D]}}else for(D in n)if(typeof n[D]==="string")B[D]=n[D];return B}function g(n){var B,D;for(B in n){D=n[B];if(D==null||a.isFunction(D)||B in m||/scrollbar/.test(B)||!/color/i.test(B)&&isNaN(parseFloat(D)))delete n[B]}return n}function l(n,B){var D={_:0},E;for(E in B)if(n[E]!=B[E])D[E]=B[E];return D}function f(n,B,D,E){if(typeof n=="object"){E=B;D=null;B=n;n=B.effect}if(a.isFunction(B)){E=B;D=null;B={}}if(typeof B=="number"||a.fx.speeds[B]){E=D;D=B;B={}}if(a.isFunction(D)){E=D;D=null}B=B||{};
D=D||B.duration;D=a.fx.off?0:typeof D=="number"?D:D in a.fx.speeds?a.fx.speeds[D]:a.fx.speeds._default;E=E||B.complete;return[n,B,D,E]}function b(n){if(!n||typeof n==="number"||a.fx.speeds[n])return true;if(typeof n==="string"&&!a.effects[n])return true;return false}a.effects={};a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(n,B){a.fx.step[B]=function(D){if(!D.colorInit){var E;E=D.elem;var I=B,Q;do{Q=
(a.curCSS||a.css)(E,I);if(Q!=""&&Q!="transparent"||a.nodeName(E,"body"))break;I="backgroundColor"}while(E=E.parentNode);E=e(Q);D.start=E;D.end=e(D.end);D.colorInit=true}D.elem.style[B]="rgb("+Math.max(Math.min(parseInt(D.pos*(D.end[0]-D.start[0])+D.start[0],10),255),0)+","+Math.max(Math.min(parseInt(D.pos*(D.end[1]-D.start[1])+D.start[1],10),255),0)+","+Math.max(Math.min(parseInt(D.pos*(D.end[2]-D.start[2])+D.start[2],10),255),0)+")"}});var c={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],
black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,
211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},k=["add","remove","toggle"],m={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(n,B,D,
E){if(a.isFunction(D)){E=D;D=null}return this.queue(function(){var I=a(this),Q=I.attr("style")||" ",O=g(d.call(this)),N,aa=I.attr("class")||"";a.each(k,function(ga,T){n[T]&&I[T+"Class"](n[T])});N=g(d.call(this));I.attr("class",aa);I.animate(l(O,N),{queue:false,duration:B,easing:D,complete:function(){a.each(k,function(ga,T){n[T]&&I[T+"Class"](n[T])});if(typeof I.attr("style")=="object"){I.attr("style").cssText="";I.attr("style").cssText=Q}else I.attr("style",Q);E&&E.apply(this,arguments);a.dequeue(this)}})})};
a.fn.extend({_addClass:a.fn.addClass,addClass:function(n,B,D,E){return B?a.effects.animateClass.apply(this,[{add:n},B,D,E]):this._addClass(n)},_removeClass:a.fn.removeClass,removeClass:function(n,B,D,E){return B?a.effects.animateClass.apply(this,[{remove:n},B,D,E]):this._removeClass(n)},_toggleClass:a.fn.toggleClass,toggleClass:function(n,B,D,E,I){return typeof B=="boolean"||B===h?D?a.effects.animateClass.apply(this,[B?{add:n}:{remove:n},D,E,I]):this._toggleClass(n,B):a.effects.animateClass.apply(this,
[{toggle:n},B,D,E])},switchClass:function(n,B,D,E,I){return a.effects.animateClass.apply(this,[{add:B,remove:n},D,E,I])}});a.extend(a.effects,{version:"1.8.24",save:function(n,B){for(var D=0;D<B.length;D++)B[D]!==null&&n.data("ec.storage."+B[D],n[0].style[B[D]])},restore:function(n,B){for(var D=0;D<B.length;D++)B[D]!==null&&n.css(B[D],n.data("ec.storage."+B[D]))},setMode:function(n,B){if(B=="toggle")B=n.is(":hidden")?"show":"hide";return B},getBaseline:function(n,B){var D,E;switch(n[0]){case "top":D=
0;break;case "middle":D=0.5;break;case "bottom":D=1;break;default:D=n[0]/B.height}switch(n[1]){case "left":E=0;break;case "center":E=0.5;break;case "right":E=1;break;default:E=n[1]/B.width}return{x:E,y:D}},createWrapper:function(n){if(n.parent().is(".ui-effects-wrapper"))return n.parent();var B={width:n.outerWidth(true),height:n.outerHeight(true),"float":n.css("float")},D=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),
E=document.activeElement;n.wrap(D);if(n[0]===E||a.contains(n[0],E))a(E).focus();D=n.parent();if(n.css("position")=="static"){D.css({position:"relative"});n.css({position:"relative"})}else{a.extend(B,{position:n.css("position"),zIndex:n.css("z-index")});a.each(["top","left","bottom","right"],function(I,Q){B[Q]=n.css(Q);if(isNaN(parseInt(B[Q],10)))B[Q]="auto"});n.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})}return D.css(B).show()},removeWrapper:function(n){var B,D=document.activeElement;
if(n.parent().is(".ui-effects-wrapper")){B=n.parent().replaceWith(n);if(n[0]===D||a.contains(n[0],D))a(D).focus();return B}return n},setTransition:function(n,B,D,E){E=E||{};a.each(B,function(I,Q){var O=n.cssUnit(Q);if(O[0]>0)E[Q]=O[0]*D+O[1]});return E}});a.fn.extend({effect:function(n){var B=f.apply(this,arguments),D={options:B[1],duration:B[2],callback:B[3]};B=D.options.mode;var E=a.effects[n];if(a.fx.off||!E)return B?this[B](D.duration,D.callback):this.each(function(){D.callback&&D.callback.call(this)});
return E.call(this,D)},_show:a.fn.show,show:function(n){if(b(n))return this._show.apply(this,arguments);else{var B=f.apply(this,arguments);B[1].mode="show";return this.effect.apply(this,B)}},_hide:a.fn.hide,hide:function(n){if(b(n))return this._hide.apply(this,arguments);else{var B=f.apply(this,arguments);B[1].mode="hide";return this.effect.apply(this,B)}},__toggle:a.fn.toggle,toggle:function(n){if(b(n)||typeof n==="boolean"||a.isFunction(n))return this.__toggle.apply(this,arguments);else{var B=f.apply(this,
arguments);B[1].mode="toggle";return this.effect.apply(this,B)}},cssUnit:function(n){var B=this.css(n),D=[];a.each(["em","px","%","pt"],function(E,I){if(B.indexOf(I)>0)D=[parseFloat(B),I]});return D}});var s={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(n,B){s[B]=function(D){return Math.pow(D,n+2)}});a.extend(s,{Sine:function(n){return 1-Math.cos(n*Math.PI/2)},Circ:function(n){return 1-Math.sqrt(1-n*n)},Elastic:function(n){return n===0||n===1?n:-Math.pow(2,8*(n-1))*Math.sin(((n-1)*80-
7.5)*Math.PI/15)},Back:function(n){return n*n*(3*n-2)},Bounce:function(n){for(var B,D=4;n<((B=Math.pow(2,--D))-1)/11;);return 1/Math.pow(4,3-D)-7.5625*Math.pow((B*3-2)/22-n,2)}});a.each(s,function(n,B){a.easing["easeIn"+n]=B;a.easing["easeOut"+n]=function(D){return 1-B(1-D)};a.easing["easeInOut"+n]=function(D){return D<0.5?B(D*2)/2:B(D*-2+2)/-2+1}})}(jQuery);
(function(a){a.effects.blind=function(h){return this.queue(function(){var e=a(this),d=["position","top","bottom","left","right"],g=a.effects.setMode(e,h.options.mode||"hide"),l=h.options.direction||"vertical";a.effects.save(e,d);e.show();var f=a.effects.createWrapper(e).css({overflow:"hidden"}),b=l=="vertical"?"height":"width";l=l=="vertical"?f.height():f.width();g=="show"&&f.css(b,0);var c={};c[b]=g=="show"?l:0;f.animate(c,h.duration,h.options.easing,function(){g=="hide"&&e.hide();a.effects.restore(e,
d);a.effects.removeWrapper(e);h.callback&&h.callback.apply(e[0],arguments);e.dequeue()})})}})(jQuery);
(function(a){a.effects.bounce=function(h){return this.queue(function(){var e=a(this),d=["position","top","bottom","left","right"],g=a.effects.setMode(e,h.options.mode||"effect"),l=h.options.direction||"up",f=h.options.distance||20,b=h.options.times||5,c=h.duration||250;/show|hide/.test(g)&&d.push("opacity");a.effects.save(e,d);e.show();a.effects.createWrapper(e);var k=l=="up"||l=="down"?"top":"left";l=l=="up"||l=="left"?"pos":"neg";f=h.options.distance||(k=="top"?e.outerHeight(true)/3:e.outerWidth(true)/
3);if(g=="show")e.css("opacity",0).css(k,l=="pos"?-f:f);if(g=="hide")f/=b*2;g!="hide"&&b--;if(g=="show"){var m={opacity:1};m[k]=(l=="pos"?"+=":"-=")+f;e.animate(m,c/2,h.options.easing);f/=2;b--}for(m=0;m<b;m++){var s={},n={};s[k]=(l=="pos"?"-=":"+=")+f;n[k]=(l=="pos"?"+=":"-=")+f;e.animate(s,c/2,h.options.easing).animate(n,c/2,h.options.easing);f=g=="hide"?f*2:f/2}if(g=="hide"){m={opacity:0};m[k]=(l=="pos"?"-=":"+=")+f;e.animate(m,c/2,h.options.easing,function(){e.hide();a.effects.restore(e,d);a.effects.removeWrapper(e);
h.callback&&h.callback.apply(this,arguments)})}else{s={};n={};s[k]=(l=="pos"?"-=":"+=")+f;n[k]=(l=="pos"?"+=":"-=")+f;e.animate(s,c/2,h.options.easing).animate(n,c/2,h.options.easing,function(){a.effects.restore(e,d);a.effects.removeWrapper(e);h.callback&&h.callback.apply(this,arguments)})}e.queue("fx",function(){e.dequeue()});e.dequeue()})}})(jQuery);
(function(a){a.effects.clip=function(h){return this.queue(function(){var e=a(this),d=["position","top","bottom","left","right","height","width"],g=a.effects.setMode(e,h.options.mode||"hide"),l=h.options.direction||"vertical";a.effects.save(e,d);e.show();var f=a.effects.createWrapper(e).css({overflow:"hidden"});f=e[0].tagName=="IMG"?f:e;var b={size:l=="vertical"?"height":"width",position:l=="vertical"?"top":"left"};l=l=="vertical"?f.height():f.width();if(g=="show"){f.css(b.size,0);f.css(b.position,
l/2)}var c={};c[b.size]=g=="show"?l:0;c[b.position]=g=="show"?0:l/2;f.animate(c,{queue:false,duration:h.duration,easing:h.options.easing,complete:function(){g=="hide"&&e.hide();a.effects.restore(e,d);a.effects.removeWrapper(e);h.callback&&h.callback.apply(e[0],arguments);e.dequeue()}})})}})(jQuery);
(function(a){a.effects.drop=function(h){return this.queue(function(){var e=a(this),d=["position","top","bottom","left","right","opacity"],g=a.effects.setMode(e,h.options.mode||"hide"),l=h.options.direction||"left";a.effects.save(e,d);e.show();a.effects.createWrapper(e);var f=l=="up"||l=="down"?"top":"left";l=l=="up"||l=="left"?"pos":"neg";var b=h.options.distance||(f=="top"?e.outerHeight(true)/2:e.outerWidth(true)/2);if(g=="show")e.css("opacity",0).css(f,l=="pos"?-b:b);var c={opacity:g=="show"?1:
0};c[f]=(g=="show"?l=="pos"?"+=":"-=":l=="pos"?"-=":"+=")+b;e.animate(c,{queue:false,duration:h.duration,easing:h.options.easing,complete:function(){g=="hide"&&e.hide();a.effects.restore(e,d);a.effects.removeWrapper(e);h.callback&&h.callback.apply(this,arguments);e.dequeue()}})})}})(jQuery);
(function(a){a.effects.explode=function(h){return this.queue(function(){var e=h.options.pieces?Math.round(Math.sqrt(h.options.pieces)):3,d=h.options.pieces?Math.round(Math.sqrt(h.options.pieces)):3;h.options.mode=h.options.mode=="toggle"?a(this).is(":visible")?"hide":"show":h.options.mode;var g=a(this).show().css("visibility","hidden"),l=g.offset();l.top-=parseInt(g.css("marginTop"),10)||0;l.left-=parseInt(g.css("marginLeft"),10)||0;for(var f=g.outerWidth(true),b=g.outerHeight(true),c=0;c<e;c++)for(var k=
0;k<d;k++)g.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-k*(f/d),top:-c*(b/e)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:f/d,height:b/e,left:l.left+k*(f/d)+(h.options.mode=="show"?(k-Math.floor(d/2))*(f/d):0),top:l.top+c*(b/e)+(h.options.mode=="show"?(c-Math.floor(e/2))*(b/e):0),opacity:h.options.mode=="show"?0:1}).animate({left:l.left+k*(f/d)+(h.options.mode=="show"?0:(k-Math.floor(d/2))*(f/d)),top:l.top+
c*(b/e)+(h.options.mode=="show"?0:(c-Math.floor(e/2))*(b/e)),opacity:h.options.mode=="show"?1:0},h.duration||500);setTimeout(function(){h.options.mode=="show"?g.css({visibility:"visible"}):g.css({visibility:"visible"}).hide();h.callback&&h.callback.apply(g[0]);g.dequeue();a("div.ui-effects-explode").remove()},h.duration||500)})}})(jQuery);
(function(a){a.effects.fade=function(h){return this.queue(function(){var e=a(this),d=a.effects.setMode(e,h.options.mode||"hide");e.animate({opacity:d},{queue:false,duration:h.duration,easing:h.options.easing,complete:function(){h.callback&&h.callback.apply(this,arguments);e.dequeue()}})})}})(jQuery);
(function(a){a.effects.fold=function(h){return this.queue(function(){var e=a(this),d=["position","top","bottom","left","right"],g=a.effects.setMode(e,h.options.mode||"hide"),l=h.options.size||15,f=!!h.options.horizFirst,b=h.duration?h.duration/2:a.fx.speeds._default/2;a.effects.save(e,d);e.show();var c=a.effects.createWrapper(e).css({overflow:"hidden"}),k=g=="show"!=f,m=k?["width","height"]:["height","width"];k=k?[c.width(),c.height()]:[c.height(),c.width()];var s=/([0-9]+)%/.exec(l);if(s)l=parseInt(s[1],
10)/100*k[g=="hide"?0:1];if(g=="show")c.css(f?{height:0,width:l}:{height:l,width:0});f={};s={};f[m[0]]=g=="show"?k[0]:l;s[m[1]]=g=="show"?k[1]:0;c.animate(f,b,h.options.easing).animate(s,b,h.options.easing,function(){g=="hide"&&e.hide();a.effects.restore(e,d);a.effects.removeWrapper(e);h.callback&&h.callback.apply(e[0],arguments);e.dequeue()})})}})(jQuery);
(function(a){a.effects.highlight=function(h){return this.queue(function(){var e=a(this),d=["backgroundImage","backgroundColor","opacity"],g=a.effects.setMode(e,h.options.mode||"show"),l={backgroundColor:e.css("backgroundColor")};if(g=="hide")l.opacity=0;a.effects.save(e,d);e.show().css({backgroundImage:"none",backgroundColor:h.options.color||"#ffff99"}).animate(l,{queue:false,duration:h.duration,easing:h.options.easing,complete:function(){g=="hide"&&e.hide();a.effects.restore(e,d);g=="show"&&!a.support.opacity&&
this.style.removeAttribute("filter");h.callback&&h.callback.apply(this,arguments);e.dequeue()}})})}})(jQuery);
(function(a){a.effects.pulsate=function(h){return this.queue(function(){var e=a(this),d=a.effects.setMode(e,h.options.mode||"show"),g=(h.options.times||5)*2-1,l=h.duration?h.duration/2:a.fx.speeds._default/2,f=e.is(":visible"),b=0;if(!f){e.css("opacity",0).show();b=1}if(d=="hide"&&f||d=="show"&&!f)g--;for(d=0;d<g;d++){e.animate({opacity:b},l,h.options.easing);b=(b+1)%2}e.animate({opacity:b},l,h.options.easing,function(){b==0&&e.hide();h.callback&&h.callback.apply(this,arguments)});e.queue("fx",function(){e.dequeue()}).dequeue()})}})(jQuery);
(function(a){a.effects.puff=function(h){return this.queue(function(){var e=a(this),d=a.effects.setMode(e,h.options.mode||"hide"),g=parseInt(h.options.percent,10)||150,l=g/100,f={height:e.height(),width:e.width()};a.extend(h.options,{fade:true,mode:d,percent:d=="hide"?g:100,from:d=="hide"?f:{height:f.height*l,width:f.width*l}});e.effect("scale",h.options,h.duration,h.callback);e.dequeue()})};a.effects.scale=function(h){return this.queue(function(){var e=a(this),d=a.extend(true,{},h.options),g=a.effects.setMode(e,
h.options.mode||"effect"),l=parseInt(h.options.percent,10)||(parseInt(h.options.percent,10)==0?0:g=="hide"?0:100),f=h.options.direction||"both",b=h.options.origin;if(g!="effect"){d.origin=b||["middle","center"];d.restore=true}b={height:e.height(),width:e.width()};e.from=h.options.from||(g=="show"?{height:0,width:0}:b);l={y:f!="horizontal"?l/100:1,x:f!="vertical"?l/100:1};e.to={height:b.height*l.y,width:b.width*l.x};if(h.options.fade){if(g=="show"){e.from.opacity=0;e.to.opacity=1}if(g=="hide"){e.from.opacity=
1;e.to.opacity=0}}d.from=e.from;d.to=e.to;d.mode=g;e.effect("size",d,h.duration,h.callback);e.dequeue()})};a.effects.size=function(h){return this.queue(function(){var e=a(this),d=["position","top","bottom","left","right","width","height","overflow","opacity"],g=["position","top","bottom","left","right","overflow","opacity"],l=["width","height","overflow"],f=["fontSize"],b=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],
k=a.effects.setMode(e,h.options.mode||"effect"),m=h.options.restore||false,s=h.options.scale||"both",n=h.options.origin,B={height:e.height(),width:e.width()};e.from=h.options.from||B;e.to=h.options.to||B;if(n){n=a.effects.getBaseline(n,B);e.from.top=(B.height-e.from.height)*n.y;e.from.left=(B.width-e.from.width)*n.x;e.to.top=(B.height-e.to.height)*n.y;e.to.left=(B.width-e.to.width)*n.x}var D={from:{y:e.from.height/B.height,x:e.from.width/B.width},to:{y:e.to.height/B.height,x:e.to.width/B.width}};
if(s=="box"||s=="both"){if(D.from.y!=D.to.y){d=d.concat(b);e.from=a.effects.setTransition(e,b,D.from.y,e.from);e.to=a.effects.setTransition(e,b,D.to.y,e.to)}if(D.from.x!=D.to.x){d=d.concat(c);e.from=a.effects.setTransition(e,c,D.from.x,e.from);e.to=a.effects.setTransition(e,c,D.to.x,e.to)}}if(s=="content"||s=="both")if(D.from.y!=D.to.y){d=d.concat(f);e.from=a.effects.setTransition(e,f,D.from.y,e.from);e.to=a.effects.setTransition(e,f,D.to.y,e.to)}a.effects.save(e,m?d:g);e.show();a.effects.createWrapper(e);
e.css("overflow","hidden").css(e.from);if(s=="content"||s=="both"){b=b.concat(["marginTop","marginBottom"]).concat(f);c=c.concat(["marginLeft","marginRight"]);l=d.concat(b).concat(c);e.find("*[width]").each(function(){var E=a(this);m&&a.effects.save(E,l);var I={height:E.height(),width:E.width()};E.from={height:I.height*D.from.y,width:I.width*D.from.x};E.to={height:I.height*D.to.y,width:I.width*D.to.x};if(D.from.y!=D.to.y){E.from=a.effects.setTransition(E,b,D.from.y,E.from);E.to=a.effects.setTransition(E,
b,D.to.y,E.to)}if(D.from.x!=D.to.x){E.from=a.effects.setTransition(E,c,D.from.x,E.from);E.to=a.effects.setTransition(E,c,D.to.x,E.to)}E.css(E.from);E.animate(E.to,h.duration,h.options.easing,function(){m&&a.effects.restore(E,l)})})}e.animate(e.to,{queue:false,duration:h.duration,easing:h.options.easing,complete:function(){e.to.opacity===0&&e.css("opacity",e.from.opacity);k=="hide"&&e.hide();a.effects.restore(e,m?d:g);a.effects.removeWrapper(e);h.callback&&h.callback.apply(this,arguments);e.dequeue()}})})}})(jQuery);
(function(a){a.effects.shake=function(h){return this.queue(function(){var e=a(this),d=["position","top","bottom","left","right"];a.effects.setMode(e,h.options.mode||"effect");var g=h.options.direction||"left",l=h.options.distance||20,f=h.options.times||3,b=h.duration||h.options.duration||140;a.effects.save(e,d);e.show();a.effects.createWrapper(e);var c=g=="up"||g=="down"?"top":"left",k=g=="up"||g=="left"?"pos":"neg";g={};var m={},s={};g[c]=(k=="pos"?"-=":"+=")+l;m[c]=(k=="pos"?"+=":"-=")+l*2;s[c]=
(k=="pos"?"-=":"+=")+l*2;e.animate(g,b,h.options.easing);for(l=1;l<f;l++)e.animate(m,b,h.options.easing).animate(s,b,h.options.easing);e.animate(m,b,h.options.easing).animate(g,b/2,h.options.easing,function(){a.effects.restore(e,d);a.effects.removeWrapper(e);h.callback&&h.callback.apply(this,arguments)});e.queue("fx",function(){e.dequeue()});e.dequeue()})}})(jQuery);
(function(a){a.effects.slide=function(h){return this.queue(function(){var e=a(this),d=["position","top","bottom","left","right"],g=a.effects.setMode(e,h.options.mode||"show"),l=h.options.direction||"left";a.effects.save(e,d);e.show();a.effects.createWrapper(e).css({overflow:"hidden"});var f=l=="up"||l=="down"?"top":"left";l=l=="up"||l=="left"?"pos":"neg";var b=h.options.distance||(f=="top"?e.outerHeight(true):e.outerWidth(true));if(g=="show")e.css(f,l=="pos"?isNaN(b)?"-"+b:-b:b);var c={};c[f]=(g==
"show"?l=="pos"?"+=":"-=":l=="pos"?"-=":"+=")+b;e.animate(c,{queue:false,duration:h.duration,easing:h.options.easing,complete:function(){g=="hide"&&e.hide();a.effects.restore(e,d);a.effects.removeWrapper(e);h.callback&&h.callback.apply(this,arguments);e.dequeue()}})})}})(jQuery);
(function(a){a.effects.transfer=function(h){return this.queue(function(){var e=a(this),d=a(h.options.to),g=d.offset();d={top:g.top,left:g.left,height:d.innerHeight(),width:d.innerWidth()};g=e.offset();var l=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(h.options.className).css({top:g.top,left:g.left,height:e.innerHeight(),width:e.innerWidth(),position:"absolute"}).animate(d,h.duration,h.options.easing,function(){l.remove();h.callback&&h.callback.apply(e[0],arguments);
e.dequeue()})})}})(jQuery);
(function(a){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:true,clearStyle:false,collapsible:false,event:"click",fillSpace:false,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:false,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var h=this,e=h.options;h.running=0;h.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix");h.headers=
h.element.find(e.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){e.disabled||a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){e.disabled||a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){e.disabled||a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){e.disabled||a(this).removeClass("ui-state-focus")});h.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");
if(e.navigation){var d=h.element.find("a").filter(e.navigationFilter).eq(0);if(d.length){var g=d.closest(".ui-accordion-header");h.active=g.length?g:d.closest(".ui-accordion-content").prev()}}h.active=h._findActive(h.active||e.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");h.active.next().addClass("ui-accordion-content-active");h._createIcons();h.resize();h.element.attr("role","tablist");h.headers.attr("role","tab").bind("keydown.accordion",
function(l){return h._keydown(l)}).next().attr("role","tabpanel");h.headers.not(h.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide();h.active.length?h.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):h.headers.eq(0).attr("tabIndex",0);a.browser.safari||h.headers.find("a").attr("tabIndex",-1);e.event&&h.headers.bind(e.event.split(" ").join(".accordion ")+".accordion",function(l){h._clickHandler.call(h,l,this);l.preventDefault()})},_createIcons:function(){var h=
this.options;if(h.icons){a("<span></span>").addClass("ui-icon "+h.icons.header).prependTo(this.headers);this.active.children(".ui-icon").toggleClass(h.icons.header).toggleClass(h.icons.headerSelected);this.element.addClass("ui-accordion-icons")}},_destroyIcons:function(){this.headers.children(".ui-icon").remove();this.element.removeClass("ui-accordion-icons")},destroy:function(){var h=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex");
this.headers.find("a").removeAttr("tabIndex");this._destroyIcons();var e=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");if(h.autoHeight||h.fillHeight)e.css("height","");return a.Widget.prototype.destroy.call(this)},_setOption:function(h,e){a.Widget.prototype._setOption.apply(this,arguments);h=="active"&&this.activate(e);if(h=="icons"){this._destroyIcons();
e&&this._createIcons()}if(h=="disabled")this.headers.add(this.headers.next())[e?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(h){if(!(this.options.disabled||h.altKey||h.ctrlKey)){var e=a.ui.keyCode,d=this.headers.length,g=this.headers.index(h.target),l=false;switch(h.keyCode){case e.RIGHT:case e.DOWN:l=this.headers[(g+1)%d];break;case e.LEFT:case e.UP:l=this.headers[(g-1+d)%d];break;case e.SPACE:case e.ENTER:this._clickHandler({target:h.target},h.target);
h.preventDefault()}if(l){a(h.target).attr("tabIndex",-1);a(l).attr("tabIndex",0);l.focus();return false}return true}},resize:function(){var h=this.options,e;if(h.fillSpace){if(a.browser.msie){var d=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}e=this.element.parent().height();a.browser.msie&&this.element.parent().css("overflow",d);this.headers.each(function(){e-=a(this).outerHeight(true)});this.headers.next().each(function(){a(this).height(Math.max(0,e-a(this).innerHeight()+
a(this).height()))}).css("overflow","auto")}else if(h.autoHeight){e=0;this.headers.next().each(function(){e=Math.max(e,a(this).height("").height())}).height(e)}return this},activate:function(h){this.options.active=h;h=this._findActive(h)[0];this._clickHandler({target:h},h);return this},_findActive:function(h){return h?typeof h==="number"?this.headers.filter(":eq("+h+")"):this.headers.not(this.headers.not(h)):h===false?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(h,e){var d=this.options;
if(!d.disabled)if(h.target){var g=a(h.currentTarget||e),l=g[0]===this.active[0];d.active=d.collapsible&&l?false:this.headers.index(g);if(!(this.running||!d.collapsible&&l)){var f=this.active;m=g.next();c=this.active.next();k={options:d,newHeader:l&&d.collapsible?a([]):g,oldHeader:this.active,newContent:l&&d.collapsible?a([]):m,oldContent:c};var b=this.headers.index(this.active[0])>this.headers.index(g[0]);this.active=l?a([]):g;this._toggle(m,c,k,l,b);f.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header);
if(!l){g.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(d.icons.header).addClass(d.icons.headerSelected);g.next().addClass("ui-accordion-content-active")}}}else if(d.collapsible){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header);this.active.next().addClass("ui-accordion-content-active");var c=this.active.next(),
k={options:d,newHeader:a([]),oldHeader:d.active,newContent:a([]),oldContent:c},m=this.active=a([]);this._toggle(m,c,k)}},_toggle:function(h,e,d,g,l){var f=this,b=f.options;f.toShow=h;f.toHide=e;f.data=d;var c=function(){if(f)return f._completed.apply(f,arguments)};f._trigger("changestart",null,f.data);f.running=e.size()===0?h.size():e.size();if(b.animated){d={};d=b.collapsible&&g?{toShow:a([]),toHide:e,complete:c,down:l,autoHeight:b.autoHeight||b.fillSpace}:{toShow:h,toHide:e,complete:c,down:l,autoHeight:b.autoHeight||
b.fillSpace};if(!b.proxied)b.proxied=b.animated;if(!b.proxiedDuration)b.proxiedDuration=b.duration;b.animated=a.isFunction(b.proxied)?b.proxied(d):b.proxied;b.duration=a.isFunction(b.proxiedDuration)?b.proxiedDuration(d):b.proxiedDuration;g=a.ui.accordion.animations;var k=b.duration,m=b.animated;if(m&&!g[m]&&!a.easing[m])m="slide";g[m]||(g[m]=function(s){this.slide(s,{easing:m,duration:k||700})});g[m](d)}else{if(b.collapsible&&g)h.toggle();else{e.hide();h.show()}c(true)}e.prev().attr({"aria-expanded":"false",
"aria-selected":"false",tabIndex:-1}).blur();h.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(h){this.running=h?0:--this.running;if(!this.running){this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""});this.toHide.removeClass("ui-accordion-content-active");if(this.toHide.length)this.toHide.parent()[0].className=this.toHide.parent()[0].className;this._trigger("change",null,this.data)}}});a.extend(a.ui.accordion,{version:"1.8.24",
animations:{slide:function(h,e){h=a.extend({easing:"swing",duration:300},h,e);if(h.toHide.size())if(h.toShow.size()){var d=h.toShow.css("overflow"),g=0,l={},f={},b,c=h.toShow;b=c[0].style.width;c.width(c.parent().width()-parseFloat(c.css("paddingLeft"))-parseFloat(c.css("paddingRight"))-(parseFloat(c.css("borderLeftWidth"))||0)-(parseFloat(c.css("borderRightWidth"))||0));a.each(["height","paddingTop","paddingBottom"],function(k,m){f[m]="hide";var s=(""+a.css(h.toShow[0],m)).match(/^([\d+-.]+)(.*)$/);
l[m]={value:s[1],unit:s[2]||"px"}});h.toShow.css({height:0,overflow:"hidden"}).show();h.toHide.filter(":hidden").each(h.complete).end().filter(":visible").animate(f,{step:function(k,m){if(m.prop=="height")g=m.end-m.start===0?0:(m.now-m.start)/(m.end-m.start);h.toShow[0].style[m.prop]=g*l[m.prop].value+l[m.prop].unit},duration:h.duration,easing:h.easing,complete:function(){h.autoHeight||h.toShow.css("height","");h.toShow.css({width:b,overflow:d});h.complete()}})}else h.toHide.animate({height:"hide",
paddingTop:"hide",paddingBottom:"hide"},h);else h.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},h)},bounceslide:function(h){this.slide(h,{easing:h.down?"easeOutBounce":"swing",duration:h.down?1E3:200})}}})})(jQuery);
(function(a){var h=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var e=this,d=this.element[0].ownerDocument,g;this.isMultiLine=this.element.is("textarea");this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(l){if(!(e.options.disabled||
e.element.propAttr("readOnly"))){g=false;var f=a.ui.keyCode;switch(l.keyCode){case f.PAGE_UP:e._move("previousPage",l);break;case f.PAGE_DOWN:e._move("nextPage",l);break;case f.UP:e._keyEvent("previous",l);break;case f.DOWN:e._keyEvent("next",l);break;case f.ENTER:case f.NUMPAD_ENTER:if(e.menu.active){g=true;l.preventDefault()}case f.TAB:if(!e.menu.active)break;e.menu.select(l);break;case f.ESCAPE:e.element.val(e.term);e.close(l);break;default:clearTimeout(e.searching);e.searching=setTimeout(function(){if(e.term!=
e.element.val()){e.selectedItem=null;e.search(null,l)}},e.options.delay)}}}).bind("keypress.autocomplete",function(l){if(g){g=false;l.preventDefault()}}).bind("focus.autocomplete",function(){if(!e.options.disabled){e.selectedItem=null;e.previous=e.element.val()}}).bind("blur.autocomplete",function(l){if(!e.options.disabled){clearTimeout(e.searching);e.closing=setTimeout(function(){e.close(l);e._change(l)},150)}});this._initSource();this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||
"body",d)[0]).mousedown(function(l){var f=e.menu.element[0];a(l.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(b){b.target!==e.element[0]&&b.target!==f&&!a.ui.contains(f,b.target)&&e.close()})},1);setTimeout(function(){clearTimeout(e.closing)},13)}).menu({focus:function(l,f){var b=f.item.data("item.autocomplete");false!==e._trigger("focus",l,{item:b})&&/^key/.test(l.originalEvent.type)&&e.element.val(b.value)},selected:function(l,f){var b=f.item.data("item.autocomplete"),
c=e.previous;if(e.element[0]!==d.activeElement){e.element.focus();e.previous=c;setTimeout(function(){e.previous=c;e.selectedItem=b},1)}false!==e._trigger("select",l,{item:b})&&e.element.val(b.value);e.term=e.element.val();e.close(l);e.selectedItem=b},blur:function(){e.menu.element.is(":visible")&&e.element.val()!==e.term&&e.element.val(e.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");a.fn.bgiframe&&this.menu.element.bgiframe();e.beforeunloadHandler=function(){e.element.removeAttr("autocomplete")};
a(window).bind("beforeunload",e.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();a(window).unbind("beforeunload",this.beforeunloadHandler);a.Widget.prototype.destroy.call(this)},_setOption:function(e,d){a.Widget.prototype._setOption.apply(this,arguments);e==="source"&&this._initSource();if(e==="appendTo")this.menu.element.appendTo(a(d||
"body",this.element[0].ownerDocument)[0]);e==="disabled"&&d&&this.xhr&&this.xhr.abort()},_initSource:function(){var e=this,d,g;if(a.isArray(this.options.source)){d=this.options.source;this.source=function(l,f){f(a.ui.autocomplete.filter(d,l.term))}}else if(typeof this.options.source==="string"){g=this.options.source;this.source=function(l,f){e.xhr&&e.xhr.abort();e.xhr=a.ajax({url:g,data:l,dataType:"json",success:function(b){f(b)},error:function(){f([])}})}}else this.source=this.options.source},search:function(e,
d){e=e!=null?e:this.element.val();this.term=this.element.val();if(e.length<this.options.minLength)return this.close(d);clearTimeout(this.closing);if(this._trigger("search",d)!==false)return this._search(e)},_search:function(e){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:e},this._response())},_response:function(){var e=this,d=++h;return function(g){d===h&&e.__response(g);e.pending--;e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){if(!this.options.disabled&&
e&&e.length){e=this._normalize(e);this._suggest(e);this._trigger("open")}else this.close()},close:function(e){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.deactivate();this._trigger("close",e)}},_change:function(e){this.previous!==this.element.val()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(e){if(e.length&&e[0].label&&e[0].value)return e;return a.map(e,function(d){if(typeof d==="string")return{label:d,value:d};return a.extend({label:d.label||
d.value,value:d.value||d.label},d)})},_suggest:function(e){var d=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(d,e);this.menu.deactivate();this.menu.refresh();d.show();this._resizeMenu();d.position(a.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,d){var g=
this;a.each(d,function(l,f){g._renderItem(e,f)})},_renderItem:function(e,d){return a("<li></li>").data("item.autocomplete",d).append(a("<a></a>").text(d.label)).appendTo(e)},_move:function(e,d){if(this.menu.element.is(":visible"))if(this.menu.first()&&/^previous/.test(e)||this.menu.last()&&/^next/.test(e)){this.element.val(this.term);this.menu.deactivate()}else this.menu[e](d);else this.search(null,d)},widget:function(){return this.menu.element},_keyEvent:function(e,d){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(e,
d);d.preventDefault()}}});a.extend(a.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(e,d){var g=RegExp(a.ui.autocomplete.escapeRegex(d),"i");return a.grep(e,function(l){return g.test(l.label||l.value||l)})}})})(jQuery);
(function(a){a.widget("ui.menu",{_create:function(){var h=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(e){if(a(e.target).closest(".ui-menu-item a").length){e.preventDefault();h.select(e)}});this.refresh()},refresh:function(){var h=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",
-1).mouseenter(function(e){h.activate(e,a(this).parent())}).mouseleave(function(){h.deactivate()})},activate:function(h,e){this.deactivate();if(this.hasScroll()){var d=e.offset().top-this.element.offset().top,g=this.element.scrollTop(),l=this.element.height();if(d<0)this.element.scrollTop(g+d);else d>=l&&this.element.scrollTop(g+d-l+e.height())}this.active=e.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",h,{item:e})},deactivate:function(){if(this.active){this.active.children("a").removeClass("ui-state-hover").removeAttr("id");
this._trigger("blur");this.active=null}},next:function(h){this.move("next",".ui-menu-item:first",h)},previous:function(h){this.move("prev",".ui-menu-item:last",h)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(h,e,d){if(this.active){h=this.active[h+"All"](".ui-menu-item").eq(0);h.length?this.activate(d,h):this.activate(d,this.element.children(e))}else this.activate(d,
this.element.children(e))},nextPage:function(h){if(this.hasScroll())if(!this.active||this.last())this.activate(h,this.element.children(".ui-menu-item:first"));else{var e=this.active.offset().top,d=this.element.height(),g=this.element.children(".ui-menu-item").filter(function(){var l=a(this).offset().top-e-d+a(this).height();return l<10&&l>-10});g.length||(g=this.element.children(".ui-menu-item:last"));this.activate(h,g)}else this.activate(h,this.element.children(".ui-menu-item").filter(!this.active||
this.last()?":first":":last"))},previousPage:function(h){if(this.hasScroll())if(!this.active||this.first())this.activate(h,this.element.children(".ui-menu-item:last"));else{var e=this.active.offset().top,d=this.element.height(),g=this.element.children(".ui-menu-item").filter(function(){var l=a(this).offset().top-e+d-a(this).height();return l<10&&l>-10});g.length||(g=this.element.children(".ui-menu-item:first"));this.activate(h,g)}else this.activate(h,this.element.children(".ui-menu-item").filter(!this.active||
this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(h){this._trigger("selected",h,{item:this.active})}})})(jQuery);
(function(a){var h,e,d,g,l=function(){var b=a(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},f=function(b){var c=b.name,k=b.form,m=a([]);if(c)m=k?a(k).find("[name='"+c+"']"):a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form});return m};a.widget("ui.button",{options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",l);if(typeof this.options.disabled!==
"boolean")this.options.disabled=!!this.element.propAttr("disabled");else this.element.propAttr("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var b=this,c=this.options,k=this.type==="checkbox"||this.type==="radio",m="ui-state-hover"+(!k?" ui-state-active":"");if(c.label===null)c.label=this.buttonElement.html();this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter.button",
function(){if(!c.disabled){a(this).addClass("ui-state-hover");this===h&&a(this).addClass("ui-state-active")}}).bind("mouseleave.button",function(){c.disabled||a(this).removeClass(m)}).bind("click.button",function(s){if(c.disabled){s.preventDefault();s.stopImmediatePropagation()}});this.element.bind("focus.button",function(){b.buttonElement.addClass("ui-state-focus")}).bind("blur.button",function(){b.buttonElement.removeClass("ui-state-focus")});if(k){this.element.bind("change.button",function(){g||
b.refresh()});this.buttonElement.bind("mousedown.button",function(s){if(!c.disabled){g=false;e=s.pageX;d=s.pageY}}).bind("mouseup.button",function(s){if(!c.disabled)if(e!==s.pageX||d!==s.pageY)g=true})}if(this.type==="checkbox")this.buttonElement.bind("click.button",function(){if(c.disabled||g)return false;a(this).toggleClass("ui-state-active");b.buttonElement.attr("aria-pressed",b.element[0].checked)});else if(this.type==="radio")this.buttonElement.bind("click.button",function(){if(c.disabled||g)return false;
a(this).addClass("ui-state-active");b.buttonElement.attr("aria-pressed","true");var s=b.element[0];f(s).not(s).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")});else{this.buttonElement.bind("mousedown.button",function(){if(c.disabled)return false;a(this).addClass("ui-state-active");h=this;a(document).one("mouseup",function(){h=null})}).bind("mouseup.button",function(){if(c.disabled)return false;a(this).removeClass("ui-state-active")}).bind("keydown.button",
function(s){if(c.disabled)return false;if(s.keyCode==a.ui.keyCode.SPACE||s.keyCode==a.ui.keyCode.ENTER)a(this).addClass("ui-state-active")}).bind("keyup.button",function(){a(this).removeClass("ui-state-active")});this.buttonElement.is("a")&&this.buttonElement.keyup(function(s){s.keyCode===a.ui.keyCode.SPACE&&a(this).click()})}this._setOption("disabled",c.disabled);this._resetButton()},_determineButtonType:function(){this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":
this.element.is("input")?"input":"button";if(this.type==="checkbox"||this.type==="radio"){var b=this.element.parents().filter(":last"),c="label[for='"+this.element.attr("id")+"']";this.buttonElement=b.find(c);if(!this.buttonElement.length){b=b.length?b.siblings():this.element.siblings();this.buttonElement=b.filter(c);if(!this.buttonElement.length)this.buttonElement=b.find(c)}this.element.addClass("ui-helper-hidden-accessible");(b=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active");
this.buttonElement.attr("aria-pressed",b)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());
this.hasTitle||this.buttonElement.removeAttr("title");a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments);if(b==="disabled")c?this.element.propAttr("disabled",true):this.element.propAttr("disabled",false);else this._resetButton()},refresh:function(){var b=this.element.is(":disabled");b!==this.options.disabled&&this._setOption("disabled",b);if(this.type==="radio")f(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed",
"true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")});else if(this.type==="checkbox")this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false")},_resetButton:function(){if(this.type==="input")this.options.label&&this.element.val(this.options.label);else{var b=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
c=a("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),k=this.options.icons,m=k.primary&&k.secondary,s=[];if(k.primary||k.secondary){if(this.options.text)s.push("ui-button-text-icon"+(m?"s":k.primary?"-primary":"-secondary"));k.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+k.primary+"'></span>");k.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+k.secondary+"'></span>");if(!this.options.text){s.push(m?
"ui-button-icons-only":"ui-button-icon-only");this.hasTitle||b.attr("title",c)}}else s.push("ui-button-text-only");b.addClass(s.join(" "))}}});a.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(b,c){b==="disabled"&&this.buttons.button("option",b,c);a.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var b=this.element.css("direction")===
"rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");
a.Widget.prototype.destroy.call(this)}})})(jQuery);
(function(a,h){function e(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._inDialog=this._datepickerShowing=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su",
"Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",
minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};a.extend(this._defaults,this.regional[""]);this.dpDiv=d(a('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function d(b){return b.bind("mouseout",
function(c){c=a(c.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a");c.length&&c.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(c){c=a(c.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a");if(!(a.datepicker._isDisabledDatepicker(f.inline?b.parent()[0]:f.input[0])||!c.length)){c.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");
c.addClass("ui-state-hover");c.hasClass("ui-datepicker-prev")&&c.addClass("ui-datepicker-prev-hover");c.hasClass("ui-datepicker-next")&&c.addClass("ui-datepicker-next-hover")}})}function g(b,c){a.extend(b,c);for(var k in c)if(c[k]==null||c[k]==h)b[k]=c[k];return b}a.extend(a.ui,{datepicker:{version:"1.8.24"}});var l=(new Date).getTime(),f;a.extend(e.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},
setDefaults:function(b){g(this._defaults,b||{});return this},_attachDatepicker:function(b,c){var k=null,m;for(m in this._defaults){var s=b.getAttribute("date:"+m);if(s){k=k||{};try{k[m]=eval(s)}catch(n){k[m]=s}}}m=b.nodeName.toLowerCase();s=m=="div"||m=="span";if(!b.id){this.uuid+=1;b.id="dp"+this.uuid}var B=this._newInst(a(b),s);B.settings=a.extend({},c||{},k||{});if(m=="input")this._connectDatepicker(b,B);else s&&this._inlineDatepicker(b,B)},_newInst:function(b,c){return{id:b[0].id.replace(/([^A-Za-z0-9_-])/g,
"\\\\$1"),input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:!c?this.dpDiv:d(a('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}},_connectDatepicker:function(b,c){var k=a(b);c.append=a([]);c.trigger=a([]);if(!k.hasClass(this.markerClassName)){this._attachments(k,c);k.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",
function(m,s,n){c.settings[s]=n}).bind("getData.datepicker",function(m,s){return this._get(c,s)});this._autoSize(c);a.data(b,"datepicker",c);c.settings.disabled&&this._disableDatepicker(b)}},_attachments:function(b,c){var k=this._get(c,"appendText"),m=this._get(c,"isRTL");c.append&&c.append.remove();if(k){c.append=a('<span class="'+this._appendClass+'">'+k+"</span>");b[m?"before":"after"](c.append)}b.unbind("focus",this._showDatepicker);c.trigger&&c.trigger.remove();k=this._get(c,"showOn");if(k==
"focus"||k=="both")b.focus(this._showDatepicker);if(k=="button"||k=="both"){k=this._get(c,"buttonText");var s=this._get(c,"buttonImage");c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:s,alt:k,title:k}):a('<button type="button"></button>').addClass(this._triggerClass).html(s==""?k:a("<img/>").attr({src:s,alt:k,title:k})));b[m?"before":"after"](c.trigger);c.trigger.click(function(){if(a.datepicker._datepickerShowing&&a.datepicker._lastInput==b[0])a.datepicker._hideDatepicker();
else{a.datepicker._datepickerShowing&&a.datepicker._lastInput!=b[0]&&a.datepicker._hideDatepicker();a.datepicker._showDatepicker(b[0])}return false})}},_autoSize:function(b){if(this._get(b,"autoSize")&&!b.inline){var c=new Date(2009,11,20),k=this._get(b,"dateFormat");if(k.match(/[DM]/)){var m=function(s){for(var n=0,B=0,D=0;D<s.length;D++)if(s[D].length>n){n=s[D].length;B=D}return B};c.setMonth(m(this._get(b,k.match(/MM/)?"monthNames":"monthNamesShort")));c.setDate(m(this._get(b,k.match(/DD/)?"dayNames":
"dayNamesShort"))+20-c.getDay())}b.input.attr("size",this._formatDate(b,c).length)}},_inlineDatepicker:function(b,c){var k=a(b);if(!k.hasClass(this.markerClassName)){k.addClass(this.markerClassName).append(c.dpDiv).bind("setData.datepicker",function(m,s,n){c.settings[s]=n}).bind("getData.datepicker",function(m,s){return this._get(c,s)});a.data(b,"datepicker",c);this._setDate(c,this._getDefaultDate(c),true);this._updateDatepicker(c);this._updateAlternate(c);c.settings.disabled&&this._disableDatepicker(b);
c.dpDiv.css("display","block")}},_dialogDatepicker:function(b,c,k,m,s){b=this._dialogInst;if(!b){this.uuid+=1;this._dialogInput=a('<input type="text" id="'+("dp"+this.uuid)+'" style="position: absolute; top: -100px; width: 0px;"/>');this._dialogInput.keydown(this._doKeyDown);a("body").append(this._dialogInput);b=this._dialogInst=this._newInst(this._dialogInput,false);b.settings={};a.data(this._dialogInput[0],"datepicker",b)}g(b.settings,m||{});c=c&&c.constructor==Date?this._formatDate(b,c):c;this._dialogInput.val(c);
this._pos=s?s.length?s:[s.pageX,s.pageY]:null;if(!this._pos)this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)];this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");b.settings.onSelect=k;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);a.blockUI&&a.blockUI(this.dpDiv);
a.data(this._dialogInput[0],"datepicker",b);return this},_destroyDatepicker:function(b){var c=a(b),k=a.data(b,"datepicker");if(c.hasClass(this.markerClassName)){var m=b.nodeName.toLowerCase();a.removeData(b,"datepicker");if(m=="input"){k.append.remove();k.trigger.remove();c.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else if(m=="div"||m=="span")c.removeClass(this.markerClassName).empty()}},
_enableDatepicker:function(b){var c=a(b),k=a.data(b,"datepicker");if(c.hasClass(this.markerClassName)){var m=b.nodeName.toLowerCase();if(m=="input"){b.disabled=false;k.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(m=="div"||m=="span"){c=c.children("."+this._inlineClass);c.children().removeClass("ui-state-disabled");c.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=
a.map(this._disabledInputs,function(s){return s==b?null:s})}},_disableDatepicker:function(b){var c=a(b),k=a.data(b,"datepicker");if(c.hasClass(this.markerClassName)){var m=b.nodeName.toLowerCase();if(m=="input"){b.disabled=true;k.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(m=="div"||m=="span"){c=c.children("."+this._inlineClass);c.children().addClass("ui-state-disabled");c.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled",
"disabled")}this._disabledInputs=a.map(this._disabledInputs,function(s){return s==b?null:s});this._disabledInputs[this._disabledInputs.length]=b}},_isDisabledDatepicker:function(b){if(!b)return false;for(var c=0;c<this._disabledInputs.length;c++)if(this._disabledInputs[c]==b)return true;return false},_getInst:function(b){try{return a.data(b,"datepicker")}catch(c){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(b,c,k){var m=this._getInst(b);if(arguments.length==2&&typeof c==
"string")return c=="defaults"?a.extend({},a.datepicker._defaults):m?c=="all"?a.extend({},m.settings):this._get(m,c):null;var s=c||{};if(typeof c=="string"){s={};s[c]=k}if(m){this._curInst==m&&this._hideDatepicker();var n=this._getDateDatepicker(b,true),B=this._getMinMaxDate(m,"min"),D=this._getMinMaxDate(m,"max");g(m.settings,s);if(B!==null&&s.dateFormat!==h&&s.minDate===h)m.settings.minDate=this._formatDate(m,B);if(D!==null&&s.dateFormat!==h&&s.maxDate===h)m.settings.maxDate=this._formatDate(m,D);
this._attachments(a(b),m);this._autoSize(m);this._setDate(m,n);this._updateAlternate(m);this._updateDatepicker(m)}},_changeDatepicker:function(b,c,k){this._optionDatepicker(b,c,k)},_refreshDatepicker:function(b){(b=this._getInst(b))&&this._updateDatepicker(b)},_setDateDatepicker:function(b,c){var k=this._getInst(b);if(k){this._setDate(k,c);this._updateDatepicker(k);this._updateAlternate(k)}},_getDateDatepicker:function(b,c){var k=this._getInst(b);k&&!k.inline&&this._setDateFromField(k,c);return k?
this._getDate(k):null},_doKeyDown:function(b){var c=a.datepicker._getInst(b.target),k=true,m=c.dpDiv.is(".ui-datepicker-rtl");c._keyEvent=true;if(a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker();k=false;break;case 13:k=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",c.dpDiv);k[0]&&a.datepicker._selectDay(b.target,c.selectedMonth,c.selectedYear,k[0]);if(b=a.datepicker._get(c,"onSelect")){k=a.datepicker._formatDate(c);b.apply(c.input?
c.input[0]:null,[k,c])}else a.datepicker._hideDatepicker();return false;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(c,"stepBigMonths"):-a.datepicker._get(c,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(c,"stepBigMonths"):+a.datepicker._get(c,"stepMonths"),"M");break;case 35:if(b.ctrlKey||b.metaKey)a.datepicker._clearDate(b.target);k=b.ctrlKey||b.metaKey;break;case 36:if(b.ctrlKey||
b.metaKey)a.datepicker._gotoToday(b.target);k=b.ctrlKey||b.metaKey;break;case 37:if(b.ctrlKey||b.metaKey)a.datepicker._adjustDate(b.target,m?+1:-1,"D");k=b.ctrlKey||b.metaKey;if(b.originalEvent.altKey)a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(c,"stepBigMonths"):-a.datepicker._get(c,"stepMonths"),"M");break;case 38:if(b.ctrlKey||b.metaKey)a.datepicker._adjustDate(b.target,-7,"D");k=b.ctrlKey||b.metaKey;break;case 39:if(b.ctrlKey||b.metaKey)a.datepicker._adjustDate(b.target,m?-1:
+1,"D");k=b.ctrlKey||b.metaKey;if(b.originalEvent.altKey)a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(c,"stepBigMonths"):+a.datepicker._get(c,"stepMonths"),"M");break;case 40:if(b.ctrlKey||b.metaKey)a.datepicker._adjustDate(b.target,+7,"D");k=b.ctrlKey||b.metaKey;break;default:k=false}else if(b.keyCode==36&&b.ctrlKey)a.datepicker._showDatepicker(this);else k=false;if(k){b.preventDefault();b.stopPropagation()}},_doKeyPress:function(b){var c=a.datepicker._getInst(b.target);if(a.datepicker._get(c,
"constrainInput")){c=a.datepicker._possibleChars(a.datepicker._get(c,"dateFormat"));var k=String.fromCharCode(b.charCode==h?b.keyCode:b.charCode);return b.ctrlKey||b.metaKey||k<" "||!c||c.indexOf(k)>-1}},_doKeyUp:function(b){b=a.datepicker._getInst(b.target);if(b.input.val()!=b.lastVal)try{if(a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,a.datepicker._getFormatConfig(b))){a.datepicker._setDateFromField(b);a.datepicker._updateAlternate(b);a.datepicker._updateDatepicker(b)}}catch(c){a.datepicker.log(c)}return true},
_showDatepicker:function(b){b=b.target||b;if(b.nodeName.toLowerCase()!="input")b=a("input",b.parentNode)[0];if(!(a.datepicker._isDisabledDatepicker(b)||a.datepicker._lastInput==b)){var c=a.datepicker._getInst(b);if(a.datepicker._curInst&&a.datepicker._curInst!=c){a.datepicker._curInst.dpDiv.stop(true,true);c&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0])}var k=a.datepicker._get(c,"beforeShow");k=k?k.apply(b,[b,c]):{};if(k!==false){g(c.settings,k);c.lastVal=
null;a.datepicker._lastInput=b;a.datepicker._setDateFromField(c);if(a.datepicker._inDialog)b.value="";if(!a.datepicker._pos){a.datepicker._pos=a.datepicker._findPos(b);a.datepicker._pos[1]+=b.offsetHeight}var m=false;a(b).parents().each(function(){m|=a(this).css("position")=="fixed";return!m});if(m&&a.browser.opera){a.datepicker._pos[0]-=document.documentElement.scrollLeft;a.datepicker._pos[1]-=document.documentElement.scrollTop}k={left:a.datepicker._pos[0],top:a.datepicker._pos[1]};a.datepicker._pos=
null;c.dpDiv.empty();c.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});a.datepicker._updateDatepicker(c);k=a.datepicker._checkOffset(c,k,m);c.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":m?"fixed":"absolute",display:"none",left:k.left+"px",top:k.top+"px"});if(!c.inline){k=a.datepicker._get(c,"showAnim");var s=a.datepicker._get(c,"duration"),n=function(){var B=c.dpDiv.find("iframe.ui-datepicker-cover");if(B.length){var D=a.datepicker._getBorders(c.dpDiv);B.css({left:-D[0],
top:-D[1],width:c.dpDiv.outerWidth(),height:c.dpDiv.outerHeight()})}};c.dpDiv.zIndex(a(b).zIndex()+1);a.datepicker._datepickerShowing=true;a.effects&&a.effects[k]?c.dpDiv.show(k,a.datepicker._get(c,"showOptions"),s,n):c.dpDiv[k||"show"](k?s:null,n);if(!k||!s)n();c.input.is(":visible")&&!c.input.is(":disabled")&&c.input.focus();a.datepicker._curInst=c}}}},_updateDatepicker:function(b){this.maxRows=4;var c=a.datepicker._getBorders(b.dpDiv);f=b;b.dpDiv.empty().append(this._generateHTML(b));this._attachHandlers(b);
var k=b.dpDiv.find("iframe.ui-datepicker-cover");k.length&&k.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()});b.dpDiv.find("."+this._dayOverClass+" a").mouseover();c=this._getNumberOfMonths(b);k=c[1];b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");k>1&&b.dpDiv.addClass("ui-datepicker-multi-"+k).css("width",17*k+"em");b.dpDiv[(c[0]!=1||c[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");b.dpDiv[(this._get(b,"isRTL")?
"add":"remove")+"Class"]("ui-datepicker-rtl");b==a.datepicker._curInst&&a.datepicker._datepickerShowing&&b.input&&b.input.is(":visible")&&!b.input.is(":disabled")&&b.input[0]!=document.activeElement&&b.input.focus();if(b.yearshtml){var m=b.yearshtml;setTimeout(function(){m===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml);m=b.yearshtml=null},0)}},_getBorders:function(b){var c=function(k){return{thin:1,medium:2,thick:3}[k]||k};return[parseFloat(c(b.css("border-left-width"))),
parseFloat(c(b.css("border-top-width")))]},_checkOffset:function(b,c,k){var m=b.dpDiv.outerWidth(),s=b.dpDiv.outerHeight(),n=b.input?b.input.outerWidth():0,B=b.input?b.input.outerHeight():0,D=document.documentElement.clientWidth+(k?0:a(document).scrollLeft()),E=document.documentElement.clientHeight+(k?0:a(document).scrollTop());c.left-=this._get(b,"isRTL")?m-n:0;c.left-=k&&c.left==b.input.offset().left?a(document).scrollLeft():0;c.top-=k&&c.top==b.input.offset().top+B?a(document).scrollTop():0;c.left-=
Math.min(c.left,c.left+m>D&&D>m?Math.abs(c.left+m-D):0);c.top-=Math.min(c.top,c.top+s>E&&E>s?Math.abs(s+B):0);return c},_findPos:function(b){for(var c=this._get(this._getInst(b),"isRTL");b&&(b.type=="hidden"||b.nodeType!=1||a.expr.filters.hidden(b));)b=b[c?"previousSibling":"nextSibling"];b=a(b).offset();return[b.left,b.top]},_hideDatepicker:function(b){var c=this._curInst;if(!(!c||b&&c!=a.data(b,"datepicker")))if(this._datepickerShowing){b=this._get(c,"showAnim");var k=this._get(c,"duration"),m=
function(){a.datepicker._tidyDialog(c)};a.effects&&a.effects[b]?c.dpDiv.hide(b,a.datepicker._get(c,"showOptions"),k,m):c.dpDiv[b=="slideDown"?"slideUp":b=="fadeIn"?"fadeOut":"hide"](b?k:null,m);b||m();this._datepickerShowing=false;if(b=this._get(c,"onClose"))b.apply(c.input?c.input[0]:null,[c.input?c.input.val():"",c]);this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(a.blockUI){a.unblockUI();a("body").append(this.dpDiv)}}this._inDialog=
false}},_tidyDialog:function(b){b.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(a.datepicker._curInst){b=a(b.target);var c=a.datepicker._getInst(b[0]);if(b[0].id!=a.datepicker._mainDivId&&b.parents("#"+a.datepicker._mainDivId).length==0&&!b.hasClass(a.datepicker.markerClassName)&&!b.closest("."+a.datepicker._triggerClass).length&&a.datepicker._datepickerShowing&&!(a.datepicker._inDialog&&a.blockUI)||b.hasClass(a.datepicker.markerClassName)&&
a.datepicker._curInst!=c)a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,k){b=a(b);var m=this._getInst(b[0]);if(!this._isDisabledDatepicker(b[0])){this._adjustInstDate(m,c+(k=="M"?this._get(m,"showCurrentAtPos"):0),k);this._updateDatepicker(m)}},_gotoToday:function(b){b=a(b);var c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay){c.selectedDay=c.currentDay;c.drawMonth=c.selectedMonth=c.currentMonth;c.drawYear=c.selectedYear=c.currentYear}else{var k=new Date;c.selectedDay=
k.getDate();c.drawMonth=c.selectedMonth=k.getMonth();c.drawYear=c.selectedYear=k.getFullYear()}this._notifyChange(c);this._adjustDate(b)},_selectMonthYear:function(b,c,k){b=a(b);var m=this._getInst(b[0]);m["selected"+(k=="M"?"Month":"Year")]=m["draw"+(k=="M"?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10);this._notifyChange(m);this._adjustDate(b)},_selectDay:function(b,c,k,m){var s=a(b);if(!(a(m).hasClass(this._unselectableClass)||this._isDisabledDatepicker(s[0]))){s=this._getInst(s[0]);
s.selectedDay=s.currentDay=a("a",m).html();s.selectedMonth=s.currentMonth=c;s.selectedYear=s.currentYear=k;this._selectDate(b,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))}},_clearDate:function(b){b=a(b);this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(b,c){var k=this._getInst(a(b)[0]);c=c!=null?c:this._formatDate(k);k.input&&k.input.val(c);this._updateAlternate(k);var m=this._get(k,"onSelect");if(m)m.apply(k.input?k.input[0]:null,[c,k]);else k.input&&k.input.trigger("change");
if(k.inline)this._updateDatepicker(k);else{this._hideDatepicker();this._lastInput=k.input[0];typeof k.input[0]!="object"&&k.input.focus();this._lastInput=null}},_updateAlternate:function(b){var c=this._get(b,"altField");if(c){var k=this._get(b,"altFormat")||this._get(b,"dateFormat"),m=this._getDate(b),s=this.formatDate(k,m,this._getFormatConfig(b));a(c).each(function(){a(this).val(s)})}},noWeekends:function(b){b=b.getDay();return[b>0&&b<6,""]},iso8601Week:function(b){b=new Date(b.getTime());b.setDate(b.getDate()+
4-(b.getDay()||7));var c=b.getTime();b.setMonth(0);b.setDate(1);return Math.floor(Math.round((c-b)/864E5)/7)+1},parseDate:function(b,c,k){if(b==null||c==null)throw"Invalid arguments";c=typeof c=="object"?c.toString():c+"";if(c=="")return null;var m=(k?k.shortYearCutoff:null)||this._defaults.shortYearCutoff;m=typeof m!="string"?m:(new Date).getFullYear()%100+parseInt(m,10);for(var s=(k?k.dayNamesShort:null)||this._defaults.dayNamesShort,n=(k?k.dayNames:null)||this._defaults.dayNames,B=(k?k.monthNamesShort:
null)||this._defaults.monthNamesShort,D=(k?k.monthNames:null)||this._defaults.monthNames,E=k=-1,I=-1,Q=-1,O=false,N=function(ia){(ia=ba+1<b.length&&b.charAt(ba+1)==ia)&&ba++;return ia},aa=function(ia){var ca=N(ia);ia=RegExp("^\\d{1,"+(ia=="@"?14:ia=="!"?20:ia=="y"&&ca?4:ia=="o"?3:2)+"}");ia=c.substring(U).match(ia);if(!ia)throw"Missing number at position "+U;U+=ia[0].length;return parseInt(ia[0],10)},ga=function(ia,ca,V){ia=a.map(N(ia)?V:ca,function(oa,pa){return[[pa,oa]]}).sort(function(oa,pa){return-(oa[1].length-
pa[1].length)});var Y=-1;a.each(ia,function(oa,pa){var ma=pa[1];if(c.substr(U,ma.length).toLowerCase()==ma.toLowerCase()){Y=pa[0];U+=ma.length;return false}});if(Y!=-1)return Y+1;else throw"Unknown name at position "+U;},T=function(){if(c.charAt(U)!=b.charAt(ba))throw"Unexpected literal at position "+U;U++},U=0,ba=0;ba<b.length;ba++)if(O)if(b.charAt(ba)=="'"&&!N("'"))O=false;else T();else switch(b.charAt(ba)){case "d":I=aa("d");break;case "D":ga("D",s,n);break;case "o":Q=aa("o");break;case "m":E=
aa("m");break;case "M":E=ga("M",B,D);break;case "y":k=aa("y");break;case "@":var ua=new Date(aa("@"));k=ua.getFullYear();E=ua.getMonth()+1;I=ua.getDate();break;case "!":ua=new Date((aa("!")-this._ticksTo1970)/1E4);k=ua.getFullYear();E=ua.getMonth()+1;I=ua.getDate();break;case "'":if(N("'"))T();else O=true;break;default:T()}if(U<c.length)throw"Extra/unparsed characters found in date: "+c.substring(U);if(k==-1)k=(new Date).getFullYear();else if(k<100)k+=(new Date).getFullYear()-(new Date).getFullYear()%
100+(k<=m?0:-100);if(Q>-1){E=1;I=Q;do{m=this._getDaysInMonth(k,E-1);if(I<=m)break;E++;I-=m}while(1)}ua=this._daylightSavingAdjust(new Date(k,E-1,I));if(ua.getFullYear()!=k||ua.getMonth()+1!=E||ua.getDate()!=I)throw"Invalid date";return ua},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+
Math.floor(4.925))*24*60*60*1E7,formatDate:function(b,c,k){if(!c)return"";var m=(k?k.dayNamesShort:null)||this._defaults.dayNamesShort,s=(k?k.dayNames:null)||this._defaults.dayNames,n=(k?k.monthNamesShort:null)||this._defaults.monthNamesShort;k=(k?k.monthNames:null)||this._defaults.monthNames;var B=function(N){(N=O+1<b.length&&b.charAt(O+1)==N)&&O++;return N},D=function(N,aa,ga){aa=""+aa;if(B(N))for(;aa.length<ga;)aa="0"+aa;return aa},E=function(N,aa,ga,T){return B(N)?T[aa]:ga[aa]},I="",Q=false;if(c)for(var O=
0;O<b.length;O++)if(Q)if(b.charAt(O)=="'"&&!B("'"))Q=false;else I+=b.charAt(O);else switch(b.charAt(O)){case "d":I+=D("d",c.getDate(),2);break;case "D":I+=E("D",c.getDay(),m,s);break;case "o":I+=D("o",Math.round(((new Date(c.getFullYear(),c.getMonth(),c.getDate())).getTime()-(new Date(c.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":I+=D("m",c.getMonth()+1,2);break;case "M":I+=E("M",c.getMonth(),n,k);break;case "y":I+=B("y")?c.getFullYear():(c.getYear()%100<10?"0":"")+c.getYear()%100;break;
case "@":I+=c.getTime();break;case "!":I+=c.getTime()*1E4+this._ticksTo1970;break;case "'":if(B("'"))I+="'";else Q=true;break;default:I+=b.charAt(O)}return I},_possibleChars:function(b){for(var c="",k=false,m=function(n){(n=s+1<b.length&&b.charAt(s+1)==n)&&s++;return n},s=0;s<b.length;s++)if(k)if(b.charAt(s)=="'"&&!m("'"))k=false;else c+=b.charAt(s);else switch(b.charAt(s)){case "d":case "m":case "y":case "@":c+="0123456789";break;case "D":case "M":return null;case "'":if(m("'"))c+="'";else k=true;
break;default:c+=b.charAt(s)}return c},_get:function(b,c){return b.settings[c]!==h?b.settings[c]:this._defaults[c]},_setDateFromField:function(b,c){if(b.input.val()!=b.lastVal){var k=this._get(b,"dateFormat"),m=b.lastVal=b.input?b.input.val():null,s,n;s=n=this._getDefaultDate(b);var B=this._getFormatConfig(b);try{s=this.parseDate(k,m,B)||n}catch(D){this.log(D);m=c?"":m}b.selectedDay=s.getDate();b.drawMonth=b.selectedMonth=s.getMonth();b.drawYear=b.selectedYear=s.getFullYear();b.currentDay=m?s.getDate():
0;b.currentMonth=m?s.getMonth():0;b.currentYear=m?s.getFullYear():0;this._adjustInstDate(b)}},_getDefaultDate:function(b){return this._restrictMinMax(b,this._determineDate(b,this._get(b,"defaultDate"),new Date))},_determineDate:function(b,c,k){var m=function(n){var B=new Date;B.setDate(B.getDate()+n);return B},s=function(n){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),n,a.datepicker._getFormatConfig(b))}catch(B){}var D=(n.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||
new Date,E=D.getFullYear(),I=D.getMonth();D=D.getDate();for(var Q=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,O=Q.exec(n);O;){switch(O[2]||"d"){case "d":case "D":D+=parseInt(O[1],10);break;case "w":case "W":D+=parseInt(O[1],10)*7;break;case "m":case "M":I+=parseInt(O[1],10);D=Math.min(D,a.datepicker._getDaysInMonth(E,I));break;case "y":case "Y":E+=parseInt(O[1],10);D=Math.min(D,a.datepicker._getDaysInMonth(E,I))}O=Q.exec(n)}return new Date(E,I,D)};if(c=(c=c==null||c===""?k:typeof c=="string"?s(c):typeof c==
"number"?isNaN(c)?k:m(c):new Date(c.getTime()))&&c.toString()=="Invalid Date"?k:c){c.setHours(0);c.setMinutes(0);c.setSeconds(0);c.setMilliseconds(0)}return this._daylightSavingAdjust(c)},_daylightSavingAdjust:function(b){if(!b)return null;b.setHours(b.getHours()>12?b.getHours()+2:0);return b},_setDate:function(b,c,k){var m=!c,s=b.selectedMonth,n=b.selectedYear;c=this._restrictMinMax(b,this._determineDate(b,c,new Date));b.selectedDay=b.currentDay=c.getDate();b.drawMonth=b.selectedMonth=b.currentMonth=
c.getMonth();b.drawYear=b.selectedYear=b.currentYear=c.getFullYear();if((s!=b.selectedMonth||n!=b.selectedYear)&&!k)this._notifyChange(b);this._adjustInstDate(b);if(b.input)b.input.val(m?"":this._formatDate(b))},_getDate:function(b){return!b.currentYear||b.input&&b.input.val()==""?null:this._daylightSavingAdjust(new Date(b.currentYear,b.currentMonth,b.currentDay))},_attachHandlers:function(b){var c=this._get(b,"stepMonths"),k="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){a(this).bind(this.getAttribute("data-event"),
{prev:function(){window["DP_jQuery_"+l].datepicker._adjustDate(k,-c,"M")},next:function(){window["DP_jQuery_"+l].datepicker._adjustDate(k,+c,"M")},hide:function(){window["DP_jQuery_"+l].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+l].datepicker._gotoToday(k)},selectDay:function(){window["DP_jQuery_"+l].datepicker._selectDay(k,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false},selectMonth:function(){window["DP_jQuery_"+l].datepicker._selectMonthYear(k,
this,"M");return false},selectYear:function(){window["DP_jQuery_"+l].datepicker._selectMonthYear(k,this,"Y");return false}}[this.getAttribute("data-handler")])})},_generateHTML:function(b){var c=new Date;c=this._daylightSavingAdjust(new Date(c.getFullYear(),c.getMonth(),c.getDate()));var k=this._get(b,"isRTL"),m=this._get(b,"showButtonPanel"),s=this._get(b,"hideIfNoPrevNext"),n=this._get(b,"navigationAsDateFormat"),B=this._getNumberOfMonths(b),D=this._get(b,"showCurrentAtPos"),E=this._get(b,"stepMonths"),
I=B[0]!=1||B[1]!=1,Q=this._daylightSavingAdjust(!b.currentDay?new Date(9999,9,9):new Date(b.currentYear,b.currentMonth,b.currentDay)),O=this._getMinMaxDate(b,"min"),N=this._getMinMaxDate(b,"max");D=b.drawMonth-D;var aa=b.drawYear;if(D<0){D+=12;aa--}if(N){var ga=this._daylightSavingAdjust(new Date(N.getFullYear(),N.getMonth()-B[0]*B[1]+1,N.getDate()));for(ga=O&&ga<O?O:ga;this._daylightSavingAdjust(new Date(aa,D,1))>ga;){D--;if(D<0){D=11;aa--}}}b.drawMonth=D;b.drawYear=aa;ga=this._get(b,"prevText");
ga=!n?ga:this.formatDate(ga,this._daylightSavingAdjust(new Date(aa,D-E,1)),this._getFormatConfig(b));ga=this._canAdjustMonth(b,-1,aa,D)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+ga+'"><span class="ui-icon ui-icon-circle-triangle-'+(k?"e":"w")+'">'+ga+"</span></a>":s?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+ga+'"><span class="ui-icon ui-icon-circle-triangle-'+(k?"e":"w")+'">'+ga+"</span></a>";var T=this._get(b,"nextText");
T=!n?T:this.formatDate(T,this._daylightSavingAdjust(new Date(aa,D+E,1)),this._getFormatConfig(b));s=this._canAdjustMonth(b,+1,aa,D)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+T+'"><span class="ui-icon ui-icon-circle-triangle-'+(k?"w":"e")+'">'+T+"</span></a>":s?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+T+'"><span class="ui-icon ui-icon-circle-triangle-'+(k?"w":"e")+'">'+T+"</span></a>";E=this._get(b,"currentText");
T=this._get(b,"gotoCurrent")&&b.currentDay?Q:c;E=!n?E:this.formatDate(E,T,this._getFormatConfig(b));n=!b.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(b,"closeText")+"</button>":"";m=m?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(k?n:"")+(this._isInRange(b,T)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+
E+"</button>":"")+(k?"":n)+"</div>":"";n=parseInt(this._get(b,"firstDay"),10);n=isNaN(n)?0:n;E=this._get(b,"showWeek");T=this._get(b,"dayNames");this._get(b,"dayNamesShort");var U=this._get(b,"dayNamesMin"),ba=this._get(b,"monthNames"),ua=this._get(b,"monthNamesShort"),ia=this._get(b,"beforeShowDay"),ca=this._get(b,"showOtherMonths"),V=this._get(b,"selectOtherMonths");this._get(b,"calculateWeek");for(var Y=this._getDefaultDate(b),oa="",pa=0;pa<B[0];pa++){var ma="";this.maxRows=4;for(var ka=0;ka<B[1];ka++){var Ba=
this._daylightSavingAdjust(new Date(aa,D,b.selectedDay)),ra=" ui-corner-all",Ca="";if(I){Ca+='<div class="ui-datepicker-group';if(B[1]>1)switch(ka){case 0:Ca+=" ui-datepicker-group-first";ra=" ui-corner-"+(k?"right":"left");break;case B[1]-1:Ca+=" ui-datepicker-group-last";ra=" ui-corner-"+(k?"left":"right");break;default:Ca+=" ui-datepicker-group-middle";ra=""}Ca+='">'}Ca+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+ra+'">'+(/all|left/.test(ra)&&pa==0?k?s:ga:"")+(/all|right/.test(ra)&&
pa==0?k?ga:s:"")+this._generateMonthYearHeader(b,D,aa,O,N,pa>0||ka>0,ba,ua)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var ya=E?'<th class="ui-datepicker-week-col">'+this._get(b,"weekHeader")+"</th>":"";for(ra=0;ra<7;ra++){var qa=(ra+n)%7;ya+="<th"+((ra+n+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+T[qa]+'">'+U[qa]+"</span></th>"}Ca+=ya+"</tr></thead><tbody>";ya=this._getDaysInMonth(aa,D);if(aa==b.selectedYear&&D==b.selectedMonth)b.selectedDay=Math.min(b.selectedDay,
ya);ra=(this._getFirstDayOfMonth(aa,D)-n+7)%7;ya=Math.ceil((ra+ya)/7);this.maxRows=ya=I?this.maxRows>ya?this.maxRows:ya:ya;qa=this._daylightSavingAdjust(new Date(aa,D,1-ra));for(var Ka=0;Ka<ya;Ka++){Ca+="<tr>";var Da=!E?"":'<td class="ui-datepicker-week-col">'+this._get(b,"calculateWeek")(qa)+"</td>";for(ra=0;ra<7;ra++){var xa=ia?ia.apply(b.input?b.input[0]:null,[qa]):[true,""],sa=qa.getMonth()!=D,va=sa&&!V||!xa[0]||O&&qa<O||N&&qa>N;Da+='<td class="'+((ra+n+6)%7>=5?" ui-datepicker-week-end":"")+(sa?
" ui-datepicker-other-month":"")+(qa.getTime()==Ba.getTime()&&D==b.selectedMonth&&b._keyEvent||Y.getTime()==qa.getTime()&&Y.getTime()==Ba.getTime()?" "+this._dayOverClass:"")+(va?" "+this._unselectableClass+" ui-state-disabled":"")+(sa&&!ca?"":" "+xa[1]+(qa.getTime()==Q.getTime()?" "+this._currentClass:"")+(qa.getTime()==c.getTime()?" ui-datepicker-today":""))+'"'+((!sa||ca)&&xa[2]?' title="'+xa[2]+'"':"")+(va?"":' data-handler="selectDay" data-event="click" data-month="'+qa.getMonth()+'" data-year="'+
qa.getFullYear()+'"')+">"+(sa&&!ca?"&#xa0;":va?'<span class="ui-state-default">'+qa.getDate()+"</span>":'<a class="ui-state-default'+(qa.getTime()==c.getTime()?" ui-state-highlight":"")+(qa.getTime()==Q.getTime()?" ui-state-active":"")+(sa?" ui-priority-secondary":"")+'" href="#">'+qa.getDate()+"</a>")+"</td>";qa.setDate(qa.getDate()+1);qa=this._daylightSavingAdjust(qa)}Ca+=Da+"</tr>"}D++;if(D>11){D=0;aa++}Ca+="</tbody></table>"+(I?"</div>"+(B[0]>0&&ka==B[1]-1?'<div class="ui-datepicker-row-break"></div>':
""):"");ma+=Ca}oa+=ma}oa+=m+(a.browser.msie&&parseInt(a.browser.version,10)<7&&!b.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");b._keyEvent=false;return oa},_generateMonthYearHeader:function(b,c,k,m,s,n,B,D){var E=this._get(b,"changeMonth"),I=this._get(b,"changeYear"),Q=this._get(b,"showMonthAfterYear"),O='<div class="ui-datepicker-title">',N="";if(n||!E)N+='<span class="ui-datepicker-month">'+B[c]+"</span>";else{B=m&&m.getFullYear()==k;var aa=
s&&s.getFullYear()==k;N+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var ga=0;ga<12;ga++)if((!B||ga>=m.getMonth())&&(!aa||ga<=s.getMonth()))N+='<option value="'+ga+'"'+(ga==c?' selected="selected"':"")+">"+D[ga]+"</option>";N+="</select>"}Q||(O+=N+(n||!(E&&I)?"&#xa0;":""));if(!b.yearshtml){b.yearshtml="";if(n||!I)O+='<span class="ui-datepicker-year">'+k+"</span>";else{D=this._get(b,"yearRange").split(":");var T=(new Date).getFullYear();B=function(U){U=
U.match(/c[+-].*/)?k+parseInt(U.substring(1),10):U.match(/[+-].*/)?T+parseInt(U,10):parseInt(U,10);return isNaN(U)?T:U};c=B(D[0]);D=Math.max(c,B(D[1]||""));c=m?Math.max(c,m.getFullYear()):c;D=s?Math.min(D,s.getFullYear()):D;for(b.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';c<=D;c++)b.yearshtml+='<option value="'+c+'"'+(c==k?' selected="selected"':"")+">"+c+"</option>";b.yearshtml+="</select>";O+=b.yearshtml;b.yearshtml=null}}O+=this._get(b,"yearSuffix");
if(Q)O+=(n||!(E&&I)?"&#xa0;":"")+N;O+="</div>";return O},_adjustInstDate:function(b,c,k){var m=b.drawYear+(k=="Y"?c:0),s=b.drawMonth+(k=="M"?c:0);c=Math.min(b.selectedDay,this._getDaysInMonth(m,s))+(k=="D"?c:0);m=this._restrictMinMax(b,this._daylightSavingAdjust(new Date(m,s,c)));b.selectedDay=m.getDate();b.drawMonth=b.selectedMonth=m.getMonth();b.drawYear=b.selectedYear=m.getFullYear();if(k=="M"||k=="Y")this._notifyChange(b)},_restrictMinMax:function(b,c){var k=this._getMinMaxDate(b,"min"),m=this._getMinMaxDate(b,
"max");k=k&&c<k?k:c;return k=m&&k>m?m:k},_notifyChange:function(b){var c=this._get(b,"onChangeMonthYear");if(c)c.apply(b.input?b.input[0]:null,[b.selectedYear,b.selectedMonth+1,b])},_getNumberOfMonths:function(b){b=this._get(b,"numberOfMonths");return b==null?[1,1]:typeof b=="number"?[1,b]:b},_getMinMaxDate:function(b,c){return this._determineDate(b,this._get(b,c+"Date"),null)},_getDaysInMonth:function(b,c){return 32-this._daylightSavingAdjust(new Date(b,c,32)).getDate()},_getFirstDayOfMonth:function(b,
c){return(new Date(b,c,1)).getDay()},_canAdjustMonth:function(b,c,k,m){var s=this._getNumberOfMonths(b);k=this._daylightSavingAdjust(new Date(k,m+(c<0?c:s[0]*s[1]),1));c<0&&k.setDate(this._getDaysInMonth(k.getFullYear(),k.getMonth()));return this._isInRange(b,k)},_isInRange:function(b,c){var k=this._getMinMaxDate(b,"min"),m=this._getMinMaxDate(b,"max");return(!k||c.getTime()>=k.getTime())&&(!m||c.getTime()<=m.getTime())},_getFormatConfig:function(b){var c=this._get(b,"shortYearCutoff");c=typeof c!=
"string"?c:(new Date).getFullYear()%100+parseInt(c,10);return{shortYearCutoff:c,dayNamesShort:this._get(b,"dayNamesShort"),dayNames:this._get(b,"dayNames"),monthNamesShort:this._get(b,"monthNamesShort"),monthNames:this._get(b,"monthNames")}},_formatDate:function(b,c,k,m){if(!c){b.currentDay=b.selectedDay;b.currentMonth=b.selectedMonth;b.currentYear=b.selectedYear}c=c?typeof c=="object"?c:this._daylightSavingAdjust(new Date(m,k,c)):this._daylightSavingAdjust(new Date(b.currentYear,b.currentMonth,b.currentDay));
return this.formatDate(this._get(b,"dateFormat"),c,this._getFormatConfig(b))}});a.fn.datepicker=function(b){if(!this.length)return this;if(!a.datepicker.initialized){a(document).mousedown(a.datepicker._checkExternalClick).find("body").append(a.datepicker.dpDiv);a.datepicker.initialized=true}var c=Array.prototype.slice.call(arguments,1);if(typeof b=="string"&&(b=="isDisabled"||b=="getDate"||b=="widget"))return a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c));if(b=="option"&&
arguments.length==2&&typeof arguments[1]=="string")return a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c));return this.each(function(){typeof b=="string"?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)})};a.datepicker=new e;a.datepicker.initialized=false;a.datepicker.uuid=(new Date).getTime();a.datepicker.version="1.8.24";window["DP_jQuery_"+l]=a})(jQuery);
(function(a,h){var e={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},d={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true};a.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",collision:"fit",using:function(g){var l=a(this).css(g).offset().top;l<0&&
a(this).css("top",g.top-l)}},resizable:true,show:null,stack:true,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");if(typeof this.originalTitle!=="string")this.originalTitle="";this.options.title=this.options.title||this.originalTitle;var g=this,l=g.options,f=l.title||"&#160;",b=a.ui.dialog.getTitleId(g.element),c=(g.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+l.dialogClass).css({zIndex:l.zIndex}).attr("tabIndex",
-1).css("outline",0).keydown(function(s){if(l.closeOnEscape&&!s.isDefaultPrevented()&&s.keyCode&&s.keyCode===a.ui.keyCode.ESCAPE){g.close(s);s.preventDefault()}}).attr({role:"dialog","aria-labelledby":b}).mousedown(function(s){g.moveToTop(false,s)});g.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(c);var k=(g.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(c),m=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role",
"button").hover(function(){m.addClass("ui-state-hover")},function(){m.removeClass("ui-state-hover")}).focus(function(){m.addClass("ui-state-focus")}).blur(function(){m.removeClass("ui-state-focus")}).click(function(s){g.close(s);return false}).appendTo(k);(g.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(l.closeText).appendTo(m);a("<span></span>").addClass("ui-dialog-title").attr("id",b).html(f).prependTo(k);if(a.isFunction(l.beforeclose)&&!a.isFunction(l.beforeClose))l.beforeClose=
l.beforeclose;k.find("*").add(k).disableSelection();l.draggable&&a.fn.draggable&&g._makeDraggable();l.resizable&&a.fn.resizable&&g._makeResizable();g._createButtons(l.buttons);g._isOpen=false;a.fn.bgiframe&&c.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){this.overlay&&this.overlay.destroy();this.uiDialog.hide();this.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");this.uiDialog.remove();
this.originalTitle&&this.element.attr("title",this.originalTitle);return this},widget:function(){return this.uiDialog},close:function(g){var l=this,f,b;if(false!==l._trigger("beforeClose",g)){l.overlay&&l.overlay.destroy();l.uiDialog.unbind("keypress.ui-dialog");l._isOpen=false;if(l.options.hide)l.uiDialog.hide(l.options.hide,function(){l._trigger("close",g)});else{l.uiDialog.hide();l._trigger("close",g)}a.ui.dialog.overlay.resize();if(l.options.modal){f=0;a(".ui-dialog").each(function(){if(this!==
l.uiDialog[0]){b=a(this).css("z-index");isNaN(b)||(f=Math.max(f,b))}});a.ui.dialog.maxZ=f}return l}},isOpen:function(){return this._isOpen},moveToTop:function(g,l){var f=this.options;if(f.modal&&!g||!f.stack&&!f.modal)return this._trigger("focus",l);if(f.zIndex>a.ui.dialog.maxZ)a.ui.dialog.maxZ=f.zIndex;if(this.overlay){a.ui.dialog.maxZ+=1;this.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)}f={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()};a.ui.dialog.maxZ+=
1;this.uiDialog.css("z-index",a.ui.dialog.maxZ);this.element.attr(f);this._trigger("focus",l);return this},open:function(){if(!this._isOpen){var g=this.options,l=this.uiDialog;this.overlay=g.modal?new a.ui.dialog.overlay(this):null;this._size();this._position(g.position);l.show(g.show);this.moveToTop(true);g.modal&&l.bind("keydown.ui-dialog",function(f){if(f.keyCode===a.ui.keyCode.TAB){var b=a(":tabbable",this),c=b.filter(":first");b=b.filter(":last");if(f.target===b[0]&&!f.shiftKey){c.focus(1);return false}else if(f.target===
c[0]&&f.shiftKey){b.focus(1);return false}}});a(this.element.find(":tabbable").get().concat(l.find(".ui-dialog-buttonpane :tabbable").get().concat(l.get()))).eq(0).focus();this._isOpen=true;this._trigger("open");return this}},_createButtons:function(g){var l=this,f=false,b=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),c=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(b);l.uiDialog.find(".ui-dialog-buttonpane").remove();typeof g==="object"&&g!==null&&
a.each(g,function(){return!(f=true)});if(f){a.each(g,function(k,m){m=a.isFunction(m)?{click:m,text:k}:m;var s=a('<button type="button"></button>').click(function(){m.click.apply(l.element[0],arguments)}).appendTo(c);a.each(m,function(n,B){if(n!=="click")n in s?s[n](B):s.attr(n,B)});a.fn.button&&s.button()});b.appendTo(l.uiDialog)}},_makeDraggable:function(){function g(k){return{position:k.position,offset:k.offset}}var l=this,f=l.options,b=a(document),c;l.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",
handle:".ui-dialog-titlebar",containment:"document",start:function(k,m){c=f.height==="auto"?"auto":a(this).height();a(this).height(a(this).height()).addClass("ui-dialog-dragging");l._trigger("dragStart",k,g(m))},drag:function(k,m){l._trigger("drag",k,g(m))},stop:function(k,m){f.position=[m.position.left-b.scrollLeft(),m.position.top-b.scrollTop()];a(this).removeClass("ui-dialog-dragging").height(c);l._trigger("dragStop",k,g(m));a.ui.dialog.overlay.resize()}})},_makeResizable:function(g){function l(k){return{originalPosition:k.originalPosition,
originalSize:k.originalSize,position:k.position,size:k.size}}g=g===h?this.options.resizable:g;var f=this,b=f.options,c=f.uiDialog.css("position");g=typeof g==="string"?g:"n,e,s,w,se,sw,ne,nw";f.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:f.element,maxWidth:b.maxWidth,maxHeight:b.maxHeight,minWidth:b.minWidth,minHeight:f._minHeight(),handles:g,start:function(k,m){a(this).addClass("ui-dialog-resizing");f._trigger("resizeStart",k,l(m))},resize:function(k,m){f._trigger("resize",
k,l(m))},stop:function(k,m){a(this).removeClass("ui-dialog-resizing");b.height=a(this).height();b.width=a(this).width();f._trigger("resizeStop",k,l(m));a.ui.dialog.overlay.resize()}}).css("position",c).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var g=this.options;return g.height==="auto"?g.minHeight:Math.min(g.minHeight,g.height)},_position:function(g){var l=[],f=[0,0],b;if(g){if(typeof g==="string"||typeof g==="object"&&"0"in g){l=g.split?g.split(" "):
[g[0],g[1]];if(l.length===1)l[1]=l[0];a.each(["left","top"],function(c,k){if(+l[c]===l[c]){f[c]=l[c];l[c]=k}});g={my:l.join(" "),at:l.join(" "),offset:f.join(" ")}}g=a.extend({},a.ui.dialog.prototype.options.position,g)}else g=a.ui.dialog.prototype.options.position;(b=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},g));b||this.uiDialog.hide()},_setOptions:function(g){var l=this,f={},b=false;a.each(g,function(c,k){l._setOption(c,k);
if(c in e)b=true;if(c in d)f[c]=k});b&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",f)},_setOption:function(g,l){var f=this.uiDialog;switch(g){case "beforeclose":g="beforeClose";break;case "buttons":this._createButtons(l);break;case "closeText":this.uiDialogTitlebarCloseText.text(""+l);break;case "dialogClass":f.removeClass(this.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+l);break;case "disabled":l?f.addClass("ui-dialog-disabled"):
f.removeClass("ui-dialog-disabled");break;case "draggable":var b=f.is(":data(draggable)");b&&!l&&f.draggable("destroy");!b&&l&&this._makeDraggable();break;case "position":this._position(l);break;case "resizable":(b=f.is(":data(resizable)"))&&!l&&f.resizable("destroy");b&&typeof l==="string"&&f.resizable("option","handles",l);!b&&l!==false&&this._makeResizable(l);break;case "title":a(".ui-dialog-title",this.uiDialogTitlebar).html(""+(l||"&#160;"))}a.Widget.prototype._setOption.apply(this,arguments)},
_size:function(){var g=this.options,l,f,b=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});if(g.minWidth>g.width)g.width=g.minWidth;l=this.uiDialog.css({height:"auto",width:g.width}).height();f=Math.max(0,g.minHeight-l);if(g.height==="auto")if(a.support.minHeight)this.element.css({minHeight:f,height:"auto"});else{this.uiDialog.show();g=this.element.css("height","auto").height();b||this.uiDialog.hide();this.element.height(Math.max(g,f))}else this.element.height(Math.max(g.height-
l,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}});a.extend(a.ui.dialog,{version:"1.8.24",uuid:0,maxZ:0,getTitleId:function(g){g=g.attr("id");if(!g){this.uuid+=1;g=this.uuid}return"ui-dialog-title-"+g},overlay:function(g){this.$el=a.ui.dialog.overlay.create(g)}});a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(g){return g+".dialog-overlay"}).join(" "),
create:function(g){if(this.instances.length===0){setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(f){if(a(f.target).zIndex()<a.ui.dialog.overlay.maxZ)return false})},1);a(document).bind("keydown.dialog-overlay",function(f){if(g.options.closeOnEscape&&!f.isDefaultPrevented()&&f.keyCode&&f.keyCode===a.ui.keyCode.ESCAPE){g.close(f);f.preventDefault()}});a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize)}var l=(this.oldInstances.pop()||
a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});a.fn.bgiframe&&l.bgiframe();this.instances.push(l);return l},destroy:function(g){var l=a.inArray(g,this.instances);l!=-1&&this.oldInstances.push(this.instances.splice(l,1)[0]);this.instances.length===0&&a([document,window]).unbind(".dialog-overlay");g.remove();var f=0;a.each(this.instances,function(){f=Math.max(f,this.css("z-index"))});this.maxZ=f},height:function(){var g,l;if(a.browser.msie&&
a.browser.version<7){g=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);l=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return g<l?a(window).height()+"px":g+"px"}else return a(document).height()+"px"},width:function(){var g,l;if(a.browser.msie){g=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);l=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return g<l?a(window).width()+"px":g+"px"}else return a(document).width()+
"px"},resize:function(){var g=a([]);a.each(a.ui.dialog.overlay.instances,function(){g=g.add(this)});g.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}});a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
(function(a){a.ui=a.ui||{};var h=/left|center|right/,e=/top|center|bottom/,d={},g=a.fn.position,l=a.fn.offset;a.fn.position=function(f){if(!f||!f.of)return g.apply(this,arguments);f=a.extend({},f);var b=a(f.of),c=b[0],k=(f.collision||"flip").split(" "),m=f.offset?f.offset.split(" "):[0,0],s,n,B;if(c.nodeType===9){s=b.width();n=b.height();B={top:0,left:0}}else if(c.setTimeout){s=b.width();n=b.height();B={top:b.scrollTop(),left:b.scrollLeft()}}else if(c.preventDefault){f.at="left top";s=n=0;B={top:f.of.pageY,
left:f.of.pageX}}else{s=b.outerWidth();n=b.outerHeight();B=b.offset()}a.each(["my","at"],function(){var D=(f[this]||"").split(" ");if(D.length===1)D=h.test(D[0])?D.concat(["center"]):e.test(D[0])?["center"].concat(D):["center","center"];D[0]=h.test(D[0])?D[0]:"center";D[1]=e.test(D[1])?D[1]:"center";f[this]=D});if(k.length===1)k[1]=k[0];m[0]=parseInt(m[0],10)||0;if(m.length===1)m[1]=m[0];m[1]=parseInt(m[1],10)||0;if(f.at[0]==="right")B.left+=s;else if(f.at[0]==="center")B.left+=s/2;if(f.at[1]==="bottom")B.top+=
n;else if(f.at[1]==="center")B.top+=n/2;B.left+=m[0];B.top+=m[1];return this.each(function(){var D=a(this),E=D.outerWidth(),I=D.outerHeight(),Q=parseInt(a.curCSS(this,"marginLeft",true))||0,O=parseInt(a.curCSS(this,"marginTop",true))||0,N=E+Q+(parseInt(a.curCSS(this,"marginRight",true))||0),aa=I+O+(parseInt(a.curCSS(this,"marginBottom",true))||0),ga=a.extend({},B),T;if(f.my[0]==="right")ga.left-=E;else if(f.my[0]==="center")ga.left-=E/2;if(f.my[1]==="bottom")ga.top-=I;else if(f.my[1]==="center")ga.top-=
I/2;if(!d.fractions){ga.left=Math.round(ga.left);ga.top=Math.round(ga.top)}T={left:ga.left-Q,top:ga.top-O};a.each(["left","top"],function(U,ba){a.ui.position[k[U]]&&a.ui.position[k[U]][ba](ga,{targetWidth:s,targetHeight:n,elemWidth:E,elemHeight:I,collisionPosition:T,collisionWidth:N,collisionHeight:aa,offset:m,my:f.my,at:f.at})});a.fn.bgiframe&&D.bgiframe();D.offset(a.extend(ga,{using:f.using}))})};a.ui.position={fit:{left:function(f,b){var c=a(window);c=b.collisionPosition.left+b.collisionWidth-
c.width()-c.scrollLeft();f.left=c>0?f.left-c:Math.max(f.left-b.collisionPosition.left,f.left)},top:function(f,b){var c=a(window);c=b.collisionPosition.top+b.collisionHeight-c.height()-c.scrollTop();f.top=c>0?f.top-c:Math.max(f.top-b.collisionPosition.top,f.top)}},flip:{left:function(f,b){if(b.at[0]!=="center"){var c=a(window);c=b.collisionPosition.left+b.collisionWidth-c.width()-c.scrollLeft();var k=b.my[0]==="left"?-b.elemWidth:b.my[0]==="right"?b.elemWidth:0,m=b.at[0]==="left"?b.targetWidth:-b.targetWidth,
s=-2*b.offset[0];f.left+=b.collisionPosition.left<0?k+m+s:c>0?k+m+s:0}},top:function(f,b){if(b.at[1]!=="center"){var c=a(window);c=b.collisionPosition.top+b.collisionHeight-c.height()-c.scrollTop();var k=b.my[1]==="top"?-b.elemHeight:b.my[1]==="bottom"?b.elemHeight:0,m=b.at[1]==="top"?b.targetHeight:-b.targetHeight,s=-2*b.offset[1];f.top+=b.collisionPosition.top<0?k+m+s:c>0?k+m+s:0}}}};if(!a.offset.setOffset){a.offset.setOffset=function(f,b){if(/static/.test(a.curCSS(f,"position")))f.style.position=
"relative";var c=a(f),k=c.offset(),m=parseInt(a.curCSS(f,"top",true),10)||0,s=parseInt(a.curCSS(f,"left",true),10)||0;k={top:b.top-k.top+m,left:b.left-k.left+s};"using"in b?b.using.call(f,k):c.css(k)};a.fn.offset=function(f){var b=this[0];if(!b||!b.ownerDocument)return null;if(f){if(a.isFunction(f))return this.each(function(c){a(this).offset(f.call(this,c,a(this).offset()))});return this.each(function(){a.offset.setOffset(this,f)})}return l.call(this)}}if(!a.curCSS)a.curCSS=a.css;(function(){var f=
document.getElementsByTagName("body")[0],b=document.createElement("div"),c,k;c=document.createElement(f?"div":"body");k={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};f&&a.extend(k,{position:"absolute",left:"-1000px",top:"-1000px"});for(var m in k)c.style[m]=k[m];c.appendChild(b);k=f||document.documentElement;k.insertBefore(c,k.firstChild);b.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;";b=a(b).offset(function(s,n){return n}).offset();
c.innerHTML="";k.removeChild(c);f=b.top+b.left+(f?2E3:0);d.fractions=f>21&&f<22})()})(jQuery);
(function(a,h){a.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()});this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
this.valueDiv.remove();a.Widget.prototype.destroy.apply(this,arguments)},value:function(e){if(e===h)return this._value();this._setOption("value",e);return this},_setOption:function(e,d){if(e==="value"){this.options.value=d;this._refreshValue();this._value()===this.options.max&&this._trigger("complete")}a.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var e=this.options.value;if(typeof e!=="number")e=0;return Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*
this._value()/this.options.max},_refreshValue:function(){var e=this.value(),d=this._percentage();if(this.oldValue!==e){this.oldValue=e;this._trigger("change")}this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(d.toFixed(0)+"%");this.element.attr("aria-valuenow",e)}});a.extend(a.ui.progressbar,{version:"1.8.24"})})(jQuery);
(function(a){a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var h=this,e=this.options,d=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),g=e.values&&e.values.length||1,l=[];this._mouseSliding=this._keySliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+
this.orientation+" ui-widget ui-widget-content ui-corner-all"+(e.disabled?" ui-slider-disabled ui-disabled":""));this.range=a([]);if(e.range){if(e.range===true){if(!e.values)e.values=[this._valueMin(),this._valueMin()];if(e.values.length&&e.values.length!==2)e.values=[e.values[0],e.values[0]]}this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(e.range==="min"||e.range==="max"?" ui-slider-range-"+e.range:""))}for(var f=d.length;f<g;f+=1)l.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
this.handles=d.add(a(l.join("")).appendTo(h.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(b){b.preventDefault()}).hover(function(){e.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){if(e.disabled)a(this).blur();else{a(".ui-slider .ui-state-focus").removeClass("ui-state-focus");a(this).addClass("ui-state-focus")}}).blur(function(){a(this).removeClass("ui-state-focus")});this.handles.each(function(b){a(this).data("index.ui-slider-handle",
b)});this.handles.keydown(function(b){var c=a(this).data("index.ui-slider-handle"),k,m,s;if(!h.options.disabled){switch(b.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:b.preventDefault();if(!h._keySliding){h._keySliding=true;a(this).addClass("ui-state-active");k=h._start(b,c);if(k===false)return}}s=h.options.step;k=h.options.values&&h.options.values.length?
m=h.values(c):m=h.value();switch(b.keyCode){case a.ui.keyCode.HOME:m=h._valueMin();break;case a.ui.keyCode.END:m=h._valueMax();break;case a.ui.keyCode.PAGE_UP:m=h._trimAlignValue(k+(h._valueMax()-h._valueMin())/5);break;case a.ui.keyCode.PAGE_DOWN:m=h._trimAlignValue(k-(h._valueMax()-h._valueMin())/5);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(k===h._valueMax())return;m=h._trimAlignValue(k+s);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(k===h._valueMin())return;m=h._trimAlignValue(k-
s)}h._slide(b,c,m)}}).keyup(function(b){var c=a(this).data("index.ui-slider-handle");if(h._keySliding){h._keySliding=false;h._stop(b,c);h._change(b,c);a(this).removeClass("ui-state-active")}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},
_mouseCapture:function(h){var e=this.options,d,g,l,f,b;if(e.disabled)return false;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();d=this._normValueFromMouse({x:h.pageX,y:h.pageY});g=this._valueMax()-this._valueMin()+1;f=this;this.handles.each(function(c){var k=Math.abs(d-f.values(c));if(g>k){g=k;l=a(this);b=c}});if(e.range===true&&this.values(1)===e.min){b+=1;l=a(this.handles[b])}if(this._start(h,b)===false)return false;
this._mouseSliding=true;f._handleIndex=b;l.addClass("ui-state-active").focus();e=l.offset();this._clickOffset=!a(h.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:h.pageX-e.left-l.width()/2,top:h.pageY-e.top-l.height()/2-(parseInt(l.css("borderTopWidth"),10)||0)-(parseInt(l.css("borderBottomWidth"),10)||0)+(parseInt(l.css("marginTop"),10)||0)};this.handles.hasClass("ui-state-hover")||this._slide(h,b,d);return this._animateOff=true},_mouseStart:function(){return true},_mouseDrag:function(h){var e=
this._normValueFromMouse({x:h.pageX,y:h.pageY});this._slide(h,this._handleIndex,e);return false},_mouseStop:function(h){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(h,this._handleIndex);this._change(h,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(h){var e;if(this.orientation==="horizontal"){e=
this.elementSize.width;h=h.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{e=this.elementSize.height;h=h.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}e=h/e;if(e>1)e=1;if(e<0)e=0;if(this.orientation==="vertical")e=1-e;h=this._valueMax()-this._valueMin();return this._trimAlignValue(this._valueMin()+e*h)},_start:function(h,e){var d={handle:this.handles[e],value:this.value()};if(this.options.values&&this.options.values.length){d.value=this.values(e);
d.values=this.values()}return this._trigger("start",h,d)},_slide:function(h,e,d){var g;if(this.options.values&&this.options.values.length){g=this.values(e?0:1);if(this.options.values.length===2&&this.options.range===true&&(e===0&&d>g||e===1&&d<g))d=g;if(d!==this.values(e)){g=this.values();g[e]=d;h=this._trigger("slide",h,{handle:this.handles[e],value:d,values:g});this.values(e?0:1);h!==false&&this.values(e,d,true)}}else if(d!==this.value()){h=this._trigger("slide",h,{handle:this.handles[e],value:d});
h!==false&&this.value(d)}},_stop:function(h,e){var d={handle:this.handles[e],value:this.value()};if(this.options.values&&this.options.values.length){d.value=this.values(e);d.values=this.values()}this._trigger("stop",h,d)},_change:function(h,e){if(!this._keySliding&&!this._mouseSliding){var d={handle:this.handles[e],value:this.value()};if(this.options.values&&this.options.values.length){d.value=this.values(e);d.values=this.values()}this._trigger("change",h,d)}},value:function(h){if(arguments.length){this.options.value=
this._trimAlignValue(h);this._refreshValue();this._change(null,0)}else return this._value()},values:function(h,e){var d,g,l;if(arguments.length>1){this.options.values[h]=this._trimAlignValue(e);this._refreshValue();this._change(null,h)}else if(arguments.length)if(a.isArray(arguments[0])){d=this.options.values;g=arguments[0];for(l=0;l<d.length;l+=1){d[l]=this._trimAlignValue(g[l]);this._change(null,l)}this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(h):
this.value();else return this._values()},_setOption:function(h,e){var d,g=0;if(a.isArray(this.options.values))g=this.options.values.length;a.Widget.prototype._setOption.apply(this,arguments);switch(h){case "disabled":if(e){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.propAttr("disabled",true);this.element.addClass("ui-disabled")}else{this.handles.propAttr("disabled",false);this.element.removeClass("ui-disabled")}break;case "orientation":this._detectOrientation();
this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case "value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case "values":this._animateOff=true;this._refreshValue();for(d=0;d<g;d+=1)this._change(null,d);this._animateOff=false}},_value:function(){var h=this.options.value;return h=this._trimAlignValue(h)},_values:function(h){var e,d;if(arguments.length){e=this.options.values[h];
return e=this._trimAlignValue(e)}else{e=this.options.values.slice();for(d=0;d<e.length;d+=1)e[d]=this._trimAlignValue(e[d]);return e}},_trimAlignValue:function(h){if(h<=this._valueMin())return this._valueMin();if(h>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,d=(h-this._valueMin())%e;h=h-d;if(Math.abs(d)*2>=e)h+=d>0?e:-e;return parseFloat(h.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var h=
this.options.range,e=this.options,d=this,g=!this._animateOff?e.animate:false,l,f={},b,c,k,m;if(this.options.values&&this.options.values.length)this.handles.each(function(s){l=(d.values(s)-d._valueMin())/(d._valueMax()-d._valueMin())*100;f[d.orientation==="horizontal"?"left":"bottom"]=l+"%";a(this).stop(1,1)[g?"animate":"css"](f,e.animate);if(d.options.range===true)if(d.orientation==="horizontal"){if(s===0)d.range.stop(1,1)[g?"animate":"css"]({left:l+"%"},e.animate);if(s===1)d.range[g?"animate":"css"]({width:l-
b+"%"},{queue:false,duration:e.animate})}else{if(s===0)d.range.stop(1,1)[g?"animate":"css"]({bottom:l+"%"},e.animate);if(s===1)d.range[g?"animate":"css"]({height:l-b+"%"},{queue:false,duration:e.animate})}b=l});else{c=this.value();k=this._valueMin();m=this._valueMax();l=m!==k?(c-k)/(m-k)*100:0;f[d.orientation==="horizontal"?"left":"bottom"]=l+"%";this.handle.stop(1,1)[g?"animate":"css"](f,e.animate);if(h==="min"&&this.orientation==="horizontal")this.range.stop(1,1)[g?"animate":"css"]({width:l+"%"},
e.animate);if(h==="max"&&this.orientation==="horizontal")this.range[g?"animate":"css"]({width:100-l+"%"},{queue:false,duration:e.animate});if(h==="min"&&this.orientation==="vertical")this.range.stop(1,1)[g?"animate":"css"]({height:l+"%"},e.animate);if(h==="max"&&this.orientation==="vertical")this.range[g?"animate":"css"]({height:100-l+"%"},{queue:false,duration:e.animate})}}});a.extend(a.ui.slider,{version:"1.8.24"})})(jQuery);
(function(a,h){var e=0,d=0;a.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:false,cookie:null,collapsible:false,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(true)},_setOption:function(g,l){if(g=="selected")this.options.collapsible&&l==this.options.selected||
this.select(l);else{this.options[g]=l;this._tabify()}},_tabId:function(g){return g.title&&g.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+ ++e},_sanitizeSelector:function(g){return g.replace(/:/g,"\\:")},_cookie:function(){var g=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++d);return a.cookie.apply(null,[g].concat(a.makeArray(arguments)))},_ui:function(g,l){return{tab:g,panel:l,index:this.anchors.index(g)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var g=
a(this);g.html(g.data("label.tabs")).removeData("label.tabs")})},_tabify:function(g){function l(E,I){E.css("display","");!a.support.opacity&&I.opacity&&E[0].style.removeAttribute("filter")}var f=this,b=this.options,c=/^#.+/;this.list=this.element.find("ol,ul").eq(0);this.lis=a(" > li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return a("a",this)[0]});this.panels=a([]);this.anchors.each(function(E,I){var Q=a(I).attr("href"),O=Q.split("#")[0],N;if(O&&(O===location.toString().split("#")[0]||
(N=a("base")[0])&&O===N.href)){Q=I.hash;I.href=Q}if(c.test(Q))f.panels=f.panels.add(f.element.find(f._sanitizeSelector(Q)));else if(Q&&Q!=="#"){a.data(I,"href.tabs",Q);a.data(I,"load.tabs",Q.replace(/#.*$/,""));Q=f._tabId(I);I.href="#"+Q;O=f.element.find("#"+Q);if(!O.length){O=a(b.panelTemplate).attr("id",Q).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(f.panels[E-1]||f.list);O.data("destroy.tabs",true)}f.panels=f.panels.add(O)}else b.disabled.push(E)});if(g){this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all");
this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.lis.addClass("ui-state-default ui-corner-top");this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom");if(b.selected===h){location.hash&&this.anchors.each(function(E,I){if(I.hash==location.hash){b.selected=E;return false}});if(typeof b.selected!=="number"&&b.cookie)b.selected=parseInt(f._cookie(),10);if(typeof b.selected!=="number"&&this.lis.filter(".ui-tabs-selected").length)b.selected=
this.lis.index(this.lis.filter(".ui-tabs-selected"));b.selected=b.selected||(this.lis.length?0:-1)}else if(b.selected===null)b.selected=-1;b.selected=b.selected>=0&&this.anchors[b.selected]||b.selected<0?b.selected:0;b.disabled=a.unique(b.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(E){return f.lis.index(E)}))).sort();a.inArray(b.selected,b.disabled)!=-1&&b.disabled.splice(a.inArray(b.selected,b.disabled),1);this.panels.addClass("ui-tabs-hide");this.lis.removeClass("ui-tabs-selected ui-state-active");
if(b.selected>=0&&this.anchors.length){f.element.find(f._sanitizeSelector(f.anchors[b.selected].hash)).removeClass("ui-tabs-hide");this.lis.eq(b.selected).addClass("ui-tabs-selected ui-state-active");f.element.queue("tabs",function(){f._trigger("show",null,f._ui(f.anchors[b.selected],f.element.find(f._sanitizeSelector(f.anchors[b.selected].hash))[0]))});this.load(b.selected)}a(window).bind("unload",function(){f.lis.add(f.anchors).unbind(".tabs");f.lis=f.anchors=f.panels=null})}else b.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"));
this.element[b.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");b.cookie&&this._cookie(b.selected,b.cookie);g=0;for(var k;k=this.lis[g];g++)a(k)[a.inArray(g,b.disabled)!=-1&&!a(k).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");b.cache===false&&this.anchors.removeData("cache.tabs");this.lis.add(this.anchors).unbind(".tabs");if(b.event!=="mouseover"){var m=function(E,I){I.is(":not(.ui-state-disabled)")&&I.addClass("ui-state-"+E)};this.lis.bind("mouseover.tabs",
function(){m("hover",a(this))});this.lis.bind("mouseout.tabs",function(){a(this).removeClass("ui-state-hover")});this.anchors.bind("focus.tabs",function(){m("focus",a(this).closest("li"))});this.anchors.bind("blur.tabs",function(){a(this).closest("li").removeClass("ui-state-focus")})}var s,n;if(b.fx)if(a.isArray(b.fx)){s=b.fx[0];n=b.fx[1]}else s=n=b.fx;var B=n?function(E,I){a(E).closest("li").addClass("ui-tabs-selected ui-state-active");I.hide().removeClass("ui-tabs-hide").animate(n,n.duration||"normal",
function(){l(I,n);f._trigger("show",null,f._ui(E,I[0]))})}:function(E,I){a(E).closest("li").addClass("ui-tabs-selected ui-state-active");I.removeClass("ui-tabs-hide");f._trigger("show",null,f._ui(E,I[0]))},D=s?function(E,I){I.animate(s,s.duration||"normal",function(){f.lis.removeClass("ui-tabs-selected ui-state-active");I.addClass("ui-tabs-hide");l(I,s);f.element.dequeue("tabs")})}:function(E,I){f.lis.removeClass("ui-tabs-selected ui-state-active");I.addClass("ui-tabs-hide");f.element.dequeue("tabs")};
this.anchors.bind(b.event+".tabs",function(){var E=this,I=a(E).closest("li"),Q=f.panels.filter(":not(.ui-tabs-hide)"),O=f.element.find(f._sanitizeSelector(E.hash));if(I.hasClass("ui-tabs-selected")&&!b.collapsible||I.hasClass("ui-state-disabled")||I.hasClass("ui-state-processing")||f.panels.filter(":animated").length||f._trigger("select",null,f._ui(this,O[0]))===false){this.blur();return false}b.selected=f.anchors.index(this);f.abort();if(b.collapsible)if(I.hasClass("ui-tabs-selected")){b.selected=
-1;b.cookie&&f._cookie(b.selected,b.cookie);f.element.queue("tabs",function(){D(E,Q)}).dequeue("tabs");this.blur();return false}else if(!Q.length){b.cookie&&f._cookie(b.selected,b.cookie);f.element.queue("tabs",function(){B(E,O)});f.load(f.anchors.index(this));this.blur();return false}b.cookie&&f._cookie(b.selected,b.cookie);if(O.length){Q.length&&f.element.queue("tabs",function(){D(E,Q)});f.element.queue("tabs",function(){B(E,O)});f.load(f.anchors.index(this))}else throw"jQuery UI Tabs: Mismatching fragment identifier.";
a.browser.msie&&this.blur()});this.anchors.bind("click.tabs",function(){return false})},_getIndex:function(g){if(typeof g=="string")g=this.anchors.index(this.anchors.filter("[href$='"+g+"']"));return g},destroy:function(){var g=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var l=
a.data(this,"href.tabs");if(l)this.href=l;var f=a(this).unbind(".tabs");a.each(["href","load","cache"],function(b,c){f.removeData(c+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){a.data(this,"destroy.tabs")?a(this).remove():a(this).removeClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-hover ui-state-focus ui-state-disabled ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide")});g.cookie&&this._cookie(null,g.cookie);return this},add:function(g,
l,f){if(f===h)f=this.anchors.length;var b=this,c=this.options;l=a(c.tabTemplate.replace(/#\{href\}/g,g).replace(/#\{label\}/g,l));g=!g.indexOf("#")?g.replace("#",""):this._tabId(a("a",l)[0]);l.addClass("ui-state-default ui-corner-top").data("destroy.tabs",true);var k=b.element.find("#"+g);k.length||(k=a(c.panelTemplate).attr("id",g).data("destroy.tabs",true));k.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");if(f>=this.lis.length){l.appendTo(this.list);k.appendTo(this.list[0].parentNode)}else{l.insertBefore(this.lis[f]);
k.insertBefore(this.panels[f])}c.disabled=a.map(c.disabled,function(m){return m>=f?++m:m});this._tabify();if(this.anchors.length==1){c.selected=0;l.addClass("ui-tabs-selected ui-state-active");k.removeClass("ui-tabs-hide");this.element.queue("tabs",function(){b._trigger("show",null,b._ui(b.anchors[0],b.panels[0]))});this.load(0)}this._trigger("add",null,this._ui(this.anchors[f],this.panels[f]));return this},remove:function(g){g=this._getIndex(g);var l=this.options,f=this.lis.eq(g).remove(),b=this.panels.eq(g).remove();
if(f.hasClass("ui-tabs-selected")&&this.anchors.length>1)this.select(g+(g+1<this.anchors.length?1:-1));l.disabled=a.map(a.grep(l.disabled,function(c){return c!=g}),function(c){return c>=g?--c:c});this._tabify();this._trigger("remove",null,this._ui(f.find("a")[0],b[0]));return this},enable:function(g){g=this._getIndex(g);var l=this.options;if(a.inArray(g,l.disabled)!=-1){this.lis.eq(g).removeClass("ui-state-disabled");l.disabled=a.grep(l.disabled,function(f){return f!=g});this._trigger("enable",null,
this._ui(this.anchors[g],this.panels[g]));return this}},disable:function(g){g=this._getIndex(g);var l=this.options;if(g!=l.selected){this.lis.eq(g).addClass("ui-state-disabled");l.disabled.push(g);l.disabled.sort();this._trigger("disable",null,this._ui(this.anchors[g],this.panels[g]))}return this},select:function(g){g=this._getIndex(g);if(g==-1)if(this.options.collapsible&&this.options.selected!=-1)g=this.options.selected;else return this;this.anchors.eq(g).trigger(this.options.event+".tabs");return this},
load:function(g){g=this._getIndex(g);var l=this,f=this.options,b=this.anchors.eq(g)[0],c=a.data(b,"load.tabs");this.abort();if(!c||this.element.queue("tabs").length!==0&&a.data(b,"cache.tabs"))this.element.dequeue("tabs");else{this.lis.eq(g).addClass("ui-state-processing");if(f.spinner){var k=a("span",b);k.data("label.tabs",k.html()).html(f.spinner)}this.xhr=a.ajax(a.extend({},f.ajaxOptions,{url:c,success:function(m,s){l.element.find(l._sanitizeSelector(b.hash)).html(m);l._cleanup();f.cache&&a.data(b,
"cache.tabs",true);l._trigger("load",null,l._ui(l.anchors[g],l.panels[g]));try{f.ajaxOptions.success(m,s)}catch(n){}},error:function(m,s){l._cleanup();l._trigger("load",null,l._ui(l.anchors[g],l.panels[g]));try{f.ajaxOptions.error(m,s,g,b)}catch(n){}}}));l.element.dequeue("tabs");return this}},abort:function(){this.element.queue([]);this.panels.stop(false,true);this.element.queue("tabs",this.element.queue("tabs").splice(-2,2));if(this.xhr){this.xhr.abort();delete this.xhr}this._cleanup();return this},
url:function(g,l){this.anchors.eq(g).removeData("cache.tabs").data("load.tabs",l);return this},length:function(){return this.anchors.length}});a.extend(a.ui.tabs,{version:"1.8.24"});a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(g,l){var f=this,b=this.options,c=f._rotate||(f._rotate=function(m){clearTimeout(f.rotation);f.rotation=setTimeout(function(){var s=b.selected;f.select(++s<f.anchors.length?s:0)},g);m&&m.stopPropagation()}),k=f._unrotate||(f._unrotate=!l?function(m){m.clientX&&
f.rotate(null)}:function(){c()});if(g){this.element.bind("tabsshow",c);this.anchors.bind(b.event+".tabs",k);c()}else{clearTimeout(f.rotation);this.element.unbind("tabsshow",c);this.anchors.unbind(b.event+".tabs",k);delete this._rotate;delete this._unrotate}return this}})})(jQuery);(function(a){Math.precision=function(f,b){if(b===undefined)b=0;return Math.round(f*Math.pow(10,b))/Math.pow(10,b)};var h=function(f,b){var c=this,k=f.find("img:first"),m=0,s=100,n=100,B=0,D=100,E=100,I=0,Q=0,O,N,aa=[],ga=function(V){for(var Y=0;Y<aa.length;Y++)aa[Y].call(c,c,V)},T=function(V){var Y=f.offset();O={l:Y.left|0,t:Y.top|0};clearTimeout(N);N=setTimeout(function(){ua.call(c,V)},0);a(document).bind("mousemove",U).bind("mouseup",ba);V.preventDefault()},U=function(V){clearTimeout(N);N=setTimeout(function(){ua.call(c,
V)},0);V.stopPropagation();V.preventDefault();return false},ba=function(V){a(document).unbind("mouseup",ba).unbind("mousemove",U);V.stopPropagation();V.preventDefault();return false},ua=function(V){var Y=V.pageX-O.l;V=V.pageY-O.t;var oa=f.w,pa=f.h;if(Y<0)Y=0;else if(Y>oa)Y=oa;if(V<0)V=0;else if(V>pa)V=pa;ia.call(c,"xy",{x:Y/oa*n+m,y:V/pa*E+B})},ia=function(V,Y,oa){if(Y===undefined){if(V===undefined||V==null)V="xy";switch(V.toLowerCase()){case "x":return I;case "y":return Q;default:return{x:I,y:Q}}}if(!(oa!=
null&&oa==c)){var pa=false,ma,ka;if(V==null)V="xy";switch(V.toLowerCase()){case "x":ma=Y&&(Y.x&&Y.x|0||Y|0)||0;break;case "y":ka=Y&&(Y.y&&Y.y|0||Y|0)||0;break;default:ma=Y&&Y.x&&Y.x|0||0;ka=Y&&Y.y&&Y.y|0||0}if(ma!=null){if(ma<m)ma=m;else if(ma>s)ma=s;if(I!=ma){I=ma;pa=true}}if(ka!=null){if(ka<B)ka=B;else if(ka>D)ka=D;if(Q!=ka){Q=ka;pa=true}}pa&&ga.call(c,oa||c)}},ca=function(V){a.isFunction(V)&&aa.push(V)};a.extend(true,c,{val:ia,range:function(V,Y){if(Y===undefined){if(V===undefined||V==null)V="all";
switch(V.toLowerCase()){case "minx":return m;case "maxx":return s;case "rangex":return{minX:m,maxX:s,rangeX:n};case "miny":return B;case "maxy":return D;case "rangey":return{minY:B,maxY:D,rangeY:E};default:return{minX:m,maxX:s,rangeX:n,minY:B,maxY:D,rangeY:E}}}var oa,pa,ma,ka;if(V==null)V="all";switch(V.toLowerCase()){case "minx":oa=Y&&(Y.minX&&Y.minX|0||Y|0)||0;break;case "maxx":pa=Y&&(Y.maxX&&Y.maxX|0||Y|0)||0;break;case "rangex":oa=Y&&Y.minX&&Y.minX|0||0;pa=Y&&Y.maxX&&Y.maxX|0||0;break;case "miny":ma=
Y&&(Y.minY&&Y.minY|0||Y|0)||0;break;case "maxy":ka=Y&&(Y.maxY&&Y.maxY|0||Y|0)||0;break;case "rangey":ma=Y&&Y.minY&&Y.minY|0||0;ka=Y&&Y.maxY&&Y.maxY|0||0;break;default:oa=Y&&Y.minX&&Y.minX|0||0;pa=Y&&Y.maxX&&Y.maxX|0||0;ma=Y&&Y.minY&&Y.minY|0||0;ka=Y&&Y.maxY&&Y.maxY|0||0}if(oa!=null&&m!=oa){m=oa;n=s-m}if(pa!=null&&s!=pa){s=pa;n=s-m}if(ma!=null&&B!=ma){B=ma;E=D-B}if(ka!=null&&D!=ka){D=ka;E=D-B}},bind:ca,unbind:function(V){if(a.isFunction(V))for(var Y;(Y=a.inArray(V,aa))!=-1;)aa.splice(Y,1)},destroy:function(){a(document).unbind("mouseup",
ba).unbind("mousemove",U);f.unbind("mousedown",T);aa=k=f=null}});k.src=b.arrow&&b.arrow.image;k.w=b.arrow&&b.arrow.width||k.width();k.h=b.arrow&&b.arrow.height||k.height();f.w=b.map&&b.map.width||f.width();f.h=b.map&&b.map.height||f.height();f.bind("mousedown",T);ca.call(c,function(){var V=0,Y=0,oa=f.w,pa=f.h,ma=k.w,ka=k.h;setTimeout(function(){if(n>0)V=I==s?oa:I/n*oa|0;if(E>0)Y=Q==D?pa:Q/E*pa|0;if(ma>=oa)V=(oa>>1)-(ma>>1);else V-=ma>>1;if(ka>=pa)Y=(pa>>1)-(ka>>1);else Y-=ka>>1;k.css({left:V+"px",
top:Y+"px"})},0)})},e=function(f,b,c,k){var m=this;f=f.find("td.Text input");var s=f.eq(3),n=f.eq(4),B=f.eq(5),D=f.length>7?f.eq(6):null,E=f.eq(0),I=f.eq(1),Q=f.eq(2),O=f.eq(f.length>7?7:6),N=f.length>7?f.eq(8):null,aa=function(ia){if(!(ia.target.value==""&&ia.target!=O.get(0)&&(c!=null&&ia.target!=c.get(0)||c==null))){if(!U(ia))return ia;switch(ia.target){case s.get(0):switch(ia.keyCode){case 38:s.val(ba.call(m,(s.val()<<0)+1,0,255));b.val("r",s.val(),ia.target);return false;case 40:s.val(ba.call(m,
(s.val()<<0)-1,0,255));b.val("r",s.val(),ia.target);return false}break;case n.get(0):switch(ia.keyCode){case 38:n.val(ba.call(m,(n.val()<<0)+1,0,255));b.val("g",n.val(),ia.target);return false;case 40:n.val(ba.call(m,(n.val()<<0)-1,0,255));b.val("g",n.val(),ia.target);return false}break;case B.get(0):switch(ia.keyCode){case 38:B.val(ba.call(m,(B.val()<<0)+1,0,255));b.val("b",B.val(),ia.target);return false;case 40:B.val(ba.call(m,(B.val()<<0)-1,0,255));b.val("b",B.val(),ia.target);return false}break;
case D&&D.get(0):switch(ia.keyCode){case 38:D.val(ba.call(m,parseFloat(D.val())+1,0,100));b.val("a",Math.precision(D.val()*255/100,k),ia.target);return false;case 40:D.val(ba.call(m,parseFloat(D.val())-1,0,100));b.val("a",Math.precision(D.val()*255/100,k),ia.target);return false}break;case E.get(0):switch(ia.keyCode){case 38:E.val(ba.call(m,(E.val()<<0)+1,0,360));b.val("h",E.val(),ia.target);return false;case 40:E.val(ba.call(m,(E.val()<<0)-1,0,360));b.val("h",E.val(),ia.target);return false}break;
case I.get(0):switch(ia.keyCode){case 38:I.val(ba.call(m,(I.val()<<0)+1,0,100));b.val("s",I.val(),ia.target);return false;case 40:I.val(ba.call(m,(I.val()<<0)-1,0,100));b.val("s",I.val(),ia.target);return false}break;case Q.get(0):switch(ia.keyCode){case 38:Q.val(ba.call(m,(Q.val()<<0)+1,0,100));b.val("v",Q.val(),ia.target);return false;case 40:Q.val(ba.call(m,(Q.val()<<0)-1,0,100));b.val("v",Q.val(),ia.target);return false}}}},ga=function(ia){if(!(ia.target.value==""&&ia.target!=O.get(0)&&(c!=null&&
ia.target!=c.get(0)||c==null))){if(!U(ia))return ia;switch(ia.target){case s.get(0):s.val(ba.call(m,s.val(),0,255));b.val("r",s.val(),ia.target);break;case n.get(0):n.val(ba.call(m,n.val(),0,255));b.val("g",n.val(),ia.target);break;case B.get(0):B.val(ba.call(m,B.val(),0,255));b.val("b",B.val(),ia.target);break;case D&&D.get(0):D.val(ba.call(m,D.val(),0,100));b.val("a",Math.precision(D.val()*255/100,k),ia.target);break;case E.get(0):E.val(ba.call(m,E.val(),0,360));b.val("h",E.val(),ia.target);break;
case I.get(0):I.val(ba.call(m,I.val(),0,100));b.val("s",I.val(),ia.target);break;case Q.get(0):Q.val(ba.call(m,Q.val(),0,100));b.val("v",Q.val(),ia.target);break;case O.get(0):O.val(O.val().replace(/[^a-fA-F0-9]/g,"").toLowerCase().substring(0,6));c&&c.val(O.val());b.val("hex",O.val()!=""?O.val():null,ia.target);break;case c&&c.get(0):c.val(c.val().replace(/[^a-fA-F0-9]/g,"").toLowerCase().substring(0,6));O.val(c.val());b.val("hex",c.val()!=""?c.val():null,ia.target);break;case N&&N.get(0):N.val(N.val().replace(/[^a-fA-F0-9]/g,
"").toLowerCase().substring(0,2));b.val("a",N.val()!=null?parseInt(N.val(),16):null,ia.target)}}},T=function(ia){if(b.val()!=null)switch(ia.target){case s.get(0):s.val(b.val("r"));break;case n.get(0):n.val(b.val("g"));break;case B.get(0):B.val(b.val("b"));break;case D&&D.get(0):D.val(Math.precision(b.val("a")*100/255,k));break;case E.get(0):E.val(b.val("h"));break;case I.get(0):I.val(b.val("s"));break;case Q.get(0):Q.val(b.val("v"));break;case O.get(0):case c&&c.get(0):O.val(b.val("hex"));c&&c.val(b.val("hex"));
break;case N&&N.get(0):N.val(b.val("ahex").substring(6))}},U=function(ia){switch(ia.keyCode){case 9:case 16:case 29:case 37:case 39:return false;case "c".charCodeAt():case "v".charCodeAt():if(ia.ctrlKey)return false}return true},ba=function(ia,ca,V){if(ia==""||isNaN(ia))return ca;if(ia>V)return V;if(ia<ca)return ca;return ia},ua=function(ia,ca){var V=ia.val("all");if(ca!=s.get(0))s.val(V!=null?V.r:"");if(ca!=n.get(0))n.val(V!=null?V.g:"");if(ca!=B.get(0))B.val(V!=null?V.b:"");if(D&&ca!=D.get(0))D.val(V!=
null?Math.precision(V.a*100/255,k):"");if(ca!=E.get(0))E.val(V!=null?V.h:"");if(ca!=I.get(0))I.val(V!=null?V.s:"");if(ca!=Q.get(0))Q.val(V!=null?V.v:"");if(ca!=O.get(0)&&(c&&ca!=c.get(0)||!c))O.val(V!=null?V.hex:"");if(c&&ca!=c.get(0)&&ca!=O.get(0))c.val(V!=null?V.hex:"");if(N&&ca!=N.get(0))N.val(V!=null?V.ahex.substring(6):"")};a.extend(true,m,{destroy:function(){s.add(n).add(B).add(D).add(E).add(I).add(Q).add(O).add(c).add(N).unbind("keyup",ga).unbind("blur",T);s.add(n).add(B).add(D).add(E).add(I).add(Q).unbind("keydown",
aa);b.unbind(ua);N=O=Q=I=E=D=B=n=s=null}});s.add(n).add(B).add(D).add(E).add(I).add(Q).add(O).add(c).add(N).bind("keyup",ga).bind("blur",T);s.add(n).add(B).add(D).add(E).add(I).add(Q).bind("keydown",aa);b.bind(ua)};a.jPicker={List:[],Color:function(f){var b=this,c,k,m,s,n,B,D,E=[],I=function(O){for(var N=0;N<E.length;N++)E[N].call(b,b,O)},Q=function(O,N,aa){if(N===undefined){if(O===undefined||O==null||O=="")O="all";if(c==null)return null;switch(O.toLowerCase()){case "ahex":return l.rgbaToHex({r:c,
g:k,b:m,a:s});case "hex":return Q("ahex").substring(0,6);case "all":return{r:c,g:k,b:m,a:s,h:n,s:B,v:D,hex:Q.call(b,"hex"),ahex:Q.call(b,"ahex")};default:N={};for(var ga=0;ga<O.length;ga++)switch(O.charAt(ga)){case "r":if(O.length==1)N=c;else N.r=c;break;case "g":if(O.length==1)N=k;else N.g=k;break;case "b":if(O.length==1)N=m;else N.b=m;break;case "a":if(O.length==1)N=s;else N.a=s;break;case "h":if(O.length==1)N=n;else N.h=n;break;case "s":if(O.length==1)N=B;else N.s=B;break;case "v":if(O.length==
1)N=D;else N.v=D}return N=={}?Q.call(b,"all"):N}}if(!(aa!=null&&aa==b)){var T=false;if(O==null)O="";if(N==null){if(c!=null){c=null;T=true}if(k!=null){k=null;T=true}if(m!=null){m=null;T=true}if(s!=null){s=null;T=true}if(n!=null){n=null;T=true}if(B!=null){B=null;T=true}if(D!=null){D=null;T=true}T&&I.call(b,aa||b)}else switch(O.toLowerCase()){case "ahex":case "hex":N=l.hexToRgba(N&&(N.ahex||N.hex)||N||"00000000");Q.call(b,"rgba",{r:N.r,g:N.g,b:N.b,a:O=="ahex"?N.a:s!=null?s:255},aa);break;default:if(N&&
(N.ahex!=null||N.hex!=null)){Q.call(b,"ahex",N.ahex||N.hex||"00000000",aa);break}var U={},ba=false,ua=false;if(N.r!==undefined&&!O.indexOf("r")==-1)O+="r";if(N.g!==undefined&&!O.indexOf("g")==-1)O+="g";if(N.b!==undefined&&!O.indexOf("b")==-1)O+="b";if(N.a!==undefined&&!O.indexOf("a")==-1)O+="a";if(N.h!==undefined&&!O.indexOf("h")==-1)O+="h";if(N.s!==undefined&&!O.indexOf("s")==-1)O+="s";if(N.v!==undefined&&!O.indexOf("v")==-1)O+="v";for(ga=0;ga<O.length;ga++)switch(O.charAt(ga)){case "r":if(ua)continue;
ba=true;U.r=N&&N.r&&N.r|0||N&&N|0||0;if(U.r<0)U.r=0;else if(U.r>255)U.r=255;if(c!=U.r){c=U.r;T=true}break;case "g":if(ua)continue;ba=true;U.g=N&&N.g&&N.g|0||N&&N|0||0;if(U.g<0)U.g=0;else if(U.g>255)U.g=255;if(k!=U.g){k=U.g;T=true}break;case "b":if(ua)continue;ba=true;U.b=N&&N.b&&N.b|0||N&&N|0||0;if(U.b<0)U.b=0;else if(U.b>255)U.b=255;if(m!=U.b){m=U.b;T=true}break;case "a":U.a=N&&N.a!=null?N.a|0:N!=null?N|0:255;if(U.a<0)U.a=0;else if(U.a>255)U.a=255;if(s!=U.a){s=U.a;T=true}break;case "h":if(ba)continue;
ua=true;U.h=N&&N.h&&N.h|0||N&&N|0||0;if(U.h<0)U.h=0;else if(U.h>360)U.h=360;if(n!=U.h){n=U.h;T=true}break;case "s":if(ba)continue;ua=true;U.s=N&&N.s!=null?N.s|0:N!=null?N|0:100;if(U.s<0)U.s=0;else if(U.s>100)U.s=100;if(B!=U.s){B=U.s;T=true}break;case "v":if(ba)continue;ua=true;U.v=N&&N.v!=null?N.v|0:N!=null?N|0:100;if(U.v<0)U.v=0;else if(U.v>100)U.v=100;if(D!=U.v){D=U.v;T=true}}if(T){if(ba){c=c||0;k=k||0;m=m||0;N=l.rgbToHsv({r:c,g:k,b:m});n=N.h;B=N.s;D=N.v}else if(ua){n=n||0;B=B!=null?B:100;D=D!=
null?D:100;N=l.hsvToRgb({h:n,s:B,v:D});c=N.r;k=N.g;m=N.b}s=s!=null?s:255;I.call(b,aa||b)}}}};a.extend(true,b,{val:Q,bind:function(O){a.isFunction(O)&&E.push(O)},unbind:function(O){if(a.isFunction(O))for(var N;(N=a.inArray(O,E))!=-1;)E.splice(N,1)},destroy:function(){E=null}});if(f)if(f.ahex!=null)Q("ahex",f);else if(f.hex!=null)Q((f.a!=null?"a":"")+"hex",f.a!=null?{ahex:f.hex+l.intToHex(f.a)}:f);else if(f.r!=null&&f.g!=null&&f.b!=null)Q("rgb"+(f.a!=null?"a":""),f);else if(f.h!=null&&f.s!=null&&f.v!=
null)Q("hsv"+(f.a!=null?"a":""),f)},ColorMethods:{hexToRgba:function(f){f=this.validateHex(f);if(f=="")return{r:null,g:null,b:null,a:null};var b="00",c="00",k="00",m="255";if(f.length==6)f+="ff";if(f.length>6){b=f.substring(0,2);c=f.substring(2,4);k=f.substring(4,6);m=f.substring(6,f.length)}else{if(f.length>4){b=f.substring(4,f.length);f=f.substring(0,4)}if(f.length>2){c=f.substring(2,f.length);f=f.substring(0,2)}if(f.length>0)k=f.substring(0,f.length)}return{r:this.hexToInt(b),g:this.hexToInt(c),
b:this.hexToInt(k),a:this.hexToInt(m)}},validateHex:function(f){if(typeof f=="object")return"";f=f.toLowerCase().replace(/[^a-f0-9]/g,"");if(f.length>8)f=f.substring(0,8);return f},rgbaToHex:function(f){return this.intToHex(f.r)+this.intToHex(f.g)+this.intToHex(f.b)+this.intToHex(f.a)},intToHex:function(f){f=(f|0).toString(16);if(f.length==1)f="0"+f;return f.toLowerCase()},hexToInt:function(f){return parseInt(f,16)},rgbToHsv:function(f){var b=f.r/255,c=f.g/255;f=f.b/255;var k={h:0,s:0,v:0},m=0,s=
0;if(b>=c&&b>=f){s=b;m=c>f?f:c}else if(c>=f&&c>=b){s=c;m=b>f?f:b}else{s=f;m=c>b?b:c}k.v=s;k.s=s?(s-m)/s:0;if(k.s){m=s-m;k.h=b==s?(c-f)/m:c==s?2+(f-b)/m:4+(b-c)/m;k.h=parseInt(k.h*60);if(k.h<0)k.h+=360}else k.h=0;k.s=k.s*100|0;k.v=k.v*100|0;return k},hsvToRgb:function(f){var b={r:0,g:0,b:0,a:100},c=f.h,k=f.s;f=f.v;if(k==0)b.r=f==0?b.g=b.b=0:b.g=b.b=f*255/100|0;else{if(c==360)c=0;c/=60;k/=100;f/=100;var m=c|0,s=c-m;c=f*(1-k);var n=f*(1-k*s);k=f*(1-k*(1-s));switch(m){case 0:b.r=f;b.g=k;b.b=c;break;case 1:b.r=
n;b.g=f;b.b=c;break;case 2:b.r=c;b.g=f;b.b=k;break;case 3:b.r=c;b.g=n;b.b=f;break;case 4:b.r=k;b.g=c;b.b=f;break;case 5:b.r=f;b.g=c;b.b=n}b.r=b.r*255|0;b.g=b.g*255|0;b.b=b.b*255|0}return b}}};var d=a.jPicker.Color,g=a.jPicker.List,l=a.jPicker.ColorMethods;a.fn.jPicker=function(f){var b=arguments;return this.each(function(){var c=this,k=a.extend(true,{},a.fn.jPicker.defaults,f);if(a(c).get(0).nodeName.toLowerCase()=="input"){a.extend(true,k,{window:{bindToInput:true,expandable:true,input:a(c)}});if(a(c).val()==
""){k.color.active=new d({hex:null});k.color.current=new d({hex:null})}else if(l.validateHex(a(c).val())){k.color.active=new d({hex:a(c).val(),a:k.color.active.val("a")});k.color.current=new d({hex:a(c).val(),a:k.color.active.val("a")})}}if(k.window.expandable)a(c).after('<span class="jPicker"><span class="Icon"><span class="Color">&nbsp;</span><span class="Alpha">&nbsp;</span><span class="Image" title="Click To Open Color Picker">&nbsp;</span><span class="Container">&nbsp;</span></span></span>');
else k.window.liveUpdate=false;var m=parseFloat(navigator.appVersion.split("MSIE")[1])<7&&document.body.filters,s=null,n=null,B=null,D=null,E=null,I=null,Q=null,O=null,N=null,aa=null,ga=null,T=null,U=null,ba=null,ua=null,ia=null,ca=null,V=null,Y=null,oa=null,pa=null,ma=null,ka=null,Ba=null,ra=null,Ca=null,ya=null,qa=null,Ka=function(P){var S=na.active,fa=S.val("hex"),Ha,Oa;k.color.mode=P;switch(P){case "h":setTimeout(function(){Ta.call(c,n,"transparent");Ia.call(c,D,0);za.call(c,D,100);Ia.call(c,
E,260);za.call(c,E,100);Ta.call(c,B,"transparent");Ia.call(c,Q,0);za.call(c,Q,100);Ia.call(c,O,260);za.call(c,O,100);Ia.call(c,N,260);za.call(c,N,100);Ia.call(c,aa,260);za.call(c,aa,100);Ia.call(c,T,260);za.call(c,T,100)},0);U.range("all",{minX:0,maxX:100,minY:0,maxY:100});ba.range("rangeY",{minY:0,maxY:360});if(S.val("ahex")==null)break;U.val("xy",{x:S.val("s"),y:100-S.val("v")},U);ba.val("y",360-S.val("h"),ba);break;case "s":setTimeout(function(){Ta.call(c,n,"transparent");Ia.call(c,D,-260);Ia.call(c,
E,-520);Ia.call(c,Q,-260);Ia.call(c,O,-520);Ia.call(c,T,260);za.call(c,T,100)},0);U.range("all",{minX:0,maxX:360,minY:0,maxY:100});ba.range("rangeY",{minY:0,maxY:100});if(S.val("ahex")==null)break;U.val("xy",{x:S.val("h"),y:100-S.val("v")},U);ba.val("y",100-S.val("s"),ba);break;case "v":setTimeout(function(){Ta.call(c,n,"000000");Ia.call(c,D,-780);Ia.call(c,E,260);Ta.call(c,B,fa);Ia.call(c,Q,-520);Ia.call(c,O,260);za.call(c,O,100);Ia.call(c,T,260);za.call(c,T,100)},0);U.range("all",{minX:0,maxX:360,
minY:0,maxY:100});ba.range("rangeY",{minY:0,maxY:100});if(S.val("ahex")==null)break;U.val("xy",{x:S.val("h"),y:100-S.val("s")},U);ba.val("y",100-S.val("v"),ba);break;case "r":Ha=-1040;Oa=-780;U.range("all",{minX:0,maxX:255,minY:0,maxY:255});ba.range("rangeY",{minY:0,maxY:255});if(S.val("ahex")==null)break;U.val("xy",{x:S.val("b"),y:255-S.val("g")},U);ba.val("y",255-S.val("r"),ba);break;case "g":Ha=-1560;Oa=-1820;U.range("all",{minX:0,maxX:255,minY:0,maxY:255});ba.range("rangeY",{minY:0,maxY:255});
if(S.val("ahex")==null)break;U.val("xy",{x:S.val("b"),y:255-S.val("r")},U);ba.val("y",255-S.val("g"),ba);break;case "b":Ha=-2080;Oa=-2860;U.range("all",{minX:0,maxX:255,minY:0,maxY:255});ba.range("rangeY",{minY:0,maxY:255});if(S.val("ahex")==null)break;U.val("xy",{x:S.val("r"),y:255-S.val("g")},U);ba.val("y",255-S.val("b"),ba);break;case "a":setTimeout(function(){Ta.call(c,n,"transparent");Ia.call(c,D,-260);Ia.call(c,E,-520);Ia.call(c,Q,260);Ia.call(c,O,260);za.call(c,O,100);Ia.call(c,T,0);za.call(c,
T,100)},0);U.range("all",{minX:0,maxX:360,minY:0,maxY:100});ba.range("rangeY",{minY:0,maxY:255});if(S.val("ahex")==null)break;U.val("xy",{x:S.val("h"),y:100-S.val("v")},U);ba.val("y",255-S.val("a"),ba);break;default:throw"Invalid Mode";}switch(P){case "s":case "v":case "a":setTimeout(function(){za.call(c,D,100);za.call(c,Q,100);Ia.call(c,N,260);za.call(c,N,100);Ia.call(c,aa,260);za.call(c,aa,100)},0);break;case "r":case "g":case "b":setTimeout(function(){Ta.call(c,n,"transparent");Ta.call(c,B,"transparent");
za.call(c,Q,100);za.call(c,D,100);Ia.call(c,D,Ha);Ia.call(c,E,Ha-260);Ia.call(c,Q,Oa-780);Ia.call(c,O,Oa-520);Ia.call(c,N,Oa);Ia.call(c,aa,Oa-260);Ia.call(c,T,260);za.call(c,T,100)},0)}S.val("ahex")!=null&&Da.call(c,S)},Da=function(P,S){if(S==null||S!=ba&&S!=U)va.call(c,P,S);setTimeout(function(){kb.call(c,P);vb.call(c,P);cb.call(c,P)},0)},xa=function(P,S){var fa=na.active;if(!(S!=U&&fa.val()==null)){var Ha=P.val("all");switch(k.color.mode){case "h":fa.val("sv",{s:Ha.x,v:100-Ha.y},S);break;case "s":case "a":fa.val("hv",
{h:Ha.x,v:100-Ha.y},S);break;case "v":fa.val("hs",{h:Ha.x,s:100-Ha.y},S);break;case "r":fa.val("gb",{g:255-Ha.y,b:Ha.x},S);break;case "g":fa.val("rb",{r:255-Ha.y,b:Ha.x},S);break;case "b":fa.val("rg",{r:Ha.x,g:255-Ha.y},S)}}},sa=function(P,S){var fa=na.active;if(!(S!=ba&&fa.val()==null))switch(k.color.mode){case "h":fa.val("h",{h:360-P.val("y")},S);break;case "s":fa.val("s",{s:100-P.val("y")},S);break;case "v":fa.val("v",{v:100-P.val("y")},S);break;case "r":fa.val("r",{r:255-P.val("y")},S);break;
case "g":fa.val("g",{g:255-P.val("y")},S);break;case "b":fa.val("b",{b:255-P.val("y")},S);break;case "a":fa.val("a",255-P.val("y"),S)}},va=function(P,S){if(S!=U)switch(k.color.mode){case "h":var fa=P.val("sv");U.val("xy",{x:fa!=null?fa.s:100,y:100-(fa!=null?fa.v:100)},S);break;case "s":case "a":fa=P.val("hv");U.val("xy",{x:fa&&fa.h||0,y:100-(fa!=null?fa.v:100)},S);break;case "v":fa=P.val("hs");U.val("xy",{x:fa&&fa.h||0,y:100-(fa!=null?fa.s:100)},S);break;case "r":fa=P.val("bg");U.val("xy",{x:fa&&
fa.b||0,y:255-(fa&&fa.g||0)},S);break;case "g":fa=P.val("br");U.val("xy",{x:fa&&fa.b||0,y:255-(fa&&fa.r||0)},S);break;case "b":fa=P.val("rg");U.val("xy",{x:fa&&fa.r||0,y:255-(fa&&fa.g||0)},S)}if(S!=ba)switch(k.color.mode){case "h":ba.val("y",360-(P.val("h")||0),S);break;case "s":fa=P.val("s");ba.val("y",100-(fa!=null?fa:100),S);break;case "v":fa=P.val("v");ba.val("y",100-(fa!=null?fa:100),S);break;case "r":ba.val("y",255-(P.val("r")||0),S);break;case "g":ba.val("y",255-(P.val("g")||0),S);break;case "b":ba.val("y",
255-(P.val("b")||0),S);break;case "a":fa=P.val("a");ba.val("y",255-(fa!=null?fa:255),S)}},kb=function(P){try{var S=P.val("all");oa.css({backgroundColor:S&&"#"+S.hex||"transparent"});za.call(c,oa,S&&Math.precision(S.a*100/255,4)||0)}catch(fa){}},vb=function(P){switch(k.color.mode){case "h":Ta.call(c,n,(new d({h:P.val("h")||0,s:100,v:100})).val("hex"));break;case "s":case "a":var S=P.val("s");za.call(c,E,100-(S!=null?S:100));break;case "v":S=P.val("v");za.call(c,D,S!=null?S:100);break;case "r":za.call(c,
E,Math.precision((P.val("r")||0)/255*100,4));break;case "g":za.call(c,E,Math.precision((P.val("g")||0)/255*100,4));break;case "b":za.call(c,E,Math.precision((P.val("b")||0)/255*100))}P=P.val("a");za.call(c,I,Math.precision((255-(P||0))*100/255,4))},cb=function(P){switch(k.color.mode){case "h":var S=P.val("a");za.call(c,ga,Math.precision((255-(S||0))*100/255,4));break;case "s":S=P.val("hva");var fa=new d({h:S&&S.h||0,s:100,v:S!=null?S.v:100});Ta.call(c,B,fa.val("hex"));za.call(c,O,100-(S!=null?S.v:
100));za.call(c,ga,Math.precision((255-(S&&S.a||0))*100/255,4));break;case "v":S=P.val("hsa");fa=new d({h:S&&S.h||0,s:S!=null?S.s:100,v:100});Ta.call(c,B,fa.val("hex"));za.call(c,ga,Math.precision((255-(S&&S.a||0))*100/255,4));break;case "r":case "g":case "b":fa=S=0;P=P.val("rgba");if(k.color.mode=="r"){S=P&&P.b||0;fa=P&&P.g||0}else if(k.color.mode=="g"){S=P&&P.b||0;fa=P&&P.r||0}else if(k.color.mode=="b"){S=P&&P.r||0;fa=P&&P.g||0}var Ha=fa>S?S:fa;za.call(c,O,S>fa?Math.precision((S-fa)/(255-fa)*100,
4):0);za.call(c,N,fa>S?Math.precision((fa-S)/(255-S)*100,4):0);za.call(c,aa,Math.precision(Ha/255*100,4));za.call(c,ga,Math.precision((255-(P&&P.a||0))*100/255,4));break;case "a":S=P.val("a");Ta.call(c,B,P.val("hex")||"000000");za.call(c,ga,S!=null?0:100);za.call(c,T,S!=null?100:0)}},Ta=function(P,S){P.css({backgroundColor:S&&S.length==6&&"#"+S||"transparent"})},Va=function(P,S){if(m&&(S.indexOf("AlphaBar.png")!=-1||S.indexOf("Bars.png")!=-1||S.indexOf("Maps.png")!=-1)){P.attr("pngSrc",S);P.css({backgroundImage:"none",
filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+S+"', sizingMethod='scale')"})}else P.css({backgroundImage:"url('"+S+"')"})},Ia=function(P,S){P.css({top:S+"px"})},za=function(P,S){P.css({visibility:S>0?"visible":"hidden"});if(S>0&&S<100)if(m){var fa=P.attr("pngSrc");fa!=null&&(fa.indexOf("AlphaBar.png")!=-1||fa.indexOf("Bars.png")!=-1||fa.indexOf("Maps.png")!=-1)?P.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+fa+"', sizingMethod='scale') progid:DXImageTransform.Microsoft.Alpha(opacity="+
S+")"}):P.css({opacity:Math.precision(S/100,4)})}else P.css({opacity:Math.precision(S/100,4)});else if(S==0||S==100)if(m){fa=P.attr("pngSrc");fa!=null&&(fa.indexOf("AlphaBar.png")!=-1||fa.indexOf("Bars.png")!=-1||fa.indexOf("Maps.png")!=-1)?P.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+fa+"', sizingMethod='scale')"}):P.css({opacity:""})}else P.css({opacity:""})},$a=function(){na.active.val("ahex",na.current.val("ahex"))},La=function(){na.current.val("ahex",na.active.val("ahex"))},
Sa=function(P){a(this).parents("tbody:first").find('input:radio[value!="'+P.target.value+'"]').removeAttr("checked");Ka.call(c,P.target.value)},Ja=function(){$a.call(c)},db=function(){$a.call(c);k.window.expandable&&fb.call(c);a.isFunction(ob)&&ob.call(c,na.active,ka)},lb=function(){La.call(c);k.window.expandable&&fb.call(c);a.isFunction(ib)&&ib.call(c,na.active,ma)},Ua=function(){pb.call(c)},Xa=function(P){var S=P.val("hex");pa.css({backgroundColor:S&&"#"+S||"transparent"});za.call(c,pa,Math.precision((P.val("a")||
0)*100/255,4))},wb=function(P){var S=P.val("hex");P=P.val("va");ra.css({backgroundColor:S&&"#"+S||"transparent"});za.call(c,Ca,Math.precision((255-(P&&P.a||0))*100/255,4));if(k.window.bindToInput&&k.window.updateInputColor)k.window.input.css({backgroundColor:S&&"#"+S||"transparent",color:P==null||P.v>75?"#000000":"#ffffff"})},wa=function(P){ia=parseInt(s.css("left"));ca=parseInt(s.css("top"));V=P.pageX;Y=P.pageY;a(document).bind("mousemove",hb).bind("mouseup",eb);P.preventDefault()},hb=function(P){s.css({left:ia-
(V-P.pageX)+"px",top:ca-(Y-P.pageY)+"px"});k.window.expandable&&!a.support.boxModel&&s.prev().css({left:s.css("left"),top:s.css("top")});P.stopPropagation();P.preventDefault();return false},eb=function(P){a(document).unbind("mousemove",hb).unbind("mouseup",eb);P.stopPropagation();P.preventDefault();return false},sb=function(P){P.preventDefault();P.stopPropagation();na.active.val("ahex",a(this).attr("title")||null,P.target);return false},ib=a.isFunction(b[1])&&b[1]||null,ab=a.isFunction(b[2])&&b[2]||
null,ob=a.isFunction(b[3])&&b[3]||null,pb=function(){na.current.val("ahex",na.active.val("ahex"));var P=function(){if(!(!k.window.expandable||a.support.boxModel)){var S=s.find("table:first");s.before("<iframe/>");s.prev().css({width:S.width(),height:s.height(),opacity:0,position:"absolute",left:s.css("left"),top:s.css("top")})}};if(k.window.expandable){a(document.body).children("div.jPicker.Container").css({zIndex:10});s.css({zIndex:20})}switch(k.window.effects.type){case "fade":s.fadeIn(k.window.effects.speed.show,
P);break;case "slide":s.slideDown(k.window.effects.speed.show,P);break;default:s.show(k.window.effects.speed.show,P)}},fb=function(){var P=function(){k.window.expandable&&s.css({zIndex:10});!k.window.expandable||a.support.boxModel||s.prev().remove()};switch(k.window.effects.type){case "fade":s.fadeOut(k.window.effects.speed.hide,P);break;case "slide":s.slideUp(k.window.effects.speed.hide,P);break;default:s.hide(k.window.effects.speed.hide,P)}},tb=function(){var P=k.window,S=P.expandable?a(c).next().find(".Container:first"):
null;s=P.expandable?a("<div/>"):a(c);s.addClass("jPicker Container");P.expandable&&s.hide();s.get(0).onselectstart=function(Ea){if(Ea.target.nodeName.toLowerCase()!=="input")return false};var fa=na.active.val("all");if(P.alphaPrecision<0)P.alphaPrecision=0;else if(P.alphaPrecision>2)P.alphaPrecision=2;var Ha='<table class="jPicker" cellpadding="0" cellspacing="0"><tbody>'+(P.expandable?'<tr><td class="Move" colspan="5">&nbsp;</td></tr>':"")+'<tr><td rowspan="9"><h2 class="Title">'+(P.title||da.text.title)+
'</h2><div class="Map"><span class="Map1">&nbsp;</span><span class="Map2">&nbsp;</span><span class="Map3">&nbsp;</span><img src="'+la.clientPath+la.colorMap.arrow.file+'" class="Arrow"/></div></td><td rowspan="9"><div class="Bar"><span class="Map1">&nbsp;</span><span class="Map2">&nbsp;</span><span class="Map3">&nbsp;</span><span class="Map4">&nbsp;</span><span class="Map5">&nbsp;</span><span class="Map6">&nbsp;</span><img src="'+la.clientPath+la.colorBar.arrow.file+'" class="Arrow"/></div></td><td colspan="2" class="Preview"><div class="prev_div">'+
da.text.newColor+'<div class="color_preview"><span class="Active" title="'+da.tooltips.colors.newColor+'">&nbsp;</span><span class="Current" title="'+da.tooltips.colors.currentColor+'">&nbsp;</span></div></div>'+da.text.currentColor+'</td><td rowspan="9" class="Button"><input type="button" class="Ok" value="'+da.text.ok+'" title="'+da.tooltips.buttons.ok+'"/><input type="button" class="Cancel" value="'+da.text.cancel+'" title="'+da.tooltips.buttons.cancel+'"/><div class="Grid">&nbsp;</div></td></tr><tr class="Hue"><td class="Radio"><label title="'+
da.tooltips.hue.radio+'"><input type="radio" value="h"'+(k.color.mode=="h"?' checked="checked"':"")+'/>H:</label></td><td class="Text"><input type="text" maxlength="3" value="'+(fa!=null?fa.h:"")+'" title="'+da.tooltips.hue.textbox+'"/>&nbsp;\u00ba</td></tr><tr class="Saturation"><td class="Radio"><label title="'+da.tooltips.saturation.radio+'"><input type="radio" value="s"'+(k.color.mode=="s"?' checked="checked"':"")+'/>S:</label></td><td class="Text"><input type="text" maxlength="3" value="'+(fa!=
null?fa.s:"")+'" title="'+da.tooltips.saturation.textbox+'"/>&nbsp;%</td></tr><tr class="Value"><td class="Radio"><label title="'+da.tooltips.value.radio+'"><input type="radio" value="v"'+(k.color.mode=="v"?' checked="checked"':"")+'/>V:</label></td><td class="Text"><input type="text" maxlength="3" value="'+(fa!=null?fa.v:"")+'" title="'+da.tooltips.value.textbox+'"/>&nbsp;%<br/><br/></td></tr><tr class="Red"><td class="Radio"><label title="'+da.tooltips.red.radio+'"><input type="radio" value="r"'+
(k.color.mode=="r"?' checked="checked"':"")+'/>R:</label></td><td class="Text"><input type="text" maxlength="3" value="'+(fa!=null?fa.r:"")+'" title="'+da.tooltips.red.textbox+'"/></td></tr><tr class="Green"><td class="Radio"><label title="'+da.tooltips.green.radio+'"><input type="radio" value="g"'+(k.color.mode=="g"?' checked="checked"':"")+'/>G:</label></td><td class="Text"><input type="text" maxlength="3" value="'+(fa!=null?fa.g:"")+'" title="'+da.tooltips.green.textbox+'"/></td></tr><tr class="Blue"><td class="Radio"><label title="'+
da.tooltips.blue.radio+'"><input type="radio" value="b"'+(k.color.mode=="b"?' checked="checked"':"")+'/>B:</label></td><td class="Text"><input type="text" maxlength="3" value="'+(fa!=null?fa.b:"")+'" title="'+da.tooltips.blue.textbox+'"/></td></tr><tr class="Alpha"><td class="Radio">'+(P.alphaSupport?'<label title="'+da.tooltips.alpha.radio+'"><input type="radio" value="a"'+(k.color.mode=="a"?' checked="checked"':"")+"/>A:</label>":"&nbsp;")+'</td><td class="Text">'+(P.alphaSupport?'<input type="text" maxlength="'+
(3+P.alphaPrecision)+'" value="'+(fa!=null?Math.precision(fa.a*100/255,P.alphaPrecision):"")+'" title="'+da.tooltips.alpha.textbox+'"/>&nbsp;%':"&nbsp;")+'</td></tr><tr class="Hex"><td colspan="2" class="Text"><label title="'+da.tooltips.hex.textbox+'">#:<input type="text" maxlength="6" class="Hex" value="'+(fa!=null?fa.hex:"")+'"/></label>'+(P.alphaSupport?'<input type="text" maxlength="2" class="AHex" value="'+(fa!=null?fa.ahex.substring(6):"")+'" title="'+da.tooltips.hex.alpha+'"/></td>':"&nbsp;")+
"</tr></tbody></table>";if(P.expandable){s.html(Ha);a(document.body).children("div.jPicker.Container").length==0?a(document.body).prepend(s):a(document.body).children("div.jPicker.Container:last").after(s);s.mousedown(function(){a(document.body).children("div.jPicker.Container").css({zIndex:10});s.css({zIndex:20})});s.css({left:P.position.x=="left"?S.offset().left-530-(P.position.y=="center"?25:0)+"px":P.position.x=="center"?S.offset().left-260+"px":P.position.x=="right"?S.offset().left-10+(P.position.y==
"center"?25:0)+"px":P.position.x=="screenCenter"?(a(document).width()>>1)-260+"px":S.offset().left+parseInt(P.position.x)+"px",position:"absolute",top:P.position.y=="top"?S.offset().top-312+"px":P.position.y=="center"?S.offset().top-156+"px":P.position.y=="bottom"?S.offset().top+25+"px":S.offset().top+parseInt(P.position.y)+"px"})}else{s=a(c);s.html(Ha)}Ha=s.find("tbody:first");n=Ha.find("div.Map:first");B=Ha.find("div.Bar:first");var Oa=n.find("span"),Wa=B.find("span");D=Oa.filter(".Map1:first");
E=Oa.filter(".Map2:first");I=Oa.filter(".Map3:first");Q=Wa.filter(".Map1:first");O=Wa.filter(".Map2:first");N=Wa.filter(".Map3:first");aa=Wa.filter(".Map4:first");ga=Wa.filter(".Map5:first");T=Wa.filter(".Map6:first");U=new h(n,{map:{width:la.colorMap.width,height:la.colorMap.height},arrow:{image:la.clientPath+la.colorMap.arrow.file,width:la.colorMap.arrow.width,height:la.colorMap.arrow.height}});U.bind(xa);ba=new h(B,{map:{width:la.colorBar.width,height:la.colorBar.height},arrow:{image:la.clientPath+
la.colorBar.arrow.file,width:la.colorBar.arrow.width,height:la.colorBar.arrow.height}});ba.bind(sa);ua=new e(Ha,na.active,P.expandable&&P.bindToInput?P.input:null,P.alphaPrecision);Oa=fa!=null?fa.hex:null;var Za=Ha.find(".Preview");Wa=Ha.find(".Button");oa=Za.find(".Active:first").css({backgroundColor:Oa&&"#"+Oa||"transparent"});pa=Za.find(".Current:first").css({backgroundColor:Oa&&"#"+Oa||"transparent"}).bind("click",Ja);za.call(c,pa,Math.precision(na.current.val("a")*100)/255,4);ma=Wa.find(".Ok:first").bind("click touchstart",
lb);ka=Wa.find(".Cancel:first").bind("click touchstart",db);Ba=Wa.find(".Grid:first");setTimeout(function(){Va.call(c,D,la.clientPath+"Maps.png");Va.call(c,E,la.clientPath+"Maps.png");Va.call(c,I,la.clientPath+"map-opacity.png");Va.call(c,Q,la.clientPath+"Bars.png");Va.call(c,O,la.clientPath+"Bars.png");Va.call(c,N,la.clientPath+"Bars.png");Va.call(c,aa,la.clientPath+"Bars.png");Va.call(c,ga,la.clientPath+"bar-opacity.png");Va.call(c,T,la.clientPath+"AlphaBar.png");Va.call(c,Za.find("div:last"),la.clientPath+
"preview-opacity.png")},0);Ha.find("td.Radio input").bind("click  touchstart",Sa);if(na.quickList&&na.quickList.length>0){Wa="";for(i=0;i<na.quickList.length;i++){if((typeof na.quickList[i]).toString().toLowerCase()=="string")na.quickList[i]=new d({hex:na.quickList[i]});var nb=na.quickList[i].val("a"),Ra=na.quickList[i].val("ahex");if(!P.alphaSupport&&Ra)Ra=Ra.substring(0,6)+"ff";var mb=na.quickList[i].val("hex");Wa+='<span class="QuickColor"'+(Ra&&' title="#'+Ra+'"'||"")+' style="background-color:'+
(mb&&"#"+mb||"")+";"+(mb?"":"background-image:url("+la.clientPath+"NoColor.png)")+(P.alphaSupport&&nb&&nb<255?";opacity:"+Math.precision(nb/255,4)+";filter:Alpha(opacity="+Math.precision(nb/2.55,4)+")":"")+'">&nbsp;</span>'}Va.call(c,Ba,la.clientPath+"bar-opacity.png");Ba.html(Wa);Ba.find(".QuickColor").click(sb)}Ka.call(c,k.color.mode);na.active.bind(Da);a.isFunction(ab)&&na.active.bind(ab);na.current.bind(Xa);if(P.expandable){c.icon=S.parents(".Icon:first");ra=c.icon.find(".Color:first").css({backgroundColor:Oa&&
"#"+Oa||"transparent"});Ca=c.icon.find(".Alpha:first");Va.call(c,Ca,la.clientPath+"bar-opacity.png");za.call(c,Ca,Math.precision((255-(fa!=null?fa.a:0))*100/255,4));ya=c.icon.find(".Image:first").css({backgroundImage:"url('"+la.clientPath+la.picker.file+"')"}).bind("click",Ua);if(P.bindToInput&&P.updateInputColor)P.input.css({backgroundColor:Oa&&"#"+Oa||"transparent",color:fa==null||fa.v>75?"#000000":"#ffffff"});qa=Ha.find(".Move:first").bind("mousedown",wa);na.active.bind(wb)}else pb.call(c)},la=
k.images,da=k.localization,na={active:(typeof k.color.active).toString().toLowerCase()=="string"?new d({ahex:!k.window.alphaSupport&&k.color.active?k.color.active.substring(0,6)+"ff":k.color.active}):new d({ahex:!k.window.alphaSupport&&k.color.active.val("ahex")?k.color.active.val("ahex").substring(0,6)+"ff":k.color.active.val("ahex")}),current:(typeof k.color.active).toString().toLowerCase()=="string"?new d({ahex:!k.window.alphaSupport&&k.color.active?k.color.active.substring(0,6)+"ff":k.color.active}):
new d({ahex:!k.window.alphaSupport&&k.color.active.val("ahex")?k.color.active.val("ahex").substring(0,6)+"ff":k.color.active.val("ahex")}),quickList:k.color.quickList};a.extend(true,c,{commitCallback:ib,liveCallback:ab,cancelCallback:ob,color:na,show:pb,hide:fb,destroy:function(){s.find("td.Radio input  touchstart").unbind("click",Sa);pa.unbind("click  touchstart",Ja);ka.unbind("click  touchstart",db);ma.unbind("click  touchstart",lb);if(k.window.expandable){ya.unbind("click",Ua);qa.unbind("mousedown",
wa);c.icon=null}s.find(".QuickColor").unbind("click",sb);T=ga=aa=N=O=Q=I=E=D=B=n=null;U.destroy();U=null;ba.destroy();ba=null;ua.destroy();ab=ob=ib=Ba=ka=ma=pa=oa=ua=null;s.html("");for(i=0;i<g.length;i++)g[i]==c&&g.splice(i,1)}});g.push(c);setTimeout(function(){tb.call(c)},0)})};a.fn.jPicker.defaults={window:{title:null,effects:{type:"slide",speed:{show:"slow",hide:"fast"}},position:{x:"screenCenter",y:"top"},expandable:false,liveUpdate:true,alphaSupport:false,alphaPrecision:0,updateInputColor:true},
color:{mode:"h",active:new d({ahex:"#ffcc00ff"}),quickList:[new d({h:360,s:33,v:100}),new d({h:360,s:66,v:100}),new d({h:360,s:100,v:100}),new d({h:360,s:100,v:75}),new d({h:360,s:100,v:50}),new d({h:180,s:0,v:100}),new d({h:30,s:33,v:100}),new d({h:30,s:66,v:100}),new d({h:30,s:100,v:100}),new d({h:30,s:100,v:75}),new d({h:30,s:100,v:50}),new d({h:180,s:0,v:90}),new d({h:60,s:33,v:100}),new d({h:60,s:66,v:100}),new d({h:60,s:100,v:100}),new d({h:60,s:100,v:75}),new d({h:60,s:100,v:50}),new d({h:180,
s:0,v:80}),new d({h:90,s:33,v:100}),new d({h:90,s:66,v:100}),new d({h:90,s:100,v:100}),new d({h:90,s:100,v:75}),new d({h:90,s:100,v:50}),new d({h:180,s:0,v:70}),new d({h:120,s:33,v:100}),new d({h:120,s:66,v:100}),new d({h:120,s:100,v:100}),new d({h:120,s:100,v:75}),new d({h:120,s:100,v:50}),new d({h:180,s:0,v:60}),new d({h:150,s:33,v:100}),new d({h:150,s:66,v:100}),new d({h:150,s:100,v:100}),new d({h:150,s:100,v:75}),new d({h:150,s:100,v:50}),new d({h:180,s:0,v:50}),new d({h:180,s:33,v:100}),new d({h:180,
s:66,v:100}),new d({h:180,s:100,v:100}),new d({h:180,s:100,v:75}),new d({h:180,s:100,v:50}),new d({h:180,s:0,v:40}),new d({h:210,s:33,v:100}),new d({h:210,s:66,v:100}),new d({h:210,s:100,v:100}),new d({h:210,s:100,v:75}),new d({h:210,s:100,v:50}),new d({h:180,s:0,v:30}),new d({h:240,s:33,v:100}),new d({h:240,s:66,v:100}),new d({h:240,s:100,v:100}),new d({h:240,s:100,v:75}),new d({h:240,s:100,v:50}),new d({h:180,s:0,v:20}),new d({h:270,s:33,v:100}),new d({h:270,s:66,v:100}),new d({h:270,s:100,v:100}),
new d({h:270,s:100,v:75}),new d({h:270,s:100,v:50}),new d({h:180,s:0,v:10}),new d({h:300,s:33,v:100}),new d({h:300,s:66,v:100}),new d({h:300,s:100,v:100}),new d({h:300,s:100,v:75}),new d({h:300,s:100,v:50}),new d({h:180,s:0,v:0}),new d({h:330,s:33,v:100}),new d({h:330,s:66,v:100}),new d({h:330,s:100,v:100}),new d({h:330,s:100,v:75}),new d({h:330,s:100,v:50}),new d]},images:{clientPath:"/jPicker/images/",colorMap:{width:256,height:256,arrow:{file:"mappoint.gif",width:15,height:15}},colorBar:{width:20,
height:256,arrow:{file:"rangearrows.gif",width:20,height:7}},picker:{file:"picker.gif",width:25,height:24}},localization:{text:{title:"Drag Markers To Pick A Color",newColor:"new",currentColor:"current",ok:"OK",cancel:"Cancel"},tooltips:{colors:{newColor:"New Color - Press &ldquo;OK&rdquo; To Commit",currentColor:"Click To Revert To Original Color"},buttons:{ok:"Commit To This Color Selection",cancel:"Cancel And Revert To Original Color"},hue:{radio:"Set To &ldquo;Hue&rdquo; Color Mode",textbox:"Enter A &ldquo;Hue&rdquo; Value (0-360&deg;)"},
saturation:{radio:"Set To &ldquo;Saturation&rdquo; Color Mode",textbox:"Enter A &ldquo;Saturation&rdquo; Value (0-100%)"},value:{radio:"Set To &ldquo;Value&rdquo; Color Mode",textbox:"Enter A &ldquo;Value&rdquo; Value (0-100%)"},red:{radio:"Set To &ldquo;Red&rdquo; Color Mode",textbox:"Enter A &ldquo;Red&rdquo; Value (0-255)"},green:{radio:"Set To &ldquo;Green&rdquo; Color Mode",textbox:"Enter A &ldquo;Green&rdquo; Value (0-255)"},blue:{radio:"Set To &ldquo;Blue&rdquo; Color Mode",textbox:"Enter A &ldquo;Blue&rdquo; Value (0-255)"},
alpha:{radio:"Set To &ldquo;Alpha&rdquo; Color Mode",textbox:"Enter A &ldquo;Alpha&rdquo; Value (0-100)"},hex:{textbox:"Enter A &ldquo;Hex&rdquo; Color Value (#000000-#ffffff)",alpha:"Enter A &ldquo;Alpha&rdquo; Value (#00-#ff)"}}}}})(jQuery,"1.1.6");(function(a){function h(g){var l=g||window.event,f=[].slice.call(arguments,1),b=0,c=0,k=0;g=a.event.fix(l);g.type="mousewheel";if(l.wheelDelta)b=l.wheelDelta/120;if(l.detail)b=-l.detail/3;k=b;if(l.axis!==undefined&&l.axis===l.HORIZONTAL_AXIS){k=0;c=-1*b}if(l.wheelDeltaY!==undefined)k=l.wheelDeltaY/120;if(l.wheelDeltaX!==undefined)c=-1*l.wheelDeltaX/120;f.unshift(g,b,c,k);return(a.event.dispatch||a.event.handle).apply(this,f)}var e=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var d=e.length;d;)a.event.fixHooks[e[--d]]=
a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var g=e.length;g;)this.addEventListener(e[--g],h,false);else this.onmousewheel=h},teardown:function(){if(this.removeEventListener)for(var g=e.length;g;)this.removeEventListener(e[--g],h,false);else this.onmousewheel=null}};a.fn.extend({mousewheel:function(g){return g?this.bind("mousewheel",g):this.trigger("mousewheel")},unmousewheel:function(g){return this.unbind("mousewheel",g)}})})(jQuery);methodDraw.addExtension("eyedropper",function(a){var h=methodDraw.canvas,e=svgedit.history.ChangeElementCommand,d={fillPaint:"red",fillOpacity:1,strokePaint:"black",strokeOpacity:1,strokeWidth:5,strokeDashArray:null,opacity:1,strokeLinecap:"butt",strokeLinejoin:"miter"},g=function(l,f,b){var c=null;if(l.indexOf("url(#")===0){l=(l=h.getRefElem(l))?l.cloneNode(true):$("#"+b+"_color defs *")[0];c={alpha:f};c[l.tagName]=l}else c=l.indexOf("#")===0?{alpha:f,solidColor:l.substr(1)}:{alpha:f,solidColor:"none"};
return new $.jGraduate.Paint(c)};return{name:"eyedropper",svgicons:"extensions/eyedropper-icon.xml",buttons:[{id:"tool_eyedropper",type:"mode",title:"Eye Dropper Tool",position:8,key:"I",icon:"extensions/eyedropper.png",events:{click:function(){h.setMode("eyedropper")}}}],mouseDown:function(l){var f=h.getMode(),b=l.event;b=b.target.id==="svgroot"?document.getElementById("canvas_background"):b.target;if(f=="eyedropper"&&b){d.fillPaint=b.getAttribute("fill")||"white";d.fillOpacity=b.getAttribute("fill-opacity")||
1;d.strokePaint=b.getAttribute("stroke")||"none";d.strokeOpacity=b.getAttribute("stroke-opacity")||1;d.strokeWidth=b.getAttribute("stroke-width");d.strokeDashArray=b.getAttribute("stroke-dasharray");d.strokeLinecap=b.getAttribute("stroke-linecap");d.strokeLinejoin=b.getAttribute("stroke-linejoin");d.opacity=b.getAttribute("opacity")||1;l.selectedElements=l.selectedElements.filter(Boolean);if(l.selectedElements.length){if($.inArray(l.selectedElements.nodeName,["g","use"])==-1){var c={},k=function(s,
n,B){c[n]=s.getAttribute(n);s.setAttribute(n,B)},m=new a.BatchCommand;l.selectedElements.forEach(function(s){d.fillPaint&&k(s,"fill",d.fillPaint);d.fillOpacity&&k(s,"fill-opacity",d.fillOpacity);d.strokePaint&&k(s,"stroke",d.strokePaint);d.strokeOpacity&&k(s,"stroke-opacity",d.strokeOpacity);d.strokeWidth&&k(s,"stroke-width",d.strokeWidth);d.strokeDashArray&&k(s,"stroke-dasharray",d.strokeDashArray);d.opacity&&k(s,"opacity",d.opacity);d.strokeLinecap&&k(s,"stroke-linecap",d.strokeLinecap);d.strokeLinejoin&&
k(s,"stroke-linejoin",d.strokeLinejoin);m.addSubCommand(new e(s,c));c={}});l=g(d.fillPaint,d.fillOpacity*100,"fill");f=g(d.strokePaint,d.strokeOpacity*100,"stroke");methodDraw.paintBox.fill.update(true);methodDraw.paintBox.stroke.update(true);h.undoMgr.addCommandToHistory(m)}}else{l=g(d.fillPaint,d.fillOpacity*100,"fill");f=g(d.strokePaint,d.strokeOpacity*100,"stroke");methodDraw.paintBox.fill.setPaint(l);methodDraw.paintBox.stroke.setPaint(f)}}}}});methodDraw.addExtension("view_grid",function(a){function h(k){b.attr("width");b.attr("height");var m=svgedit.units.getTypeMap()[methodDraw.curConfig.baseUnit],s=[0.01,0.1,1,10,100,1E3];d.getContentElem().getAttribute("x");var n=l;m=m*k;var B=100/m,D=1;for(k=0;k<s.length;k++){var E=s[k];D=E;if(B<=E)break}s=D*m;n.width=s;n.height=s;m=n.getContext("2d");B=s/10;m.globalAlpha=0.2;m.strokeStyle="#000";for(k=1;k<10;k++){D=Math.round(B*k)+0.5;m.moveTo(D,s);m.lineTo(D,0);m.moveTo(s,D);m.lineTo(0,D)}m.stroke();
m.beginPath();m.globalAlpha=0.5;m.moveTo(0.5,s);m.lineTo(0.5,0);m.moveTo(s,0.5);m.lineTo(0,0.5);m.stroke();n=n.toDataURL("image/png");c.setAttribute("width",s);c.setAttribute("height",s);c.parentNode.setAttribute("width",s);c.parentNode.setAttribute("height",s);d.setHref(c,n)}if(!document.getElementById("canvasGrid")){var e=document.getElementById("svgcanvas").ownerDocument,d=methodDraw.canvas,g=false;a=a.assignAttributes;var l=document.createElement("canvas");$(l).hide().appendTo("body");var f=e.createElementNS("http://www.w3.org/2000/svg",
"g");a(f,{id:"canvasGrid",width:"100%",height:"100%",x:0,y:0,overflow:"visible",display:"none"});var b=$("#canvas_background");b.after(f);f=e.createElementNS("http://www.w3.org/2000/svg","pattern");a(f,{id:"gridpattern",patternUnits:"userSpaceOnUse",x:0,y:0,width:100,height:100});var c=e.createElementNS("http://www.w3.org/2000/svg","image");a(c,{x:0,y:0,width:100,height:100});f.appendChild(c);$("#svgroot defs").append(f);e=e.createElementNS("http://www.w3.org/2000/svg","rect");a(e,{width:"100%",height:"100%",
x:0,y:0,"stroke-width":0,stroke:"none",fill:"url(#gridpattern)",style:"pointer-events: none; display:visible;"});$("#canvasGrid").append(e)}return{name:"view_grid",zoomChanged:function(k){g&&h(k)},buttons:[{id:"view_grid",type:"menu",after:"tool_wireframe",panel:"view_menu",title:"View Grid",events:{click:function(){if($("#view_grid").hasClass("push_button_pressed")){methodDraw.curConfig.showGrid=g=false;$("#view_grid").removeClass("push_button_pressed");$("#canvasGrid").attr("display","none")}else{methodDraw.curConfig.showGrid=
g=true;$("#view_grid").addClass("push_button_pressed");$("#canvasGrid").attr("display","inline");h(d.getZoom())}}}}]}});methodDraw.addExtension("shapes",function(){function a(){$("#shape_buttons").empty();$("#shape_buttons").append(B.buttons)}function h(E){var I=n[E];if(I){B=I;I.buttons.length||e(E,I);a()}else{$("#shape_buttons").html("Loading...");$.getJSON("extensions/shapelib/"+E+".json",function(Q){B=n[E]={data:Q.data,size:Q.size,fill:Q.fill};e(E,Q);a()})}}function e(E,I){var Q=B.size||300,O=B.fill||false,N=Q*0.05;N=[-N,-N,Q+N*2,Q+N*2].join(" ");Q=O?0:Q/30;Q=(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg"><svg viewBox="'+
N+'"><path fill="#333" stroke="transparent" stroke-width="'+Q+'" /></svg></svg>',"text/xml");Q.documentElement.setAttribute("width",40);Q.documentElement.setAttribute("height",40);Q=$(document.importNode(Q.documentElement,true));O=I.data;B.buttons=[];for(var aa in O){N=O[aa];var ga=Q.clone();ga.find("path").attr("d",N);N=ga.wrap('<div class="tool_button">').parent().attr({id:D+"_"+aa,title:aa});B.buttons.push(N[0])}}var d,g,l=methodDraw.canvas,f,b,c,k=l.getRootElem(),m={},s={basic:"Basic",object:"Objects",
symbol:"Symbols",arrow:"Arrows",flowchart:"Flowchart",nature:"Nature",game:"Cards & Chess",dialog_balloon:"Dialog balloons",music:"Music",weather:"Weather &amp; Time",ui:"User Interface",social:"Social Web"},n={basic:{data:{star_points_5:"m1,116.58409l113.82668,0l35.17332,-108.13487l35.17334,108.13487l113.82666,0l-92.08755,66.83026l35.17514,108.13487l-92.08759,-66.83208l-92.08757,66.83208l35.17515,-108.13487l-92.08758,-66.83026z",donut:"m1,150l0,0c0,-82.29042 66.70958,-149 149,-149l0,0c39.51724,0 77.41599,15.69816 105.35889,43.64108c27.94293,27.94293 43.64111,65.84165 43.64111,105.35892l0,0c0,82.29041 -66.70958,149 -149,149l0,0c-82.29041,0 -149,-66.70959 -149,-149zm74.5,0l0,0c0,41.1452 33.35481,74.5 74.5,74.5c41.14522,0 74.5,-33.3548 74.5,-74.5c0,-41.1452 -33.3548,-74.5 -74.5,-74.5l0,0c-41.14519,0 -74.5,33.35481 -74.5,74.5z",
triangle:"m1,280.375l149,-260.75l149,260.75z",right_triangle:"m1,299l0,-298l298,298z",diamond:"m1,150l149,-149l149,149l-149,149l-149,-149z",pentagon:"m1.00035,116.97758l148.99963,-108.4053l148.99998,108.4053l-56.91267,175.4042l-184.1741,0l-56.91284,-175.4042z",hexagon:"m1,149.99944l63.85715,-127.71428l170.28572,0l63.85713,127.71428l-63.85713,127.71428l-170.28572,0l-63.85715,-127.71428z",septagon1:"m0.99917,191.06511l29.51249,-127.7108l119.48833,-56.83673l119.48836,56.83673l29.51303,127.7108l-82.69087,102.41679l-132.62103,0l-82.69031,-102.41679z",
heptagon:"m1,88.28171l87.28172,-87.28171l123.43653,0l87.28172,87.28171l0,123.43654l-87.28172,87.28172l-123.43653,0l-87.28172,-87.28172l0,-123.43654z",decagon:"m1,150.00093l28.45646,-88.40318l74.49956,-54.63682l92.08794,0l74.50002,54.63682l28.45599,88.40318l-28.45599,88.40318l-74.50002,54.63681l-92.08794,0l-74.49956,-54.63681l-28.45646,-88.40318z",dodecagon:"m1,110.07421l39.92579,-69.14842l69.14842,-39.92579l79.85159,0l69.14842,39.92579l39.92578,69.14842l0,79.85159l-39.92578,69.14842l-69.14842,39.92578l-79.85159,0l-69.14842,-39.92578l-39.92579,-69.14842l0,-79.85159z",
trapezoid:"m1,299l55.875,-298l186.25001,0l55.87498,298z",dialog_balloon_1:"m0.99786,35.96579l0,0c0,-19.31077 15.28761,-34.96524 34.14583,-34.96524l15.52084,0l0,0l74.50001,0l139.68748,0c9.05606,0 17.74118,3.68382 24.14478,10.24108c6.40356,6.55726 10.00107,15.45081 10.00107,24.72416l0,87.41311l0,0l0,52.44785l0,0c0,19.31078 -15.2876,34.96524 -34.14584,34.96524l-139.68748,0l-97.32507,88.90848l22.82506,-88.90848l-15.52084,0c-18.85822,0 -34.14583,-15.65446 -34.14583,-34.96524l0,0l0,-52.44785l0,0z",heart:"m150,73c61,-175 300,0 0,225c-300,-225 -61,-400 0,-225z",
cylinder:"m299.0007,83.77844c0,18.28676 -66.70958,33.11111 -149.00002,33.11111m149.00002,-33.11111l0,0c0,18.28676 -66.70958,33.11111 -149.00002,33.11111c-82.29041,0 -148.99997,-14.82432 -148.99997,-33.11111m0,0l0,0c0,-18.28674 66.70956,-33.1111 148.99997,-33.1111c82.29044,0 149.00002,14.82436 149.00002,33.1111l0,132.44449c0,18.28674 -66.70958,33.11105 -149.00002,33.11105c-82.29041,0 -148.99997,-14.82431 -148.99997,-33.11105z",arrow_up:"m1.49805,149.64304l148.50121,-148.00241l148.50121,148.00241l-74.25061,0l0,148.71457l-148.5012,0l0,-148.71457z",
arrow_u_turn:"m1.00059,299.00055l0,-167.62497l0,0c0,-72.00411 58.37087,-130.37499 130.375,-130.37499l0,0l0,0c34.57759,0 67.73898,13.7359 92.18906,38.18595c24.45006,24.45005 38.18593,57.61144 38.18593,92.18904l0,18.625l37.24997,0l-74.49995,74.50002l-74.50002,-74.50002l37.25,0l0,-18.625c0,-30.8589 -25.0161,-55.87498 -55.87498,-55.87498l0,0l0,0c-30.85892,0 -55.875,25.01608 -55.875,55.87498l0,167.62497z",arrow_left_up:"m0.99865,224.5l74.50004,-74.5l0,37.25l111.74991,0l0,-111.75l-37.25,0l74.5,-74.5l74.5,74.5l-37.25,0l0,186.25l-186.24989,0l0,37.25l-74.50005,-74.5z",
plaque:"m-0.00197,49.94376l0,0c27.5829,0 49.94327,-22.36036 49.94327,-49.94327l199.76709,0l0,0c0,27.5829 22.36037,49.94327 49.94325,49.94327l0,199.7671l0,0c-27.58289,0 -49.94325,22.36034 -49.94325,49.94325l-199.76709,0c0,-27.58292 -22.36037,-49.94325 -49.94327,-49.94325z",page:"m249.3298,298.99744l9.9335,-39.73413l39.73413,-9.93355l-49.66763,49.66768l-248.33237,0l0,-298.00001l298.00001,0l0,248.33234",cross:"m0.99844,99.71339l98.71494,0l0,-98.71495l101.26279,0l0,98.71495l98.71495,0l0,101.2628l-98.71495,0l0,98.71494l-101.26279,0l0,-98.71494l-98.71494,0z",
divide:"m150,0.99785l0,0c25.17819,0 45.58916,20.41097 45.58916,45.58916c0,25.17821 -20.41096,45.58916 -45.58916,45.58916c-25.17822,0 -45.58916,-20.41093 -45.58916,-45.58916c0,-25.1782 20.41093,-45.58916 45.58916,-45.58916zm0,296.25203c-25.17822,0 -45.58916,-20.41095 -45.58916,-45.58917c0,-25.17819 20.41093,-45.58916 45.58916,-45.58916c25.17819,0 45.58916,20.41096 45.58916,45.58916c0,25.17822 -20.41096,45.58917 -45.58916,45.58917zm-134.06754,-193.71518l268.13507,0l0,91.17833l-268.13507,0z",minus:"m0.99887,102.39503l297.49445,0l0,95.2112l-297.49445,0z",
times:"m1.00089,73.36786l72.36697,-72.36697l76.87431,76.87368l76.87431,-76.87368l72.36765,72.36697l-76.87433,76.87431l76.87433,76.87431l-72.36765,72.36765l-76.87431,-76.87433l-76.87431,76.87433l-72.36697,-72.36765l76.87368,-76.87431l-76.87368,-76.87431z"},buttons:[]}},B=n.basic,D="shapelib";return{svgicons:"extensions/ext-shapes.xml",buttons:[{id:"tool_shapelib",type:"mode_flyout",position:6,title:"Shape library",icon:"extensions/ext-shapes.png",events:{click:function(){l.setMode(D)}}}],callback:function(){var E=
$('<div id="shape_buttons">');$("#tools_shapelib > *").wrapAll(E);var I=$("#tools_shapelib_show");h("basic");$("#shape_buttons").mouseup(function(O){O=$(O.target).closest("div.tool_button");if(O.length){var N=O.children().clone().attr({width:24,height:24});I.children(":not(.flyout_arrow_horiz)").remove();I.append(N).attr("data-curopt","#"+O[0].id).mouseup();l.setMode(D);g=O[0].id.substr((D+"_").length);d=B.data[g];$(".tools_flyout").fadeOut()}});E=$('<div id="shape_cats">');var Q="";$.each(s,function(O,
N){Q+="<div data-cat="+O+">"+N+"</div>"});E.html(Q).children().bind("mouseup",function(){var O=$(this);O.siblings().removeClass("current");O.addClass("current");h(O.attr("data-cat"));return false});E.children().eq(0).addClass("current");$("#tools_shapelib").prepend(E);I.mouseup(function(){l.setMode(d?D:"select")});$("#tool_shapelib").remove();E=$("#tools_shapelib").height();$("#tools_shapelib").css({"margin-top":-(E/2),"margin-left":3})},mouseDown:function(E){if(l.getMode()===D){var I=b=E.start_x;
E=c=E.start_y;var Q=l.getStyle();f=l.addSvgElementFromJson({element:"path",curStyles:true,attr:{d:d,id:l.getNextId(),opacity:Q.opacity/2,style:"pointer-events:none"}});f.setAttribute("d",d);if(/[a-z]/.test(d)){d=B.data[g]=l.pathActions.convertPath(f);f.setAttribute("d",d);l.pathActions.fixEnd(f)}f.setAttribute("transform","translate("+I+","+E+") scale(0.005) translate("+-I+","+-E+")");l.recalculateDimensions(f);l.getTransformList(f);m=f.getBBox();totalScale={sx:1,sy:1};return{started:true}}},mouseMove:function(E){if(l.getMode()===
D){var I=l.getZoom(),Q=E.event,O=E.mouse_x/I,N=E.mouse_y/I;E=l.getTransformList(f);var aa=f.getBBox();I=aa.x;var ga=aa.y,T=aa.width,U=aa.height,ba=O-b,ua=N-c,ia={x:Math.min(b,O),y:Math.min(c,N),width:Math.abs(O-b),height:Math.abs(N-c)},ca=aa=0;U=U?(U+ua)/U:1;T=T?(T+ba)/T:1;T=ia.width/m.width;U=ia.height/m.height;T=T||1;U=U||1;if(O<b)aa=m.width;if(N<c)ca=m.height;O=k.createSVGTransform();N=k.createSVGTransform();ia=k.createSVGTransform();O.setTranslate(-(I+aa),-(ga+ca));if(Q.shiftKey){replaced=true;
Q=Math.min(Math.abs(T),Math.abs(U));T=Q*(T<0?-1:1);U=Q*(U<0?-1:1);if(totalScale.sx!=totalScale.sy){Q=totalScale.sx>totalScale.sy?1:totalScale.sx/totalScale.sy;T*=totalScale.sy>totalScale.sx?1:totalScale.sy/totalScale.sx;U*=Q}}totalScale.sx*=T;totalScale.sy*=U;N.setScale(T,U);ia.setTranslate(I+aa,ga+ca);E.appendItem(ia);E.appendItem(N);E.appendItem(O);l.recalculateDimensions(f);m=f.getBBox()}},mouseUp:function(E){if(l.getMode()===D){if(E.mouse_x==b&&E.mouse_y==c)return{keep:false,element:f,started:false};
l.setMode("select");return{keep:true,element:f,started:false}}}}});(function(){for(var a=0,h=["ms","moz","webkit","o"],e=0;e<h.length&&!window.requestAnimationFrame;++e){window.requestAnimationFrame=window[h[e]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[h[e]+"CancelAnimationFrame"]||window[h[e]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame)window.requestAnimationFrame=function(d){var g=(new Date).getTime(),l=Math.max(0,16-(g-a)),f=window.setTimeout(function(){d(g+l)},l);a=g+l;return f};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=
function(d){clearTimeout(d)}})();(function(a){function h(n){var B=n.originalEvent;if(!B.touches||B.targetTouches.length===1&&B.touches.length===1){f.call(this,n);n=a(this);n.bind(m,e);n.bind(k,d)}else{clearTimeout(s);l.call(this)}}function e(n){if(s!=null){var B=n.originalEvent;n=B.changedTouches?B.changedTouches[0].pageX:B.pageX;B=B.changedTouches?B.changedTouches[0].pageY:B.pageY;var D=a(this).data("taphold.point");n=n-D.x;B=B-D.y;if(Math.sqrt(n*n+B*B)>c){clearTimeout(s);l.call(this)}}}function d(){clearTimeout(s);l.call(this)}
function g(n){l.call(this);a(this).data("taphold.handler").call(this,n)}function l(){s=null;a(this).unbind(m,e);a(this).unbind(k,d)}function f(n){if(s==null){var B=this;s=setTimeout(function(){g.call(B,n)},b);var D=n.originalEvent,E={};E.x=D.changedTouches?D.changedTouches[0].pageX:D.pageX;E.y=D.changedTouches?D.changedTouches[0].pageY:D.pageY;a(this).data("taphold.point",E)}}var b=1E3,c=5,k="touchend",m="touchmove",s=null;a.event.special.taphold={setup:function(){},add:function(n){a(this).data("taphold.handler",
n.handler);n.data?a(this).bind("touchstart",n.data,h):a(this).bind("touchstart",h)},remove:function(n){clearTimeout(s);l.call(this);n.data?a(this).unbind("touchstart",n.data,h):a(this).unbind("touchstart",h)},teardown:function(){}}})(jQuery);
